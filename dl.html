<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="William John Holden" />
  <title>Data Literacy</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: JuliaMono-Light;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  
  
  
  
  
  
  
</head>
<body>
<header id="title-block-header">
<h1 class="title">Data Literacy</h1>
<p class="author">William John Holden</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#preface" id="toc-preface">Preface</a></li>
<li><a href="#introduction" id="toc-introduction"><span
class="toc-section-number">1</span> Introduction</a>
<ul>
<li><a href="#the-wisdom-hierarchy" id="toc-the-wisdom-hierarchy"><span
class="toc-section-number">1.1</span> The Wisdom Hierarchy</a></li>
<li><a href="#parameters-and-statistics"
id="toc-parameters-and-statistics"><span
class="toc-section-number">1.2</span> Parameters and statistics</a></li>
<li><a href="#sec:numbers" id="toc-sec:numbers"><span
class="toc-section-number">1.3</span> Number Representation</a></li>
<li><a href="#sec:levels" id="toc-sec:levels"><span
class="toc-section-number">1.4</span> Levels of measurement</a></li>
<li><a href="#sec:discretize" id="toc-sec:discretize"><span
class="toc-section-number">1.5</span> Discretization</a></li>
<li><a href="#sec:nan" id="toc-sec:nan"><span
class="toc-section-number">1.6</span> Missing values</a></li>
<li><a href="#optional-and-sentinel-values"
id="toc-optional-and-sentinel-values"><span
class="toc-section-number">1.7</span> Optional and Sentinel
Values</a></li>
<li><a href="#sec:csv" id="toc-sec:csv"><span
class="toc-section-number">1.8</span> Comma-Separated Values
(CSV)</a></li>
<li><a href="#sec:strong-weak-types"
id="toc-sec:strong-weak-types"><span
class="toc-section-number">1.9</span> Strong/weak and static/dynamic
typing</a></li>
<li><a href="#tables-lists-and-data-frames"
id="toc-tables-lists-and-data-frames"><span
class="toc-section-number">1.10</span> Tables, lists, and data
frames</a></li>
<li><a href="#sec:vector" id="toc-sec:vector"><span
class="toc-section-number">1.11</span> Vectors and matrices</a></li>
<li><a href="#complex-numbers" id="toc-complex-numbers"><span
class="toc-section-number">1.12</span> Complex Numbers</a></li>
<li><a href="#sec:discrete-math" id="toc-sec:discrete-math"><span
class="toc-section-number">1.13</span> Sets, relations, functions, and
algorithms</a></li>
<li><a href="#abstraction-and-reïfication"
id="toc-abstraction-and-reïfication"><span
class="toc-section-number">1.14</span> Abstraction and
Reïfication</a></li>
<li><a href="#discussion-prompts" id="toc-discussion-prompts"><span
class="toc-section-number">1.15</span> Discussion prompts</a></li>
<li><a href="#practical-exercises" id="toc-practical-exercises"><span
class="toc-section-number">1.16</span> Practical exercises</a></li>
</ul></li>
<li><a href="#sec:visualization" id="toc-sec:visualization"><span
class="toc-section-number">2</span> Data Visualization</a>
<ul>
<li><a href="#sec:plots" id="toc-sec:plots"><span
class="toc-section-number">2.1</span> Plots</a></li>
<li><a href="#sec:barplot" id="toc-sec:barplot"><span
class="toc-section-number">2.2</span> Bar Plots</a></li>
<li><a href="#cumulative-sums-and-pareto-charts"
id="toc-cumulative-sums-and-pareto-charts"><span
class="toc-section-number">2.3</span> Cumulative Sums and Pareto
Charts</a></li>
<li><a href="#sec:boxplot" id="toc-sec:boxplot"><span
class="toc-section-number">2.4</span> Box Plots</a></li>
<li><a href="#sec:histogram" id="toc-sec:histogram"><span
class="toc-section-number">2.5</span> Histograms</a></li>
<li><a href="#sec:scatter" id="toc-sec:scatter"><span
class="toc-section-number">2.6</span> Scatter Plots</a></li>
<li><a href="#colors-and-shapes" id="toc-colors-and-shapes"><span
class="toc-section-number">2.7</span> Colors and Shapes</a></li>
<li><a href="#sec:scales" id="toc-sec:scales"><span
class="toc-section-number">2.8</span> Linear and logarithmic
scales</a></li>
<li><a href="#sec:log_exp" id="toc-sec:log_exp"><span
class="toc-section-number">2.9</span> Logarithms and
exponentiation</a></li>
<li><a href="#intuition" id="toc-intuition"><span
class="toc-section-number">2.10</span> Intuition</a></li>
<li><a href="#sec:sigmoid" id="toc-sec:sigmoid"><span
class="toc-section-number">2.11</span> Sigmoid Curves</a></li>
<li><a href="#sec:logistic" id="toc-sec:logistic"><span
class="toc-section-number">2.12</span> Logistic Curves</a></li>
<li><a href="#discussion-prompts-1" id="toc-discussion-prompts-1"><span
class="toc-section-number">2.13</span> Discussion prompts</a></li>
<li><a href="#practical-exercises-1"
id="toc-practical-exercises-1"><span
class="toc-section-number">2.14</span> Practical exercises</a></li>
</ul></li>
<li><a href="#data-operations" id="toc-data-operations"><span
class="toc-section-number">3</span> Data Operations</a>
<ul>
<li><a href="#the-relational-algebra"
id="toc-the-relational-algebra"><span
class="toc-section-number">3.1</span> The Relational Algebra</a></li>
<li><a href="#joining-tables" id="toc-joining-tables"><span
class="toc-section-number">3.2</span> Joining Tables</a></li>
<li><a href="#sec:grouping-and-aggregation"
id="toc-sec:grouping-and-aggregation"><span
class="toc-section-number">3.3</span> Grouping and Aggregation</a></li>
<li><a href="#sec:filter-map-reduce"
id="toc-sec:filter-map-reduce"><span
class="toc-section-number">3.4</span> Functional Programming</a>
<ul>
<li><a href="#filter" id="toc-filter"><span
class="toc-section-number">3.4.1</span> Filter</a></li>
<li><a href="#map" id="toc-map"><span
class="toc-section-number">3.4.2</span> Map</a></li>
<li><a href="#sec:reduce" id="toc-sec:reduce"><span
class="toc-section-number">3.4.3</span> Reduce</a></li>
<li><a href="#sec:array-programming"
id="toc-sec:array-programming"><span
class="toc-section-number">3.4.4</span> Vectorized Functions and Array
Programming</a></li>
<li><a href="#sec:immutability" id="toc-sec:immutability"><span
class="toc-section-number">3.4.5</span> Immutability</a></li>
</ul></li>
<li><a href="#sec:oop" id="toc-sec:oop"><span
class="toc-section-number">3.5</span> Object-Oriented
Programming</a></li>
<li><a href="#sec:json" id="toc-sec:json"><span
class="toc-section-number">3.6</span> JavaScript Object Notation
(JSON)</a></li>
<li><a href="#sec:parallelism-and-concurrency"
id="toc-sec:parallelism-and-concurrency"><span
class="toc-section-number">3.7</span> Parallelism and
Concurrency</a></li>
<li><a href="#the-cap-theorem" id="toc-the-cap-theorem"><span
class="toc-section-number">3.8</span> The CAP Theorem</a></li>
<li><a href="#discussion-prompts-2" id="toc-discussion-prompts-2"><span
class="toc-section-number">3.9</span> Discussion Prompts</a></li>
<li><a href="#practical-exercises-2"
id="toc-practical-exercises-2"><span
class="toc-section-number">3.10</span> Practical Exercises</a></li>
</ul></li>
<li><a href="#measures-of-central-tendency"
id="toc-measures-of-central-tendency"><span
class="toc-section-number">4</span> Measures of Central Tendency</a>
<ul>
<li><a href="#sec:least-squares-method"
id="toc-sec:least-squares-method"><span
class="toc-section-number">4.1</span> Least squares method</a></li>
<li><a href="#expected-values" id="toc-expected-values"><span
class="toc-section-number">4.2</span> Expected values</a></li>
<li><a href="#sec:moments" id="toc-sec:moments"><span
class="toc-section-number">4.3</span> The Four Moments</a></li>
<li><a href="#the-normal-distribution"
id="toc-the-normal-distribution"><span
class="toc-section-number">4.4</span> The Normal Distribution</a></li>
<li><a href="#exponential-moving-averages"
id="toc-exponential-moving-averages"><span
class="toc-section-number">4.5</span> Exponential moving
averages</a></li>
<li><a href="#strong-and-weak-links"
id="toc-strong-and-weak-links"><span
class="toc-section-number">4.6</span> Strong and Weak Links</a></li>
<li><a href="#discussion-prompts-3" id="toc-discussion-prompts-3"><span
class="toc-section-number">4.7</span> Discussion prompts</a></li>
<li><a href="#practical-exercises-3"
id="toc-practical-exercises-3"><span
class="toc-section-number">4.8</span> Practical exercises</a></li>
</ul></li>
<li><a href="#dimensionality" id="toc-dimensionality"><span
class="toc-section-number">5</span> Dimensionality</a>
<ul>
<li><a href="#combinatorics" id="toc-combinatorics"><span
class="toc-section-number">5.1</span> Combinatorics</a></li>
<li><a href="#permutations" id="toc-permutations"><span
class="toc-section-number">5.2</span> Permutations</a></li>
<li><a href="#n-choose-2" id="toc-n-choose-2"><span
class="toc-section-number">5.3</span> <span
class="math inline"><em>n</em></span> choose 2</a></li>
<li><a href="#the-curse-of-combinatorics"
id="toc-the-curse-of-combinatorics"><span
class="toc-section-number">5.4</span> The curse of
combinatorics</a></li>
<li><a href="#subsets-and-venn-diagrams"
id="toc-subsets-and-venn-diagrams"><span
class="toc-section-number">5.5</span> Subsets and Venn diagrams</a></li>
<li><a href="#sample-spaces" id="toc-sample-spaces"><span
class="toc-section-number">5.6</span> Sample spaces</a></li>
<li><a href="#paradoxes" id="toc-paradoxes"><span
class="toc-section-number">5.7</span> Paradoxes</a></li>
<li><a href="#the-binomial-distribution"
id="toc-the-binomial-distribution"><span
class="toc-section-number">5.8</span> The Binomial Distribution</a></li>
<li><a href="#sec:pareto" id="toc-sec:pareto"><span
class="toc-section-number">5.9</span> Pareto frontier</a></li>
<li><a href="#sec:cor" id="toc-sec:cor"><span
class="toc-section-number">5.10</span> Covariance and
Correlation</a></li>
<li><a href="#principal-component-analysis-pca"
id="toc-principal-component-analysis-pca"><span
class="toc-section-number">5.11</span> Principal Component Analysis
(PCA)</a></li>
<li><a href="#discussion-prompts-4" id="toc-discussion-prompts-4"><span
class="toc-section-number">5.12</span> Discussion prompts</a></li>
<li><a href="#practical-exericses" id="toc-practical-exericses"><span
class="toc-section-number">5.13</span> Practical exericses</a></li>
</ul></li>
<li><a href="#chapter:graph" id="toc-chapter:graph"><span
class="toc-section-number">6</span> Graph Theory</a>
<ul>
<li><a href="#vertices-edges-and-paths"
id="toc-vertices-edges-and-paths"><span
class="toc-section-number">6.1</span> Vertices, edges, and
paths</a></li>
<li><a href="#connectivity-and-distance"
id="toc-connectivity-and-distance"><span
class="toc-section-number">6.2</span> Connectivity and distance</a></li>
<li><a href="#sec:special-cases-of-graphs"
id="toc-sec:special-cases-of-graphs"><span
class="toc-section-number">6.3</span> Special cases of graphs</a></li>
<li><a href="#representation" id="toc-representation"><span
class="toc-section-number">6.4</span> Representation</a></li>
<li><a href="#search-algorithms" id="toc-search-algorithms"><span
class="toc-section-number">6.5</span> Search algorithms</a>
<ul>
<li><a href="#depth-first-search" id="toc-depth-first-search"><span
class="toc-section-number">6.5.1</span> Depth-first search</a></li>
<li><a href="#breadth-first-search" id="toc-breadth-first-search"><span
class="toc-section-number">6.5.2</span> Breadth-first search</a></li>
<li><a href="#sec:dijkstra" id="toc-sec:dijkstra"><span
class="toc-section-number">6.5.3</span> Dijkstra’s algorithm</a></li>
<li><a href="#informed-search-with-a"
id="toc-informed-search-with-a"><span
class="toc-section-number">6.5.4</span> Informed search with A*</a></li>
<li><a href="#a-and-the-stable-marriage-problem"
id="toc-a-and-the-stable-marriage-problem"><span
class="toc-section-number">6.5.5</span> A* and the Stable Marriage
Problem</a></li>
</ul></li>
<li><a href="#centrality" id="toc-centrality"><span
class="toc-section-number">6.6</span> Centrality</a>
<ul>
<li><a href="#degree" id="toc-degree"><span
class="toc-section-number">6.6.1</span> Degree</a></li>
<li><a href="#closeness" id="toc-closeness"><span
class="toc-section-number">6.6.2</span> Closeness</a></li>
<li><a href="#betweenness" id="toc-betweenness"><span
class="toc-section-number">6.6.3</span> Betweenness</a></li>
<li><a href="#pagerank" id="toc-pagerank"><span
class="toc-section-number">6.6.4</span> PageRank</a></li>
</ul></li>
<li><a href="#discussion-prompts-5" id="toc-discussion-prompts-5"><span
class="toc-section-number">6.7</span> Discussion prompts</a></li>
<li><a href="#practical-exercises-4"
id="toc-practical-exercises-4"><span
class="toc-section-number">6.8</span> Practical exercises</a></li>
</ul></li>
<li><a href="#references" id="toc-references">References</a></li>
</ul>
</nav>
<h1 class="unnumbered" id="preface">Preface</h1>
<p>This book started with a casual conversation with Mr. Jim Steddum. I
suggested some analytical topics that I think all Warrant Officers
should learn. He told me that the Army wants to add “data literacy”
topics to Warrant Officer Professional Military Education (WO PME). I
wrote an outline with some proposed topics, which then formed the basis
for this book.</p>
<p>This book contains a lot of code. The reader is <em>not</em> expected
to be fluent in any of the programming languages used. These programs
are provided as an interactive learning opportunity. Source code in this
text is provided along with links to online “playgrounds” where one can
edit and run the code using a web browser. This gives the reader an
opportunity to work directly with the material, testing ideas and
learning new technologies. Another reason for teaching with code is that
mathematical notation often hides complexity that one cannot ignore when
solving practical problems.</p>
<h1 data-number="1" id="introduction"><span
class="header-section-number">1</span> Introduction</h1>
<h2 data-number="1.1" id="the-wisdom-hierarchy"><span
class="header-section-number">1.1</span> The Wisdom Hierarchy</h2>
<p>todo <span class="citation"
data-cites="doi:10.1177/0165551506070706">[1]</span></p>
<h2 data-number="1.2" id="parameters-and-statistics"><span
class="header-section-number">1.2</span> Parameters and statistics</h2>
<p>Statistics are the foundation of most data mining, machine learning
(ML), and artificial intelligence (AI) methods today. A
<em>statistic</em> is an estimate of a <em>parameter</em>, which is a
characteristic of an entire <em>population</em>. Statistics are
calculated from taking <em>samples</em> (subsets) from the
population.</p>
<p>For example, suppose we wanted to find the height of the tallest
mountain in the world. We might sample <span
class="math inline"><em>n</em> = 100</span> mountains at random from an
almanac. Suppose the tallest mountain in our sample is Mount Fuji. Mount
Fuji, the tallest mountain in Japan, is <span
class="math inline">3776</span> meters tall. We can conclude that the
tallest mountain in the world is <em>at least</em> <span
class="math inline">3776</span> meters tall.</p>
<p>Our estimate is unfortunately quite low. Mount Everest in Nepal, the
<em>highest</em> mountain in the world, stands <span
class="math inline">8849</span> meters above sea level. Mauna Kea in
Hawai’i, the <em>tallest</em> mountain in the world, stands <span
class="math inline">4207</span> meters above sea level and another <span
class="math inline">6004</span> meters below. Our estimates of
population parameters, <em>statistics</em>, generally improve with
larger sample sizes, and many statistical methods provide a <em>margin
of error</em> quantifying sampling error.</p>
<p>One might use statistics to create a <em>model</em> to explain a
population, based upon sampling data. Models can be useful both for
describing the population and also for forming predictions.</p>
<h2 data-number="1.3" id="sec:numbers"><span
class="header-section-number">1.3</span> Number Representation</h2>
<p>Modern computing machines are <em>digital</em> systems which
represent numbers as <em>strings</em> (lists) of <em>bits</em>. A bit
has only two possible values: 0 or 1. Today, <em>bytes</em> are eight
bits long, although there were computers in the past which did not
follow this convention.</p>
<p>An unsigned, sixteen-bit integer has <span
class="math inline">2<sup>16</sup> = 65536</span> possible values. The
bit string <span class="math inline">0011000000111001</span> represents
.</p>
<p><span
class="math display">2<sup>0</sup> + 2<sup>3</sup> + 2<sup>4</sup> + 2<sup>5</sup> + 2<sup>12</sup> + 2<sup>13</sup> = 1 + 8 + 16 + 32 + 4096 + 8192 = 12345</span></p>
<p>Computer engineers have developed several techniques for representing
signed (possibly negative) numbers. Some computers use a dedicated sign
bit. Others use <em>one’s complement</em> or <em>two’s
complementent</em> representations.</p>
<p>Decimals are still more complex. <em>Fixed-point</em> decimals
provide some constant amount of digits for the whole and fractional
parts of the number. <em>Floating-point</em> decimals provide dynamic
whole and fractional digits, enabling the computer to represent a large
number of decimal digits when possible. Floating-point values are
common, but have several well-known pitfalls. In any modern web browser,
such as Firefox, press F12 to open the developer console and enter
<code>0.1+0.2</code>. The result is not <code>0.3</code>:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="fl">0.1</span><span class="op">+</span><span class="fl">0.2</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> <span class="fl">0.30000000000000004</span></span></code></pre></div>
<p>This happens for the same reason that <span
class="math inline">2 ÷ 3</span> produces a repeating fraction in base
10. The number <span class="math inline">2/3</span> cannot be exactly
represented in a string of decimal digits (a sum of powers of ten).
Likewise, the number <span class="math inline">0.3 = 3/10</span> cannot
be exactly represented in a string of binary digits.</p>
<p>Computing machines do not process numbers. Rather, they process bit
strings which represent numbers.</p>
<h2 data-number="1.4" id="sec:levels"><span
class="header-section-number">1.4</span> Levels of measurement</h2>
<p>There are four distinct <em>levels of measurement</em> that a value
may fit <span class="citation"
data-cites="stevens1946theory">[2]</span>. <em>Nominal</em> data is
simply names or categories, with no concept of order or distance. A
movie might be animated or live-action, a dichotomy without order.
Another example might be the film’s genre (children, comedy, action,
romance, documentary, etc).</p>
<p><em>Ordinal</em> data has ordering but not distance. Ordinal data
might be represented as ordered categories or as numerals, though these
numerals do not provide meaningful addition and subtraction. The ratings
of a film (G, PG, PG-13, R, and so on) form a ranking, but addition is
meaningless (does G + PG-13 = R?) and our concept of distance is weak at
best. Another example of ordinal might be the rankings the films receive
at an awards ceremony, where one film is the winner and another is the
runner-up.</p>
<p><em>Interval</em> data is numerical data with a concept of distance
but not multiplication. The year when a film was produced is an example
of interval data. If two films were produced in 2000 and 2010, then it
makes sense to say one was made ten years later, but we would not say
that the latter film is <span
class="math inline">$\frac{\num{2010}}{\num{2000}} = 1.005$</span> times
the first.</p>
<p><em>Ratio</em> data is numerical data with both distance and
multiplication. The gross earnings of a film is an example of ratio
data. If the 2000 film earned one million dollars and the 2010 film
earned two million dollars, then it makes sense to say the second film
earned double the first.</p>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Operations</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Nominal</td>
<td><span class="math inline">=</span>, <span
class="math inline">≠</span></td>
<td>Categories</td>
</tr>
<tr class="even">
<td>Ordinal</td>
<td><span class="math inline">&lt;</span>, <span
class="math inline">&gt;</span></td>
<td>Ordered categories</td>
</tr>
<tr class="odd">
<td>Interval</td>
<td><span class="math inline">+</span>, <span
class="math inline">−</span></td>
<td>Numbers with distance</td>
</tr>
<tr class="even">
<td>Ratio</td>
<td><span class="math inline">×</span>, <span
class="math inline">÷</span></td>
<td>Numbers with meaningful zero</td>
</tr>
</tbody>
</table>
<p>Interval data might be initially confusing to distinguish from ratio
data. One indication is the absence of a meaningful zero. Does zero
degrees Celsius or zero degrees Fahrenheit mean the absence of
temperature? No. These temperature measurements are simply points along
a <em>scale</em>. Twenty degrees Celsius is not “twice” ten degrees
Celsius; multiplication is not defined on interval data.</p>
<p>Grid coördinates are another example of interval data. One can
calculate the distance between two grid coördinates, but we would not
say that coördinate 1111 is “half” of coördinate 2222.</p>
<p>Women’s pant sizes in the United States, with the confusing size
“00,” is yet another example of interval data.</p>
<p>Data might be represented in numerical formats when some operations
do not make sense. Suppose a political scientist encoded voter’s
political party as “1”, “2”, “3”, and “4”. Is “2” an intermediate value
between “1” and “3”, or are these actually nominal data where the only
arithmetic operations are <span class="math inline">=</span> and <span
class="math inline">≠</span>? AI methods may form incorrect assumptions
about data that domain experts can easily prevent.</p>
<h2 data-number="1.5" id="sec:discretize"><span
class="header-section-number">1.5</span> Discretization</h2>
<p>Measurements with arbitrarily many decimal digits of precision are
<em>continuous</em>, whereas measurements with finite steps in between
(including categories) are <em>discrete</em>. For example, when driving
along a road, the house numbers (150 Main Street, 152 Main Street, 154
Main Street…) are discrete; there is no intermediate value between <span
class="math inline">150</span> and <span class="math inline">151</span>.
On the other hand, the grid coördinates associated with each address are
continuous; one could (theoretically) specify grid position to the
square millimeter, picometer, nanometer, and beyond.</p>
<p>It can be useful to combine continuous measurements into discrete
categories. An example might be one’s birth date and birth year. No one
knows their birth <em>instant</em> with subsecond precision. Rather, the
year, year and month, or year, month, and day are almost almost always
enough information. We even combine years into groups when discussing
generations and peer groups. Combining a range of birth years into
generational categories is an example of <em>discretization</em>.</p>
<h2 data-number="1.6" id="sec:nan"><span
class="header-section-number">1.6</span> Missing values</h2>
<p>In practice, <em>data sets</em> often have missing values. Different
programming languages have substantially different syntax and semantics
for representing and handling missing values.</p>
<p>As a small exercise, open Microsoft Excel and enter the values 1, 2,
3, and 5 into cells A1, A2, A3, and A5. Leave cell A4 blank. In cell A6,
enter the formula <code>=PRODUCT(A1:A5)</code>. The result is <span
class="math inline">30 = 1 ⋅ 2 ⋅ 3 ⋅ 5</span>. Excel did <em>not</em>
treat the missing value as a zero.</p>
<p>Now change cell A4 to <code>=NA()</code>. <code>NA</code> means
“value not available”, an explicit indication that a value is not given.
The product in cell A6 should update to <code>#N/A</code>, which
explicitly tells us that there is a problem in the calculation.</p>
<p>Now change cell A4 to <code>=1/0</code>. Both cells A4 and A6 should
both say <code>#DIV/0!</code>, a fault telling us that a division by
zero has made further calculation impossible.</p>
<p>Error values propagate from source data through intermediate
calculations to final results. If we enter a formula into A7 referencing
A6, such as <code>=SQRT(A6)</code>, then we will find the same faults in
A7 that we see in A6.</p>
<p>Structured Query Language (SQL) databases use the symbol
<code>NULL</code> to denote missing values. One might build the database
<em>schema</em> (the structure of the database) to explicitly forbid
<code>NULL</code> values. For example,</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> Run (</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  Name TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Time</span> <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  Distance <span class="dt">REAL</span> <span class="kw">NOT</span> <span class="kw">NULL</span>)</span></code></pre></div>
<p>defines a table <em>schema</em> where each of the three columns must
be specified. Many programming languages (including C, Java, and
JavaScript) also use the term <code>null</code> for variables that do
not reference any specific value.</p>
<p>Many programming languages support a <code>NaN</code> (“not a
number”) value in error conditions. One might encounter <code>NaN</code>
when dividing by zero, subtracting infinities, and parsing non-numeric
words as numbers. Comparisons with <code>NaN</code> can be confusing,
such as <code>NaN == NaN</code> returning <em>false</em>.</p>
<p>Some programming languages will automatically <em>initialize</em>
variables with some zero value. Other languages give some
<code>Undefined</code> value to uninitialized variables. Still other
languages raise an error if no explicit value is assigned to a
variable.</p>
<h2 data-number="1.7" id="optional-and-sentinel-values"><span
class="header-section-number">1.7</span> Optional and Sentinel
Values</h2>
<p>Computer scientist Tony Hoare famously called null references a
“billion dollar mistake,” explaining that programming languages with
<em>nullable</em> values contain flaws that might have been prevented in
languages that require value initialization <span class="citation"
data-cites="BillionDollarMistake">[3]</span>.</p>
<p>Rust is one of many young languages that provides an
<em>optional</em> type to express a value which may or may not contain
useful information. The form <code>Some(value)</code> indicates a usable
value. If the programmer wishes to express the absence of a value, they
use <code>None</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>use rand<span class="sc">::</span>Rng;</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>fn <span class="fu">g</span>() <span class="ot">-&gt;</span> Option<span class="sc">&lt;</span>f32<span class="sc">&gt;</span> {</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    let mut rng <span class="ot">=</span> rand<span class="sc">::</span><span class="fu">rng</span>();</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    let x <span class="ot">=</span> <span class="fu">rng.random_range</span>(<span class="dv">0</span><span class="at">.0..=</span><span class="fl">1.0</span>);</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> x <span class="sc">&gt;</span> <span class="fl">0.5</span> {</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">Some</span>(x)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        None</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>fn <span class="fu">main</span>() {</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    match <span class="fu">g</span>() {</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">Some</span>(x) <span class="sc">=&gt;</span> println<span class="sc">!</span>(<span class="st">&quot;g() returned some value, {x}.&quot;</span>),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        None <span class="sc">=&gt;</span> println<span class="sc">!</span>(<span class="st">&quot;g() returned none.&quot;</span>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Repeatedly run this program at the Rust Playground<a href="#fn1"
class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> and
observe that the <code>g()</code> function returns <code>Some(x)</code>
values where <span class="math inline">0.5 ≤ <em>x</em> ≤ 1.0</span> and
<code>None</code>.</p>
<p>The use of the language’s type system to express optional values
allows Rust to eschew <em>sentinel values</em>, which are special values
used to control a program. An example of a sentinel value is in the
<code>read()</code> function of the C programming language.
<code>read()</code> is used to read data from files, and ordinarily
returns the number of bytes read, but in many cases returns 0 or <span
class="math inline">−1</span>, signaling status to the caller.</p>
<h2 data-number="1.8" id="sec:csv"><span
class="header-section-number">1.8</span> Comma-Separated Values
(CSV)</h2>
<p><em>Comma-separated values</em> (CSV) are a well-known situation
where sentinel values are especially problematic. A CSV file is a simple
method of structuring data in plain-text files. For example, a table
such as</p>
<table>
<thead>
<tr class="header">
<th><span class="math inline"><em>x</em></span></th>
<th><span class="math inline"><em>y</em></span></th>
<th><span class="math inline"><em>z</em></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Rob</td>
<td>0.74019382956651820</td>
<td>0.3508759018489489</td>
</tr>
<tr class="even">
<td>John</td>
<td>0.41331428270607506</td>
<td>0.2936926427452584</td>
</tr>
<tr class="odd">
<td>David</td>
<td>0.37671743737357277</td>
<td>0.5676190157838865</td>
</tr>
<tr class="even">
<td>Frank</td>
<td>0.50270122376380740</td>
<td>0.7939268929144455</td>
</tr>
</tbody>
</table>
<p>can be entered into a CSV file as</p>
<pre><code>x,y,z
Rob,0.74019382956651820,0.3508759018489489
John,0.41331428270607506,0.2936926427452584
David,0.37671743737357277,0.5676190157838865
Frank,0.50270122376380740,0.7939268929144455</code></pre>
<p>In section , we will see this same data represented in a more modern
format called JSON.</p>
<p>What happens if we add a column where values themselves contain
commas? RFC 4180, a specification for CSV, recommends enclosing values
containing commas with quotation marks <span class="citation"
data-cites="rfc4180">[4]</span>. If the value enclosed with quotation
marks also contains a quotation mark, then a doubled quotation mark
(<code>"this field contains ""escaped"" quotation marks"</code>)
<em>escapes</em> the inner value for unambiguous parsing.</p>
<p>Unicode and its predecessor, the American Standard Code for
Information Interchange (ASCII), provide <em>control codes</em>
<code>001C</code>, <code>001D</code>, <code>001E</code>, and
<code>001F</code> for file, group, record, and unit separators,
respectively, but these codes are not commonly used. If these codes had
been more convenient to type, our world of data might have avoided some
of the common pitfalls of CSV and other formats containing sentinel
values.</p>
<h2 data-number="1.9" id="sec:strong-weak-types"><span
class="header-section-number">1.9</span> Strong/weak and static/dynamic
typing</h2>
<p>Values come in many forms: categorical and numerical, ordered and
unordered, discrete and continuous, defined and missing. <em>Types</em>
can be used to constrain variables to allowable values and applicable
operations.</p>
<p>For example, suppose a database indicates how many cars a person
owns. It makes no sense to own a fractional or negative car, so we might
find an existing type (in this case, whole numbers) or define some new
type to model the domain.</p>
<p>Some programming languages offer <em>dynamic</em> types that
implicitly change the type (<em>cast</em>) of values to operate
correctly. Go to https://jsfiddle.net or press F12 to open the developer
console in most modern browsers. Enter the following into the JavaScript
console:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="st">&quot;5&quot;</span> <span class="op">*</span> <span class="dv">5</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> <span class="dv">25</span></span></code></pre></div>
<p>Characters inside quotation marks (<code>"5"</code>) are called
<em>strings</em> and are ordinarily used for text, but JavaScript
automatically parses <code>"5" * 5</code> as the product of two
numerical values and returns <code>25</code>.</p>
<p>JavaScript is notoriously inconsistent.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="st">&quot;5&quot;</span> <span class="op">+</span> <span class="dv">5</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> <span class="st">&quot;55&quot;</span></span></code></pre></div>
<p>The resulting string, <code>"55"</code>, is the
<em>concatenation</em> of two strings – perhaps not what one
expects.</p>
<p>Many languages and environments seek to automatically parse values.
Microsoft Excel and the Python programming language are also dynamic.
Other languages, such as Java and Go, are more strict with values and do
not automatically change values, especially when the conversion might be
“lossy” (where information might be lost, such as approximating the
exact value of <span class="math inline"><em>π</em></span> as <span
class="math inline">3.14</span>, or rounding <span
class="math inline">3.14</span> to <span class="math inline">3</span>,
or even changing <span class="math inline">3.0</span> to <span
class="math inline">3</span>). These languages have both <em>strong</em>
and <em>static</em> typing: the programmer must specify the type of each
variable, and lossy type conversions require an explicit cast.</p>
<p>Excel does provide some basic functionality to set number
<em>formats</em>, but this feature might not stop one from confusing one
type of data for another. Excel uses <em>weak</em> typing that does
prevent one from using unexpected values. Data analysts can benefit
greatly by using the appropriate types for the values in their
problem.</p>
<h2 data-number="1.10" id="tables-lists-and-data-frames"><span
class="header-section-number">1.10</span> Tables, lists, and data
frames</h2>
<!-- https://drops.dagstuhl.de/storage/01oasics/oasics-vol076-plateau2019/OASIcs.PLATEAU.2019.6/OASIcs.PLATEAU.2019.6.pdf -->
<p><em>Tables</em> of data are structured in <em>columns</em> and
<em>rows</em>, where the rows represent the <em>individuals</em> or
<em>observations</em> in the data set and the columns represent the
<em>features</em>. For example, a table of employee names might have two
columns (the given and surnames) and ten rows, where each row represents
one of the ten employees.</p>
<p>In computer science, the terms <em>list</em> and <em>array</em> both
refer to single-column tables, but with different internal memory
representation. The distinction is usually unimportant to data
analysts.</p>
<p>Scientific languages, such as Julia and R, often use the term
<em>data frame</em> (or <em>dataframe</em>) as their method for
representing tables of data. Data frames often provide rich syntax for
row-wise and column-wise operations. By contrast, in an object-oriented
language, such as Java and JavaScript, the idiomatic representation of a
table is likely an array of objects. We will discuss object-oriented
programming in more detail in section .</p>
<!-- ## Forms and input validation -->
<h2 data-number="1.11" id="sec:vector"><span
class="header-section-number">1.11</span> Vectors and matrices</h2>
<p>We now quickly mention the terms <em>vector</em> and <em>matrix</em>
here to disambiguate them from other terms already defined.</p>
<p>Arrays, lists, and columns containing numeric data may sometimes be
represented with <em>vectors</em>. Likewise, tables and data frames
might be represented with <em>matrices</em>.</p>
<p>A vector is a quantity with both magnitude and direction, generally
consisting of two or more elements. A plot demonstrating vector
summation is shown in figure .</p>
<p><span
class="math display"><strong>x</strong> = (<em>x</em><sub>1</sub>, <em>x</em><sub>2</sub>, <em>x</em><sub>3</sub>, ⋯, <em>x</em><sub><em>n</em></sub>)</span></p>
<p>The above vector <span class="math inline"><strong>x</strong></span>
has three components and length <span class="math inline">$\sqrt{x_1 ^2
+ x_2^2 + x_3^2 + \cdots + x_n^2}$</span>.</p>
<p>A matrix is a collection of vectors used for linear transformations.
For example, the three-component <em>identity matrix</em></p>
<p><span class="math display">$$
I_3 = \begin{pmatrix}1 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 \\ 0 &amp; 0
&amp; 1\end{pmatrix}
$$</span></p>
<p>has the property</p>
<p><span class="math display">$$
\begin{aligned}
I_3 \mathbf{x} &amp;= \begin{pmatrix}1 &amp; 0 &amp; 0 \\ 0 &amp; 1
&amp; 0 \\ 0 &amp; 0 &amp; 1\end{pmatrix} \begin{pmatrix}x_1 \\ x_2 \\
x_3\end{pmatrix} \\
&amp;= \begin{pmatrix}
1 \cdot x_1 + 0 \cdot x_2 + 0 \cdot x_3 \\
0 \cdot x_1 + 1 \cdot x_2 + 0 \cdot x_3 \\
0 \cdot x_1 + 0 \cdot x_2 + 1 \cdot x_3 \\
\end{pmatrix}\\
&amp;= \mathbf{x}.
\end{aligned}
$$</span></p>
<p>Vectors and matrices form the foundations of <em>linear algebra</em>,
a rich and powerful branch of mathematics that produces many of the
results needed for modern statistics, ML, and AI methods.</p>
<p>Remember that the different in ratio and interval data was that
<em>multiplication</em> is only defined for ratio data. Similarly,
multiplication is well-defined for vectors and matrices, but not on
tables of data.</p>
<p>Depending on the problem domain, it may be inappropriate to use
matrices and vectors to represent data where such operations are not
necessary. Some programming languages use the terms “vector” and “array”
interchangably, or to indicate an array has dynamic vice fixed size.
Many programming languages support <em>tuples</em> as an alternative
representation of a quantity with multiple values.</p>
<p>One must take care to verify an arithmetic operator performs as
expected with “vectors” and tuples in different languages. Compare and
contrast the semantics of arrays and tuples in Python</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>In [<span class="dv">1</span>]: <span class="dv">1</span> <span class="op">==</span> [<span class="dv">1</span>]</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>Out[<span class="dv">1</span>]: <span class="va">False</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>In [<span class="dv">2</span>]: <span class="dv">1</span> <span class="op">==</span> (<span class="dv">1</span>,)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>Out[<span class="dv">2</span>]: <span class="va">False</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>In [<span class="dv">3</span>]: [<span class="dv">1</span>, <span class="dv">2</span>] <span class="op">+</span> [<span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>Out[<span class="dv">3</span>]: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>In [<span class="dv">4</span>]: (<span class="dv">1</span>, <span class="dv">2</span>) <span class="op">+</span> (<span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>Out[<span class="dv">4</span>]: (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span></code></pre></div>
<p>and R</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">1</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">==</span> <span class="fu">list</span>(<span class="dv">1</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>) <span class="sc">+</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">4</span> <span class="dv">6</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>) <span class="sc">+</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>) <span class="sc">+</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">4</span>) <span class="sc">:</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  non<span class="sc">-</span>numeric argument to binary operator</span></code></pre></div>
<p>Python’s behavior is typical of general-purpose programming
languages, while R’s behavior (see section ) is common among scientific
languages.</p>
<h2 data-number="1.12" id="complex-numbers"><span
class="header-section-number">1.12</span> Complex Numbers</h2>
<p><em>Complex numbers</em>, which have “real” and “imaginary”
components, are also multidimensional values, but with the property
<span class="math inline">$i = \sqrt{-1}$</span> and therefore <span
class="math inline"><em>i</em><sup>2</sup> = −1</span>. This means that
their multiplication forms a cycle, as shown in figure .</p>
<p><span class="math display">$$
\begin{aligned}
1 \times i &amp;= i \\
i \times i &amp;= -1 \\
-1 \times i &amp;= -i \\
-i \times i &amp;= 1 \\
\end{aligned}
$$</span></p>
<p>Many languages provide complex arithmetic for situations that require
it. An R example is shown below.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span><span class="dt">i</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span><span class="dt">i</span>) <span class="sc">*</span> <span class="dv">1</span><span class="dt">i</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">0</span><span class="sc">+</span><span class="dv">1</span><span class="dt">i</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">+</span><span class="dv">0</span><span class="dt">i</span>  <span class="dv">0-1</span><span class="dt">i</span>  <span class="dv">1</span><span class="sc">+</span><span class="dv">0</span><span class="dt">i</span></span></code></pre></div>
<p>While complex arithmetic is common in physics and signal progressing,
many scientific disciplines have no use cases for complex numbers. If
one has a two-dimensional quantity and no application for the
multiplication rules shown in figure , then one should avoid complex
types and instead favor arrays.</p>
<p>As an example, suppose one wanted to represent the systolic and
diastolic values in blood pressure samples. One <em>could</em> use a
complex value instead of an array or tuple, but now the values have a
concept of multiplication and direction that is not appropriate to the
problem domain. Just as we learned to consider which arithmetic
operations apply to our data in section , likewise we must consider the
operations applicable to composite values.</p>
<h2 data-number="1.13" id="sec:discrete-math"><span
class="header-section-number">1.13</span> Sets, relations, functions,
and algorithms</h2>
<p>We now introduce a few terms from <em>discrete mathematics</em> that
are fundamental to all analysis. A <em>set</em> is an unordered
collection of <em>distinct</em> elements. Sets may be finite or infinite
in size. Sets are denoted with curly braces, and the empty set has the
special symbol <span class="math inline">∅ = {}</span>. An example of a
set might be</p>
<p><span
class="math display"><em>W</em> = {Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday}</span></p>
<p>A <em>relation</em> is an association between members of sets.
Relations can be used to model any relationship between members any two
sets, or even members in the same set. An example might be the relation
between integers and elements of <span
class="math inline"><em>W</em></span> with that many letters, i.e. 6 has
a relation on Sunday, Monday, and Friday, 7 has a relation on Tuesday, 8
has a relation on Thursday and Saturday, and 9 has a relation on
Wednesday. The term “relation” is seldom used outside of discrete
mathematics, but there is a <em>special case</em> of a relation that
occurs in all mathematical disciplines: <em>functions</em>.</p>
<p>A <em>function</em> is a relation that uniquely relates members of
one set (the <em>domain</em>) to another set (the <em>range</em>). An
example of some functions might be:</p>
<p><span class="math display">$$
\begin{aligned}
\textrm{Translate} \left( \textrm{Friday}, \textrm{English},
\textrm{German} \right) &amp;= \textit{Freitag} \\
\textrm{Length} \left( \textrm{Wednesday} \right) &amp;= 9 \\
\textrm{Distance} \left( \textrm{Thursday} , \textrm{Tuesday} \right)
&amp;= -2 \\
\textrm{DaysOfLength} \left( 6 \right) &amp;= \left\{ \textrm{Sunday} ,
\textrm{Monday} , \textrm{Friday} \right\} \\
\textrm{Sunday} &amp;= \textrm{Next} \left( \textrm{Saturday} \right) \\
&amp;= \textrm{Previous} \left( \textrm{Monday} \right) \\
&amp;= \textrm{Previous} \left( \textrm{Previous} \left(
\textrm{Tuesday} \right) \right) \\
&amp;= \textrm{Previous} \left( \textrm{Next} \left( \textrm{Sunday}
\right) \right)
\end{aligned}
$$</span></p>
<p>Each of these functions accepts one or more <em>parameters</em> as
<em>arguments</em> and returns the unique corresponding value (if any)
from its range. It may appear that the third function, DaysOfLength, has
returned three values, but actually this function has returned a single
set which contains three values.</p>
<p>Many programming languages use the term “function” as a synonym for
<em>procedure</em>, <em>subroutine</em>, and <em>method</em>. Functions
are “pure” if they have no side-effects, such as mutating a value
outside of the function.</p>
<p>The mathematical definition of the term <em>algorithm</em> is the set
of instructions necessary to solve a problem. Long division, a procedure
for manually dividing numbers, is an example of an algorithm. The term
“algorithm” has recently entered the popular lexicon in relation to AI
systems. Here, the instructions of the algorithm are part of a model,
which is created from data.</p>
<!-- ## Bisection algorithm (todo) -->
<h2 data-number="1.14" id="abstraction-and-reïfication"><span
class="header-section-number">1.14</span> Abstraction and
Reïfication</h2>
<p>Take any three-digit decimal (base 10) number, reverse the digits,
and their difference will always be divisible by both 9 and 11. For
example, <span class="math inline">321 − 123 = 198</span>; <span
class="math inline">198 ÷ 9 = 22</span> and <span
class="math inline">198 ÷ 11 = 18</span>.</p>
<p>How and why would this strange property hold? The proof is quite easy
using algebra. We change the digits of a three-digit number into
variables. Some three-digit number <span
class="math inline"><em>a</em><em>b</em><em>c</em> = 100<em>a</em> + 10<em>b</em> + <em>c</em></span>.</p>
<p><span class="math display">$$
\begin{aligned}
abc - cba &amp;= (100a + 10b + c) - (100c + 10b + a) \\
&amp;= 100a + 10b + c - 100c - 10b - a \\
&amp;= 99a - 99c \\
&amp;= 99(a - c) \square
\end{aligned}
$$</span></p>
<p>By <em>abstracting</em> numerals into variables, the claim becomes
easy to verify.</p>
<p>Here is another example of abstraction. How does one calculate 30% of
70 without a calculator? First, observe that</p>
<p><span class="math display">$$
x \% \text{ of } y = \frac{x \times y}{100}.
$$</span></p>
<p>So, 30% of 70 is <span class="math inline">$\frac{30 \times 70}{100}
= \frac{\num{2100}}{100} = 21$</span>.</p>
<p>Abstraction can be a powerful tool for solving problems and
developing proofs. In the field of computer networking, countless
problems are solved by the pattern, “we have more than one thing, but it
is inconvenient to operate more than one of these things, so we built a
method to abstractly represent arbitrarily many of these things as
super-things.”</p>
<p>Abstractions are <em>leaky</em> when one must understand the internal
details to use the abstraction effectively. For example, surprises such
as <code>0.1 + 0.2 == 0.30000000000000004</code> in floating-point
arithmetic lead to programmers understanding more implementation details
than intended; floating-point arithemetic is a leaky abstraction towards
representing real numbers (see section ). The object-oriented paradigm
(see section ) emphasizes <em>encapsulation</em> of both data and code
to allow users to use the <em>interface</em> exposed by an object
without consideration for its implementation.</p>
<p><em>Reïfication</em> is the opposite of abstraction: we something
specific from something general. For example, suppose we have a language
translation function</p>
<p><span
class="math display"><em>T</em>(<em>x</em>, <em>l</em><sub>1</sub>, <em>l</em><sub>2</sub>)</span></p>
<p>where <span class="math inline"><em>x</em></span> is the message to
be translated, <span class="math inline"><em>l</em><sub>1</sub></span>
is the input language, and <span
class="math inline"><em>l</em><sub>2</sub></span> is the output
language.</p>
<p><span
class="math display"><em>T</em>(hello, English, French) = <em>bonjour</em></span></p>
<p>From this general function, we can enclose parameters <span
class="math inline"><em>l</em><sub>1</sub></span> and <span
class="math inline"><em>l</em><sub>2</sub></span> into a specific
function.</p>
<p><span class="math display">$$
\begin{aligned}
T'(x) &amp;= T(x, \text{English}, \text{French}) \\
T'(\text{goodbye}) &amp;= \textit{au revoir}
\end{aligned}
$$</span></p>
<p>Function <span class="math inline"><em>T</em>′</span> reïfys <span
class="math inline"><em>T</em></span> into a less general form. Such
functions might be called <em>convenience functions</em> that are
provided as a “quality of life” improvement for the user. An example of
a convenience function might be <code>LOG10(number)</code> in Excel.
Excel also provides <code>LOG(number,[base])</code> (where
<code>base</code> defaults to 10 if omitted), but some users may prefer
the explicit syntax <code>LOG10</code> to improve clarity.</p>
<h2 data-number="1.15" id="discussion-prompts"><span
class="header-section-number">1.15</span> Discussion prompts</h2>
<ol type="1">
<li><p>Who owns knowledge management?</p></li>
<li><p>What are good and bad uses for spreadsheets?</p></li>
<li><p>What is reproducibility? Why would this be important for
scientific inquiry?</p></li>
<li><p>A manager sends an Excel spreadsheet to their employees, telling
them to each enter information and send it back. What are some
challenges the manager might experience while merging these
spreadsheets?</p></li>
</ol>
<h2 data-number="1.16" id="practical-exercises"><span
class="header-section-number">1.16</span> Practical exercises</h2>
<ol type="1">
<li><p>Create a small survey using Microsoft Forms (part of Office 365)
or Google Forms (part of Google Docs). Compare this experience to the
hypothetical manager who gathered information by manually merging
spreadsheets.</p></li>
<li><p>Given a noisy and poorly structured dataset, propose a method of
restructuring the data.</p></li>
<li><p>Discretize the values of a dataset and explain the
reasoning.</p></li>
</ol>
<h1 data-number="2" id="sec:visualization"><span
class="header-section-number">2</span> Data Visualization</h1>
<h2 data-number="2.1" id="sec:plots"><span
class="header-section-number">2.1</span> Plots</h2>
<p><em>Plots</em> allow us to visualize data. Good plots help us to
quickly intuit patterns in the data that might otherwise be difficult to
understand.</p>
<p>(Note: the term <em>graph</em> has different definitions in lower and
higher mathematics. We will explain the term “graph” in chapter . This
text uses the term “plot” as the verb and noun for visualizing data with
graphics.)</p>
<p>The <em>bar plot</em> helps us to compare the count each category in
a discrete (or discretized) variable. The <em>box plot</em> helps us to
see the center and variation of a numerical variable. The
<em>histogram</em> also helps us to see the center and variation of a
numerical variable, often producing the familiar <em>bell curve</em>
shape, where the height of the curve indicates the count of observations
within the range of each “bin.” A histogram is essentially a set of bar
plots over discretized numerical values.</p>
<p>A <em>scatter plot</em> (sometimes called an <span
class="math inline"><em>X</em><em>Y</em></span> plot) uses <span
class="math inline"><em>x</em></span> and <span
class="math inline"><em>y</em></span> axes to show relationships between
two variables. One can also color and shape the points to show third and
fourth variables. Three-dimensional <span
class="math inline"><em>X</em><em>Y</em><em>Z</em></span> plots are
sometimes useful, especially in video and interactive presentations.</p>
<p>As a small exercise to experiment with these four plots, go to
https://webr.r-wasm.org/latest/ to use the R language in a web browser.
R is a programming language for statistics and data visualization.</p>
<p>R includes several built-in data sets. We will use included Motor
Trend Cars (<code>mtcars</code>) data set.</p>
<p>In the <em>read-evaluate-print loop</em> (<em>REPL</em>) at the
bottom-left of the screen, enter</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">head</span>(mtcars)</span></code></pre></div>
<p>to view the column names and first six rows of the Motor Trend Cars
(<code>mtcars</code>) data set. Enter</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> mtcars</span></code></pre></div>
<p>to view the full data set.</p>
<p>Place a question mark before a function or data set name in the REPL
to get help in R. Try opening the R help for <code>mtcars</code> and
<code>head</code> with the following commands:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> ?mtcars</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> ?head</span></code></pre></div>
<h2 data-number="2.2" id="sec:barplot"><span
class="header-section-number">2.2</span> Bar Plots</h2>
<p>In the REPL of https://webr.r-wasm.org/latest/, create a <em>bar
plot</em> from the cylinders (<code>cyl</code>) column of the Motor
Trend Cars data set:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">barplot</span>(mtcars<span class="sc">$</span>cyl)</span></code></pre></div>
<figure id="fig:barplot">
<embed src="mtcars-barplot.pdf" />
<figcaption aria-hidden="true">A bar plot of the number of cylinders in
each car of the Motor Trend Cars data set.</figcaption>
</figure>
<p>Bar plots are useful for numerical features of a data set. In figure
, the horizontal axis is unlabeled and the order is left unspecified.
One might use labels, order, color, or grouping to aid the reader in
interpreting data.</p>
<p>The width of each bar should ordinarily be uniform. As</p>
<p><span class="math display">Area = Width × Height,</span></p>
<p>the enlarged area of the wider bar may mislead the reader. For
example, suppose a bar plot is intended to compare the values <span
class="math inline"><em>x</em> = (3, 10, 11)</span>, but the bars
corresponding to each observation are, respectively, <span
class="math inline"><em>w</em> = (1, 1, 2)</span>. The resulting areas
are <span
class="math inline"><em>x</em> ⊙ <em>w</em> = (3, 10, 22)</span> (here,
<span class="math inline">⊙</span> indicates the <em>element-wise</em>
product of two vectors, also known as a <em>Hadamard</em> product). As
shown in figure , the area of the third bar is more than double that of
the second and may mislead the reader.</p>
<h2 data-number="2.3" id="cumulative-sums-and-pareto-charts"><span
class="header-section-number">2.3</span> Cumulative Sums and Pareto
Charts</h2>
<p>A <em>Pareto chart</em> is a useful analytical tool to show the
relative importance of problems in industrial settings. The chart shows
the proportion of problems discretized (see section ) into root causes.
We can compute these cumulative sums using reduce and visualize them
with a bar plot.</p>
<p>The following example uses data gathered from CrossFit.com<a
href="#fn2" class="footnote-ref" id="fnref2"
role="doc-noteref"><sup>2</sup></a>. The <code>%&gt;%</code> operator,
from the <code>dplyr</code> package, anonymously “pipes” the output from
one function into the first argument of the next function. Structurally,
the <code>%&gt;%</code> produces a left-to-right order of operations
that can be easier to write, read, and maintain than functions written
in prefix and infix notation. <code>dplyr</code> uses
<code>mutate</code> as row-wise <code>map</code> operation with support
for aggregate functions (such as <code>sum(n)</code> below; see also
section ).</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(tidyverse)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> v <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;Methenolone&quot;</span>, <span class="st">&quot;Meldonium&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;Oxandrolene&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;Clomiphene&quot;</span>, <span class="st">&quot;Clomiphene&quot;</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;Turinabol&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;RAD140&quot;</span>, <span class="st">&quot;GW1516&quot;</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;Stanozolol&quot;</span>, <span class="st">&quot;Drostanolone&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;Clomiphene&quot;</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;Ostarine&quot;</span>, <span class="st">&quot;S-23&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;Clomiphene&quot;</span>, <span class="st">&quot;GW1516&quot;</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Meldonium&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;5aAdiol&quot;</span>, <span class="st">&quot;Stanozolol&quot;</span>, <span class="st">&quot;Testosterone&quot;</span>, </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Drostanolone&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;Metenolone&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;Boldenone&quot;</span>, </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;GW1516&quot;</span>, <span class="st">&quot;GW1516&quot;</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">Violation =</span> v) <span class="sc">%&gt;%</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Violation) <span class="sc">%&gt;%</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Proportion =</span> <span class="fl">100.0</span> <span class="sc">*</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Violation, Proportion) <span class="sc">%&gt;%</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CumSum =</span> <span class="fu">cumsum</span>(Proportion))</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> df</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>      Violation Proportion    CumSum</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>        GW1516  <span class="fl">55.555556</span>  <span class="fl">55.55556</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    Clomiphene   <span class="fl">8.888889</span>  <span class="fl">64.44444</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  Drostanolone   <span class="fl">4.444444</span>  <span class="fl">68.88889</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>     Meldonium   <span class="fl">4.444444</span>  <span class="fl">73.33333</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>    Stanozolol   <span class="fl">4.444444</span>  <span class="fl">77.77778</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>       <span class="dv">5</span>aAdiol   <span class="fl">2.222222</span>  <span class="fl">80.00000</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>     Boldenone   <span class="fl">2.222222</span>  <span class="fl">82.22222</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>    Metenolone   <span class="fl">2.222222</span>  <span class="fl">84.44444</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>   Methenolone   <span class="fl">2.222222</span>  <span class="fl">86.66667</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>     Ostarine   <span class="fl">2.222222</span>  <span class="fl">88.88889</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>  Oxandrolene   <span class="fl">2.222222</span>  <span class="fl">91.11111</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>       RAD140   <span class="fl">2.222222</span>  <span class="fl">93.33333</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span>         S<span class="dv">-23</span>   <span class="fl">2.222222</span>  <span class="fl">95.55556</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> Testosterone   <span class="fl">2.222222</span>  <span class="fl">97.77778</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>    Turinabol   <span class="fl">2.222222</span> <span class="fl">100.00000</span></span></code></pre></div>
<p>This dataset does not quite show the famous “Pareto Principle” where
20% of problems cause 80% of problems, but we do see that the
distribution is not uniform. The first category accounts for over half
of the observations. Using R’s <code>ggplot</code> library, we show the
resulting Pareto chart with the bars and cumulative sum line.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Violation, <span class="sc">-</span>Proportion))) <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">weight =</span> Proportion)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> CumSum, <span class="at">group=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Drug Violation&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Proportion&quot;</span>)</span></code></pre></div>
<figure>
<embed src="pareto-chart.pdf" />
<figcaption aria-hidden="true">A Pareto chart shows the relative and
cumulative proportions of discretized quantities, sorted in decreasing
incidence. Frequently used in quality control processes, such as Lean
Six Sigma, Pareto charts may show that only one or a few causes lead to
a significant proportion of problems.</figcaption>
</figure>
<h2 data-number="2.4" id="sec:boxplot"><span
class="header-section-number">2.4</span> Box Plots</h2>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">boxplot</span>(mtcars<span class="sc">$</span>mpg)</span></code></pre></div>
<figure id="fig:boxplot">
<embed src="mtcars-boxplot.pdf" />
<figcaption aria-hidden="true">todo</figcaption>
</figure>
<h2 data-number="2.5" id="sec:histogram"><span
class="header-section-number">2.5</span> Histograms</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">hist</span>(mtcars<span class="sc">$</span>mpg)</span></code></pre></div>
<figure id="fig:histogram">
<embed src="mtcars-hist.pdf" />
<figcaption aria-hidden="true">todo</figcaption>
</figure>
<h2 data-number="2.6" id="sec:scatter"><span
class="header-section-number">2.6</span> Scatter Plots</h2>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">plot</span>(mtcars<span class="sc">$</span>wt, mtcars<span class="sc">$</span>mpg)</span></code></pre></div>
<figure id="fig:scatter">
<embed src="mtcars-plot.pdf" />
<figcaption aria-hidden="true">todo</figcaption>
</figure>
<h2 data-number="2.7" id="colors-and-shapes"><span
class="header-section-number">2.7</span> Colors and Shapes</h2>
<p>Color and, to a lesser extent, shapes can be useful to express</p>
<h2 data-number="2.8" id="sec:scales"><span
class="header-section-number">2.8</span> Linear and logarithmic
scales</h2>
<p>Scientists use the term <em>order of magnitude</em> to compare values
only by the power of <span class="math inline">10</span>. One would say
<span class="math inline"><em>a</em> = 1.6 × 10<sup>3</sup></span> is
three orders of magnitude smaller than <span
class="math inline"><em>b</em> = 8.3 × 10<sup>6</sup></span>, which is
to say <span
class="math inline"><em>b</em>/<em>a</em> ≈ 1000</span>.</p>
<p>The <em>scale</em> of an axis, such as in bar plot, is the spacing
between values. A <em>linear scale</em> might show marks at 10, 20, 30,
40, and so on. A <em>logarithmic scale</em> might show marks at 10, 100,
<span class="math inline">1000</span>, <span
class="math inline">10000</span>, and so on.</p>
<embed src="barplot-linear-scale.pdf" style="width:50.0%" /> <embed
src="barplot-log-scale.pdf" style="width:50.0%" />
<p>Logarithmic scales can be useful for comparing values that differ by
more than one order of magnitude. For example, suppose feature of a data
set contains categories <span class="math inline"><em>a</em></span>,
<span class="math inline"><em>b</em></span>, <span
class="math inline"><em>c</em></span>, and <span
class="math inline"><em>d</em></span>, and the count of each category
is</p>
<table>
<thead>
<tr class="header">
<th>Category</th>
<th>Count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline"><em>a</em></span></td>
<td></td>
</tr>
<tr class="even">
<td><span class="math inline"><em>b</em></span></td>
<td></td>
</tr>
<tr class="odd">
<td><span class="math inline"><em>c</em></span></td>
<td></td>
</tr>
<tr class="even">
<td><span class="math inline"><em>d</em></span></td>
<td></td>
</tr>
</tbody>
</table>
<p>Return to https://webr.r-wasm.org/latest/ and plot this data with
linear and logarithmic scales:</p>
<pre><code>&gt; category_counts &lt;- c(10736, 1711, 398, 319)
&gt; category_counts
[1] 10736  1711   398   319
&gt; barplot(category_counts)
&gt; barplot(category_counts, log=&quot;y&quot;)</code></pre>
<p>These plots are shown in figure .</p>
<h2 data-number="2.9" id="sec:log_exp"><span
class="header-section-number">2.9</span> Logarithms and
exponentiation</h2>
<p>A logarithm is the inverse of exponentiation. If</p>
<p><span class="math display">$$
a^b = \underbrace{a \times a \times a \times \cdots \times a}_{b \text{
terms of } a} = c,
$$</span></p>
<p>then</p>
<p><span
class="math display">log<sub><em>a</em></sub><em>c</em> = <em>b</em>.</span></p>
<p>In this case, <span class="math inline"><em>a</em></span> is the
<em>base</em> of the logarithmc, and we read <span
class="math inline">log<sub><em>a</em></sub><em>c</em></span> as “the
log, base <span class="math inline"><em>a</em></span>, of <span
class="math inline"><em>c</em></span>.”</p>
<p>Euler’s constant, <span
class="math inline"><em>e</em> ≈ 2.718281828459045</span>, is frequently
associated with exponential and logarithmic functions. When the base of
a logarithm is equal to <span class="math inline"><em>e</em></span>, we
call this the <em>natural logarithm</em> and express it as</p>
<p><span
class="math display">ln <em>x</em> = log<sub><em>e</em></sub><em>x</em>.</span></p>
<p>Plots of <span
class="math inline"><em>e</em><sup><em>x</em></sup></span> and <span
class="math inline">ln <em>x</em></span> are shown in figure .</p>
<h2 data-number="2.10" id="intuition"><span
class="header-section-number">2.10</span> Intuition</h2>
<p>Figure shows exponential and quadratic functions <span
class="math inline"><em>e</em><sup><em>x</em></sup></span> and <span
class="math inline"><em>x</em><sup>2</sup></span> on logarithmic scales.
The exponential function forms a straight line when plotted this way,
but the quadratic does not. This is because <span
class="math inline">ln <em>e</em><sup><em>x</em></sup> = <em>x</em></span>,
but <span
class="math inline">ln <em>x</em><sup>2</sup> = 2ln <em>x</em></span>,
which means the plot of <span
class="math inline"><em>x</em><sup>2</sup></span> reveals the same slow
growth that we saw in figure . If the exponential function had a base
<span class="math inline"><em>b</em></span> other than <span
class="math inline"><em>e</em></span>, then</p>
<p><span
class="math display">ln <em>b</em><sup><em>x</em></sup> = <em>x</em>ln <em>b</em>,</span></p>
<p>where <span class="math inline">ln <em>b</em></span> is a constant
factor and observable as the slope of the resulting plot.</p>
<p>In his 1954 article <em>Relation between Weight-Lifting Totals and
Body Weight</em>, Lietzke claims that an athlete’s “weight-lifting
ability should be proportional to the two-thirds power of the body
weight” <span class="citation"
data-cites="doi:10.1126/science.124.3220.486">[5]</span>. Lietzke scales
both the <span class="math inline"><em>x</em></span> and <span
class="math inline"><em>y</em></span> axes with a logarithm, where <span
class="math inline"><em>x</em></span> and <span
class="math inline"><em>y</em></span> respectively represent bodyweight
and weightlifting total. The resulting log-log plot shows straight line
with a slope of <span class="math inline">0.67 ≈ 2/3</span> indicates
that if</p>
<p><span class="math display">$$
\log \text{strength} \propto \frac{2}{3} \log \text{bodyweight}
$$</span></p>
<p>then<a href="#fn3" class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a>
<!-- Don't recognize a symbol? Use https://detexify.kirelabs.org/classify.html --></p>
<p><span
class="math display">strength ∝ bodyweight<sup>2/3</sup>.</span></p>
<p>Changing the scale on a plot can be a simple but powerful method to
develop intuition for the shape of the data. However, one should be
cautious of over-generalization. In section , we will see misleading
shape in the plot of a logistic curve, but first we must explain the
sigmoid curve in section .</p>
<h2 data-number="2.11" id="sec:sigmoid"><span
class="header-section-number">2.11</span> Sigmoid Curves</h2>
<p>The <em>sigmoid</em> function, <span
class="math inline"><em>σ</em>(<em>x</em>)</span>, can be used to model
a system characterized by competing exponential growth and decay<a
href="#fn4" class="footnote-ref" id="fnref4"
role="doc-noteref"><sup>4</sup></a>. That is, the sigmoid represents a
system with limited resources.</p>
<p><span class="math display">$$
\sigma \left( x \right) = \frac{1}{1+e^{-x}} = \frac{e^x}{1+e^x}
$$</span></p>
<p>An example from epidemiology is the spread of a contagion within a
population. Initially, very few individuals have the disease, but the
rate at which the disease spreads quickly increases as the number of
infected members compounds. At the same time, however, the probability
that another individual is already infected or can resist the contagion
also increases, slowing the spread as we reach some <em>inflection
point</em>, as shown in figure .</p>
<!-- https://tex.stackexchange.com/a/563446/311890 -->
<!-- https://tikz.dev/pgfplots/ -->
<h2 data-number="2.12" id="sec:logistic"><span
class="header-section-number">2.12</span> Logistic Curves</h2>
<!-- https://www.researchgate.net/publication/233238354_Math-alive_using_original_sources_to_teach_mathematics_in_social_context -->
<p>The <em>logistic</em> function is a parameterized sigmoid function of
the form</p>
<p><span class="math display">$$
\frac{L}{1+e^{-k \left( x-x_0 \right)}}.
$$</span></p>
<p>Figure shows a logistic function</p>
<p><span class="math display">$$
l(x) = \frac{100}{1+2.75 e^{-0.4x}}
$$</span></p>
<p>plotted over the domain <span
class="math inline">0 ≤ <em>x</em> ≤ 5</span>. The parameters and domain
are chosen carefully to provide aconfusing plot. The curve in figure
forms a mostly straight line. Data sampled from this narrow range might
fit a linear model with very little error, but of course this is only
because we have zoomed into the center of the curve.</p>
<p>Consider a fad in the world that starts very small, but quickly
spreads in popularity as network effects cascade into increased
awareness. One might call this a “trend,” and the trend line may
initially appear linear or even exponential, but as the fad grows so too
might shortages, opposition, or regulation slow its growth.</p>
<h2 data-number="2.13" id="discussion-prompts-1"><span
class="header-section-number">2.13</span> Discussion prompts</h2>
<ol type="1">
<li><p>Like a barplot, a pie chart shows the relative sizes of
categorical values. What are some advantages and disadvantages of using
pie charts?</p></li>
<li><p>What are some plot practices, such as inconsistent scales, that
would be misleading to the reader?</p></li>
<li><p>Consider a situation where the sigmoid and logistic curves might
reasonably model constrained exponential growth. If one only observes
the center of this system, then the slow initial growth and diminishing
returns might not be visible in a scatter plot of the data. Discuss
graphical and analytical methods one might use to predict the future
behavior of the uncertain system.</p></li>
</ol>
<h2 data-number="2.14" id="practical-exercises-1"><span
class="header-section-number">2.14</span> Practical exercises</h2>
<ol type="1">
<li><p>Given a dataset, plot the data and explain why this plot
technique is appropriate.</p></li>
<li><p>Be creative and construct intentionally misleading plots, then
try to “spot the flaw” in one another’s work.</p></li>
<li><p>Plot our logistic function from section , <span
class="math inline">$l(x) = \frac{100}{1+2.75 e^{-0.4x}}$</span>, on a
logarithmic scale and manipulate the domain. Does the logistic function
still look linear on a logarithmic scale?</p></li>
</ol>
<h1 data-number="3" id="data-operations"><span
class="header-section-number">3</span> Data Operations</h1>
<h2 data-number="3.1" id="the-relational-algebra"><span
class="header-section-number">3.1</span> The Relational Algebra</h2>
<p>Codd’s <em>relational algebra</em> is the framework theory describing
all modern <em>database management systems</em> (DBMS) <span
class="citation" data-cites="codd1970relational">[6]</span>. The
relational algebra can be described with five primitives:
<em>selection</em> (<span class="math inline"><em>σ</em></span>),
<em>projection</em> (<span class="math inline"><em>π</em></span>), the
<em>Cartesian product</em> (<span class="math inline">×</span>; also
known as the <em>cross product</em>), set <em>union</em> (<span
class="math inline">∪</span>), and set <em>difference</em> (<span
class="math inline">−</span>).</p>
<p>Selection takes all or a subset of a table’s rows. Projection takes
all or a subset of a table’s columns. In Structured Query Languages
(SQL), selection is specified in the <code>WHERE</code> clause and
projection is specified in the list of columns immediately after
<code>SELECT</code>.</p>
<p>A Cartesian product is the multiplication of sets. If <span
class="math inline"><em>A</em> = {<em>i</em>, <em>j</em>}</span> and
<span
class="math inline"><em>B</em> = {<em>x</em>, <em>y</em>, <em>z</em>}</span>,
then <span
class="math inline"><em>A</em> × <em>B</em> = {(<em>i</em>, <em>x</em>), (<em>i</em>, <em>y</em>), (<em>i</em>, <em>z</em>), (<em>j</em>, <em>x</em>), (<em>j</em>, <em>y</em>), (<em>j</em>, <em>z</em>)}</span>.
The Cartesian product produces the set of all possible pairwise
combinations of elements in each set. These composite values are called
<em>tuples</em>. Tuples may contain more than two values. If <span
class="math inline"><em>C</em> = {<em>c</em>}</span>, then</p>
<p><span
class="math display"><em>A</em> × <em>B</em> × <em>C</em> = {(<em>i</em>, <em>x</em>, <em>c</em>), (<em>i</em>, <em>y</em>, <em>c</em>), (<em>i</em>, <em>z</em>, <em>c</em>), (<em>j</em>, <em>x</em>, <em>c</em>), (<em>j</em>, <em>y</em>, <em>c</em>), (<em>j</em>, <em>z</em>, <em>c</em>)}.</span></p>
<p>As an exercise, go to the SQLime Playground<a href="#fn5"
class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> to
use a DBMS named SQLite. Enter the following commands to reproduce the
above Cartesian product.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> A (a text);</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> B (b text);</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> C (c text);</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> A(a) <span class="kw">VALUES</span> (<span class="st">&#39;i&#39;</span>), (<span class="st">&#39;j&#39;</span>);</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> B(b) <span class="kw">VALUES</span> (<span class="st">&#39;x&#39;</span>), (<span class="st">&#39;y&#39;</span>), (<span class="st">&#39;z&#39;</span>);</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> C(c) <span class="kw">VALUES</span> (<span class="st">&#39;c&#39;</span>);</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> A <span class="kw">CROSS</span> <span class="kw">JOIN</span> B <span class="kw">CROSS</span> <span class="kw">JOIN</span> C;</span></code></pre></div>
<p>This text views tuples as unordered and “flattened” sets, and
therefore Cartesian products are both <em>commutative</em> (<span
class="math inline"><em>R</em> × <em>S</em> = <em>S</em> × <em>R</em></span>)
and <em>associative</em> (<span
class="math inline"><em>R</em> × (<em>S</em> × <em>T</em>) = (<em>R</em> × <em>S</em>) × <em>T</em></span>).
Some mathematical texts use a stricter definition for the Cartesian
product where the result is a set, which does not “flatten” and
therefore provides neither commutivity nor associativity. This text uses
the looser definition for compatibility with practical DBMSs, including
SQLite. Mathematics is partly discovered and partly invented.</p>
<p>Set union, <span class="math inline">∪</span>, combines two sets.
Sets definitionally contain only distinct elements. If <span
class="math inline"><em>A</em> = {<em>i</em>, <em>j</em>, <em>k</em>}</span>
and <span
class="math inline"><em>B</em> = {<em>k</em>, <em>l</em>, <em>m</em>}</span>,
then</p>
<p><span
class="math display"><em>A</em> ∪ <em>B</em> = {<em>i</em>, <em>j</em>, <em>k</em>, <em>l</em>, <em>m</em>}.</span></p>
<p>Set difference, <span class="math inline">−</span>, retains the
elements of the left set that are not present in the right set.</p>
<p><span
class="math display"><em>A</em> − <em>B</em> = {<em>i</em>, <em>j</em>, <em>k</em>} − {<em>k</em>, <em>l</em>, <em>m</em>} = {<em>i</em>, <em>j</em>}.</span></p>
<h2 data-number="3.2" id="joining-tables"><span
class="header-section-number">3.2</span> Joining Tables</h2>
<p>The <em>join</em> (<span class="math inline">⋈</span>) is a
combination of the Cartesian product and selection. For example, suppose
we have a tables named <code>Swim</code>, <code>Bike</code>, and
<code>Run</code>. Each table has a column that uniquely identifies an
athlete. To get a triathletes (the athletes who participate in swimming,
cycling, and running), we use an <em>equijoin</em> to find the product
where the names are equal. Return to the SQLime Playground<a href="#fn6"
class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> to
demonstrate experiment with the <code>JOIN</code> operator.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> Swim (sn TEXT <span class="kw">UNIQUE</span>);</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> Bike (bn TEXT <span class="kw">UNIQUE</span>);</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> Run (rn TEXT <span class="kw">UNIQUE</span>);</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">OR</span> IGNORE <span class="kw">INTO</span> Swim (sn) <span class="kw">VALUES</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;John&#39;</span>), (<span class="st">&#39;Jane&#39;</span>), (<span class="st">&#39;Luke&#39;</span>), (<span class="st">&#39;Phil&#39;</span>);</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">OR</span> IGNORE <span class="kw">INTO</span> Bike (bn) <span class="kw">VALUES</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;Mary&#39;</span>), (<span class="st">&#39;Alex&#39;</span>), (<span class="st">&#39;Jane&#39;</span>), (<span class="st">&#39;Levi&#39;</span>);</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">OR</span> IGNORE <span class="kw">INTO</span> Run (rn) <span class="kw">VALUES</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;Mike&#39;</span>), (<span class="st">&#39;John&#39;</span>), (<span class="st">&#39;Jane&#39;</span>), (<span class="st">&#39;Sven&#39;</span>);</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Swim, Bike, Run <span class="kw">WHERE</span> sn <span class="op">=</span> bn <span class="kw">AND</span> sn <span class="op">=</span> rn;</span></code></pre></div>
<p>There are other syntaxes which achieve the same result using the
<code>ON</code> and <code>USING</code> clauses. As an exercise, try to
predict how many rows will return from
<code>SELECT * FROM Swim, Bike, Run</code> without a <code>WHERE</code>
clause.</p>
<h2 data-number="3.3" id="sec:grouping-and-aggregation"><span
class="header-section-number">3.3</span> Grouping and Aggregation</h2>
<p>DBMSs provide robust <em>grouping</em> functions for operating on
related rows. Return to the SQLime Playground<a href="#fn7"
class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> and
create a small table of hypothetical marathon times.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> Marathon (rn TEXT <span class="kw">UNIQUE</span>,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">time</span> <span class="dt">INTEGER</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  gender TEXT <span class="kw">CHECK</span>( gender <span class="kw">IN</span> (<span class="st">&#39;M&#39;</span>, <span class="st">&#39;F&#39;</span>) ));</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">OR</span> IGNORE <span class="kw">INTO</span> Marathon (rn, <span class="dt">time</span>, gender) <span class="kw">VALUES</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  (<span class="st">&#39;Kyle&#39;</span>, <span class="dv">2</span><span class="op">*</span><span class="dv">60</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">14</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">22</span>, <span class="st">&#39;M&#39;</span>),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  (<span class="st">&#39;Hank&#39;</span>, <span class="dv">2</span><span class="op">*</span><span class="dv">60</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">10</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">45</span>, <span class="st">&#39;M&#39;</span>),</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  (<span class="st">&#39;Lily&#39;</span>, <span class="dv">2</span><span class="op">*</span><span class="dv">60</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">24</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">47</span>, <span class="st">&#39;F&#39;</span>),</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  (<span class="st">&#39;Emma&#39;</span>, <span class="dv">2</span><span class="op">*</span><span class="dv">60</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">22</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">37</span>, <span class="st">&#39;F&#39;</span>),</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  (<span class="st">&#39;Elle&#39;</span>, <span class="dv">2</span><span class="op">*</span><span class="dv">60</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">25</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">16</span>, <span class="st">&#39;F&#39;</span>),</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  (<span class="st">&#39;Fred&#39;</span>, <span class="dv">2</span><span class="op">*</span><span class="dv">60</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">6</span><span class="op">*</span><span class="dv">60</span> <span class="op">+</span> <span class="dv">17</span>, <span class="st">&#39;M&#39;</span>);</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">MIN</span>(<span class="dt">time</span>) <span class="kw">FROM</span> Marathon <span class="kw">GROUP</span> <span class="kw">BY</span> (gender);</span></code></pre></div>
<p><code>MIN</code> is one of the <em>aggregate functions</em> in
SQLite. The <code>GROUP BY</code> clause tells the DBMS to split the
rows into groups on the <code>gender</code> column.</p>
<p>One might be tempted to find the names of our male and female
champions with
<code>SELECT rn, MIN(time) FROM Marathon GROUP BY (gender)</code>. This
may work in some DBMSs but there is a subtle bug. It might be obvious
that we want the <code>rn</code> associated with the
<code>MIN(time)</code> value, but suppose we change the query to also
include <code>MAX(time)</code>:</p>
<pre><code>SELECT rn, MIN(time), MAX(time) FROM Marathon GROUP BY (gender);</code></pre>
<p>Now it is no longer clear which <code>rn</code> the query should
return. Should the DBMS return the <code>rn</code> associated with the
<code>MIN(time)</code>, the <code>MAX(time)</code>, or some other
<code>rn</code> from the group?</p>
<p>The solution in this particular case is to nest our
<code>MIN(time)</code> aggregation as a <em>subquery</em>.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> Marathon</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">WHERE</span> <span class="dt">time</span> <span class="kw">IN</span> (</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">SELECT</span> <span class="fu">MIN</span>(<span class="dt">time</span>) <span class="kw">FROM</span> Marathon <span class="kw">GROUP</span> <span class="kw">BY</span> (gender));</span></code></pre></div>
<p>SQL uses the <em>declarative programming</em> paradigm, where the
language is used to describe the <em>result</em> that the user<a
href="#fn8" class="footnote-ref" id="fnref8"
role="doc-noteref"><sup>8</sup></a> wants while leaving the
implementation details to the DBMS. Systems designed for declarative
programming often excel in situations that the developer intended but
sometimes struggle when the user needs something unusual. For situations
where the user needs to specify the detailed process to compute the
result, we use the <em>imperative programming</em> paradigm. Two
specific imperative approaches are <em>functional</em> and
<em>object-oriented</em> programming. In practice, the distinctions are
often blurred by languages and databases that provide functionality from
all three.</p>
<h2 data-number="3.4" id="sec:filter-map-reduce"><span
class="header-section-number">3.4</span> Functional Programming</h2>
<p>SQL’s declarative syntax makes it easy to write select, project, and
join (SPJ) queries. SQL grouping and aggregate functions make it
possible to perform row-wise and column-wise operations. A
<em>functional</em> programming language, which emphasizes the use of
pure functions (see section ) to express algorithms, provides comparable
semantics in the <em>filter</em>, <em>map</em>, and <em>reduce</em>
functions.</p>
<h3 data-number="3.4.1" id="filter"><span
class="header-section-number">3.4.1</span> Filter</h3>
<p>Filter works much like the <code>WHERE</code> clause: it takes a
subset of the rows, based off of a condition. In JavaScript, we might
filter an array with:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> [<span class="st">&#39;cat&#39;</span><span class="op">,</span> <span class="st">&#39;dog&#39;</span><span class="op">,</span> <span class="st">&#39;fish&#39;</span><span class="op">,</span> <span class="st">&#39;bird&#39;</span>]<span class="op">.</span><span class="fu">filter</span>(v <span class="kw">=&gt;</span> v<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;i&#39;</span>))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> [<span class="st">&#39;fish&#39;</span><span class="op">,</span> <span class="st">&#39;bird&#39;</span>]</span></code></pre></div>
<h3 data-number="3.4.2" id="map"><span
class="header-section-number">3.4.2</span> Map</h3>
<p>Map performs the same function over each element of an input set,
creating “mappings” to elements of an output set.</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> [<span class="st">&#39;fish&#39;</span><span class="op">,</span> <span class="st">&#39;bird&#39;</span>]<span class="op">.</span><span class="fu">map</span>(v <span class="kw">=&gt;</span> v<span class="op">.</span><span class="fu">toUpperCase</span>())</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> [<span class="st">&#39;FISH&#39;</span><span class="op">,</span> <span class="st">&#39;BIRD&#39;</span>]</span></code></pre></div>
<h3 data-number="3.4.3" id="sec:reduce"><span
class="header-section-number">3.4.3</span> Reduce</h3>
<p>Reduce, also known as <em>fold</em>, performs some operation on each
element of an input set and returns an <em>accumulator</em>, which is
passed again to the reduce function with the next input value. To take
an array’s sum, we use an initial accumulator value of 0.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="dv">15</span> <span class="op">+</span> <span class="dv">25</span> <span class="op">+</span> <span class="dv">35</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> <span class="dv">75</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> [<span class="dv">15</span><span class="op">,</span><span class="dv">25</span><span class="op">,</span><span class="dv">35</span>]<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> v) <span class="kw">=&gt;</span> a <span class="op">+</span> v<span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> <span class="dv">75</span></span></code></pre></div>
<p>For the array’s product, we use 1 for the initial accumulator
value.</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> <span class="dv">15</span> <span class="op">*</span> <span class="dv">25</span> <span class="op">*</span> <span class="dv">35</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> <span class="dv">13125</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> [<span class="dv">15</span><span class="op">,</span><span class="dv">25</span><span class="op">,</span><span class="dv">35</span>]<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> v) <span class="kw">=&gt;</span> a <span class="op">*</span> v<span class="op">,</span> <span class="dv">1</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> <span class="dv">13125</span></span></code></pre></div>
<p>Both filter and reduce can be implemented in terms of reduce.</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> [<span class="st">&#39;cat&#39;</span><span class="op">,</span> <span class="st">&#39;dog&#39;</span><span class="op">,</span> <span class="st">&#39;fish&#39;</span><span class="op">,</span> <span class="st">&#39;bird&#39;</span>]<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span>v) <span class="kw">=&gt;</span> {</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (v<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;i&#39;</span>)) {</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>            a<span class="op">.</span><span class="fu">push</span>(v)<span class="op">;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span> [])</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> [<span class="st">&#39;fish&#39;</span><span class="op">,</span> <span class="st">&#39;bird&#39;</span>]</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span> [<span class="st">&#39;fish&#39;</span><span class="op">,</span> <span class="st">&#39;bird&#39;</span>]<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span>v) <span class="kw">=&gt;</span> {</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        a<span class="op">.</span><span class="fu">push</span>(v<span class="op">.</span><span class="fu">toUpperCase</span>())<span class="op">;</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span> [])</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;-</span> [<span class="st">&#39;FISH&#39;</span><span class="op">,</span> <span class="st">&#39;BIRD&#39;</span>]</span></code></pre></div>
<p>In both cases, we use an empty array (<code>[]</code>) instead of a
numeric identity as our initial accumulator value.</p>
<!-- No bueno on the ~ character in math mode. -->
<!-- https://neopythonic.blogspot.com/2019/03/why-operators-are-useful.html?m=1 -->
<!-- https://reference.wolfram.com/language/ref/Infix.html.en -->
<p>Some languages differentiate <code>foldl</code> and
<code>foldr</code> to differentiate left- and right-associativity. A
left-associative function would evaluate <span class="math inline">$x
\char"007Ey \char"007Ez$</span> with first <span class="math inline">$x
\char"007Ey$</span> and then <span class="math inline">$(x \char"007Ey)
\char"007Ez$</span>. (In this context, the “<span
class="math inline">$\char"007E$</span>” represents an arbitrary infix
operator and has no specific meaning). A right-associative function
evaluates <span class="math inline">$x \char"007E y \char"007Ez$</span>
as <span class="math inline">$x \char"007E(y \char"007Ez)$</span>.</p>
<h3 data-number="3.4.4" id="sec:array-programming"><span
class="header-section-number">3.4.4</span> Vectorized Functions and
Array Programming</h3>
<p>A <em>vectorized function</em> automatically iterates over array
inputs. This approach is related to <em>array programming</em>.
Automatic vectorization is less common in traditional languages (C,
Java, JavaScript) and more common in scientific programming (R, Matlab,
Julia). Some examples in the R language, which one can reproduce at
https://webr.r-wasm.org/latest/, are:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="sc">+</span> <span class="dv">4</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="sc">+</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">5</span> <span class="dv">7</span> <span class="dv">9</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sqrt</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>))</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span></code></pre></div>
<p>Observe that the pairwise sums in
<code>c(1, 2, 3) + c(4, 5, 6)</code> are independent. No sum depends on
another, and therefore the computing machine can safely perform each
operation in <em>parallel</em>.</p>
<h3 data-number="3.4.5" id="sec:immutability"><span
class="header-section-number">3.4.5</span> Immutability</h3>
<p>Suppose one needs to write a program to sort its input. An obvious
solution is to order the inputs directly by <em>mutating</em> (changing)
the memory in-place. An alternative approach is to copy the input, order
the copy, and return the ordered copy.</p>
<p>The Julia language provides both: Julia’s function mutates its input,
while the <code>sort</code> function returns a sorted copy, leaving the
input unmodified.</p>
<p>The latter approach obviously uses more memory and will likely be
slower. Why would one use this approach? <strong>Safety</strong>. If a
function “owning” a variable passes an <em>immutable</em> (read-only)
reference to another function, then the caller can safely reason about
the value and state of that variable after the callee returns.</p>
<p>Some languages provide stronger concepts of ownership and
immutability than others. The Rust language provides extensive memory
safety features <span class="citation"
data-cites="back-to-the-building-blocks">[7]</span> by requiring the
<code>mut</code> keyword to explicitly mark variables and function
parameters mutable. Traditionally, languages assumed the opposite and
required <code>const</code> or <code>final</code> keywords to establish
invariants (with varying levels of enforcement; Java programmers might
be surprised that the <code>final</code> keyword does not make an object
read-only, but only the <em>reference to</em> an object).</p>
<p>Immutability is particularly useful for <em>thread-safety</em> in
concurrent programming, which we will discuss in section .</p>
<h2 data-number="3.5" id="sec:oop"><span
class="header-section-number">3.5</span> Object-Oriented
Programming</h2>
<p>Object-Oriented Programming (OOP) is a technique for modeling both
the <em>data</em> and associated <em>code</em> for a problem together
<span class="citation" data-cites="10.1145/947955.947961">[8]</span>
<span class="citation" data-cites="10.5555/3271463">[9]</span>. The data
of an object are called <em>fields</em> and the code are called
<em>methods</em>. Many programming languages, notably C++, Python,
JavaScript, and Python, emphasize OOP as the central design.</p>
<p>Object-orientation comes in many varieties <span class="citation"
data-cites="10.5555/3271463">[9]</span>. Many OO languages provide a
method inherit data and code from other objects, often in a hierarchy.
The following Rust program, which one can run at the Rust Playground<a
href="#fn9" class="footnote-ref" id="fnref9"
role="doc-noteref"><sup>9</sup></a>, demonstrates a <code>Point</code>
object. The object is defined as a <code>struct</code> with two fields,
<code>x</code> and <code>y</code>. The implementation for
<code>Point</code> adds two methods, a <em>constructor</em>
(<code>new</code>) and a <em>Manhattan distance</em> function.</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode rust"><code class="sourceCode rust"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point <span class="op">{</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    x<span class="op">:</span> <span class="dt">f32</span><span class="op">,</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    y<span class="op">:</span> <span class="dt">f32</span><span class="op">,</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="kw">impl</span> Point <span class="op">{</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> new(x<span class="op">:</span> <span class="dt">f32</span><span class="op">,</span> y<span class="op">:</span> <span class="dt">f32</span>) <span class="op">-&gt;</span> <span class="dt">Self</span> <span class="op">{</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">Self</span> <span class="op">{</span> x<span class="op">,</span> y <span class="op">}</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">fn</span> manhattan_distance(<span class="op">&amp;</span><span class="kw">self</span><span class="op">,</span> other<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Self</span>) <span class="op">-&gt;</span> <span class="dt">f32</span> <span class="op">{</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">self</span><span class="op">.</span>x <span class="op">-</span> other<span class="op">.</span>x)<span class="op">.</span>abs() <span class="op">+</span> (<span class="kw">self</span><span class="op">.</span>y <span class="op">-</span> other<span class="op">.</span>y)<span class="op">.</span>abs()</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> a <span class="op">=</span> <span class="pp">Point::</span>new(<span class="dv">2.0</span><span class="op">,</span> <span class="dv">4.0</span>)<span class="op">;</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> b <span class="op">=</span> <span class="pp">Point::</span>new(<span class="op">-</span><span class="dv">2.0</span><span class="op">,</span> <span class="dv">3.0</span>)<span class="op">;</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">&quot;Distance: {}&quot;</span><span class="op">,</span> a<span class="op">.</span>manhattan_distance(<span class="op">&amp;</span>b))<span class="op">;</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="3.6" id="sec:json"><span
class="header-section-number">3.6</span> JavaScript Object Notation
(JSON)</h2>
<p>We introduced CSV in section as a method for representing data in a
file. <em>JavaScript Object Notation</em> (JSON) is an alternative
format <span class="citation" data-cites="rfc8259">[10]</span>. JSON’s
syntax is based on JavaScript. Objects in JSON are key-value pairs. The
key of a JSON object must be a double-quoted string. Values can be
nested objects, arrays, numbers, strings, booleans, and
<code>null</code>. The process of taking a data structure from a
program’s memory and saving it as JSON is called <em>serialization</em>.
The inverse, reading an object into memory from a JSON input, is
correspondingly <em>deserialization</em>. Trailing commas are
forbidden.</p>
<p>JSON is much more verbose than CSV, but less verbose than the
Extensible Markup Language (XML), which we will not discuss further.
JSON is generally “human-readable” and can be authored by hand, although
not as easily as CSV. The following code listing shows the table from
section as JSON.</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="st">&quot;Rob&quot;</span><span class="fu">,</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">74019382956651820</span><span class="fu">,</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;z&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">3508759018489489</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="st">&quot;John&quot;</span><span class="fu">,</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">41331428270607506</span><span class="fu">,</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;z&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">2936926427452584</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="st">&quot;David&quot;</span><span class="fu">,</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">37671743737357277</span><span class="fu">,</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;z&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">5676190157838865</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="st">&quot;Frank&quot;</span><span class="fu">,</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;y&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">50270122376380740</span><span class="fu">,</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;z&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">7939268929144455</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="ot">]</span></span></code></pre></div>
<p>JSON documents allow arbitrarily nested and shaped objects, but in
many applications it may be undesirable to deserialize records with
missing values. Consider if one of the below records were missing a
<span class="math inline"><em>y</em></span>-value, or if a <span
class="math inline"><em>z</em></span> value were incorrectly enclosed in
double-quotes, thus forming a string instead of a numeral.</p>
<p>Some JSON parsers, such as Rust’s Serde library, allow the programmer
to specify the structure of the record before parsing. Libraries may
ignore or error when records do not fit the expected shape. One can
expect statically-typed languages to require more specification before
parsing and dynamically-typed languages to allow greater flexibility at
runtime (see section ).</p>
<h2 data-number="3.7" id="sec:parallelism-and-concurrency"><span
class="header-section-number">3.7</span> Parallelism and
Concurrency</h2>
<p><em>Parallelism</em> is the ability for a computing machine to
perform simulataneous operations. Two tasks are <em>concurrent</em> if
their order does not matter. Getting dressed in the morning is an
example (see figure ). When one dons their pants, shirt, coat, hat,
socks, and shoes, one must don socks before shoes, but the order in
which one dons shoes and their hat does not. The hat and shoes are
concurrent but the socks and shoes are <em>sequential</em>. In practice,
many programmers confuse the terms <em>parallel</em> and
<em>concurrent</em> as interchangable.</p>
<p>Concurrent programming can be challenging because one
<em>process</em> or <em>thread</em> (sometimes called <em>task</em> or
<em>routine</em>) might interfere with another, but performance benefits
often justify the additional complexity.</p>
<figure id="fig:get-dressed">
<embed src="get-dressed.dot.pdf" />
<figcaption aria-hidden="true">Order of operation partially matters when
getting dressed. Some clothing items are sequential, but others are
concurrent. The system can be modeled as a directed ayclic graph (see
section ).</figcaption>
</figure>
<p>Some problems can be partitioned into <em>subproblems</em> which can
be solved in parallel. Other problems cannot. Some encryption algorithms
intentionally <em>chain</em> the output from one block into the next.
One cannot calculate block <span class="math inline"><em>n</em></span>
without first calculating block <span
class="math inline"><em>n</em> − 1</span>, and <span
class="math inline"><em>n</em> − 2</span>, and so on. The reduce
operation applies to this algorithm design.</p>
<p>Other problems can be effortlessly partitioned into subproblems and
solved quickly with a <em>divide-and-conquer</em> approach. A trivial
example might be finding the minimum value in a large dataset. One can
partition the dataset, find the minimum value in each partition, and
then find the minimum value among those results. This process can be
repeated.</p>
<p>Go to the Go Playground<a href="#fn10" class="footnote-ref"
id="fnref10" role="doc-noteref"><sup>10</sup></a> to experiment with a
divide-and-conquer <code>minimum</code> function in the Go language.</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode go"><code class="sourceCode go"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span> main</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="st">&quot;fmt&quot;</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> min<span class="op">(</span>x<span class="op">,</span> y <span class="dt">int</span><span class="op">)</span> <span class="dt">int</span> <span class="op">{</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> x <span class="op">&lt;=</span> y <span class="op">{</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> y</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> minimum<span class="op">(</span>x <span class="op">[]</span><span class="dt">int</span><span class="op">)</span> <span class="dt">int</span> <span class="op">{</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">.</span>Println<span class="op">(</span>x<span class="op">)</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    n <span class="op">:=</span> <span class="bu">len</span><span class="op">(</span>x<span class="op">)</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> n <span class="op">{</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x<span class="op">[</span><span class="dv">0</span><span class="op">]</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> min<span class="op">(</span>x<span class="op">[</span><span class="dv">0</span><span class="op">],</span> x<span class="op">[</span><span class="dv">1</span><span class="op">])</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>        middle <span class="op">:=</span> n <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>        lower <span class="op">:=</span> minimum<span class="op">(</span>x<span class="op">[:</span>middle<span class="op">])</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>        upper <span class="op">:=</span> minimum<span class="op">(</span>x<span class="op">[</span>middle<span class="op">:])</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> min<span class="op">(</span>lower<span class="op">,</span> upper<span class="op">)</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">.</span>Println<span class="op">(</span>minimum<span class="op">([]</span><span class="dt">int</span><span class="op">{</span><span class="dv">610</span><span class="op">,</span> <span class="dv">144</span><span class="op">,</span> <span class="dv">34</span><span class="op">,</span> <span class="dv">21</span><span class="op">,</span> <span class="dv">2584</span><span class="op">,</span> <span class="dv">55</span><span class="op">,</span> <span class="dv">55</span><span class="op">}))</span></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Click the “Run” button several times and observe that the output is
completely <em>deterministic</em>. Now return to the Go Playground<a
href="#fn11" class="footnote-ref" id="fnref11"
role="doc-noteref"><sup>11</sup></a> for a slightly modified version of
the same program.</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode go"><code class="sourceCode go"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>        middle <span class="op">:=</span> n <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>        lower <span class="op">:=</span> <span class="bu">make</span><span class="op">(</span><span class="kw">chan</span> <span class="dt">int</span><span class="op">)</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>        upper <span class="op">:=</span> <span class="bu">make</span><span class="op">(</span><span class="kw">chan</span> <span class="dt">int</span><span class="op">)</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">go</span> <span class="kw">func</span><span class="op">()</span> <span class="op">{</span> lower <span class="op">&lt;-</span> minimum<span class="op">(</span>x<span class="op">[:</span>middle<span class="op">])</span> <span class="op">}()</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">go</span> <span class="kw">func</span><span class="op">()</span> <span class="op">{</span> upper <span class="op">&lt;-</span> minimum<span class="op">(</span>x<span class="op">[</span>middle<span class="op">:])</span> <span class="op">}()</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> min<span class="op">(&lt;-</span>lower<span class="op">,</span> <span class="op">&lt;-</span>upper<span class="op">)</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
<p>This version constructs two <em>channels</em> for communication among
concurrent tasks. We use the <code>go</code> keyword to create two
<em>Goroutines</em> (threads in the Go language), which concurrently
solve the <code>minimum</code> function over subproblems. Finally, we
read the results from each channel with <code>&lt;-lower</code> and
<code>&lt;-upper</code> and return. Click the “Run” button several times
and observe that the final result is consistent, but the order of
operations is not.</p>
<p>The computer industry has recently turned to <em>Graphical Processing
Units</em> (GPU) as a fast, inexpensive, and energy-efficient method for
solving highly parallelizable problems. GPUs were originally designed to
draw computer graphics, which extensively use matrix and vector
multiplication. These linear transformations can be performed in
parallel and GPU makers designed their products to perform many simple
calculations in parallel.</p>
<h2 data-number="3.8" id="the-cap-theorem"><span
class="header-section-number">3.8</span> The CAP Theorem</h2>
<p>Brewer’s <em>CAP theorem</em> states that a <em>distributed
system</em> has at most two qualities of <em>consistency</em>,
<em>availability</em>, and <em>partition-tolerance</em> <span
class="citation" data-cites="6133253">[11]</span>. Consider a system of
databases with many replicas. The replicas are consistent if they
contain perfect copies of the database, and they are available only they
are writable. The distributed system is partition-tolerant if all
replicas remain identical, but this is impossible if one allows writes
that cannot propagate into the other partition.</p>
<p>The CAP theorem has many practical implications on data integrity and
should be considered in design methodology. One must anticipate server
and network outages that would create a partition in the distributed in
the system and then choose the desired behavior. Can we accept lost
database writes when we reconcile after a partition is restored? Or
should be accept service outages in order to protect the integrity of
the database during an interruption?</p>
<p>A partial solution is to weaken our definition of each quality.
Perhaps a system reserves certain rows or columns that are only writable
by a specific database, guaranteeing that there will be no conflict if
this database continues to write to those changes during a partition. A
system might establish some form of confidence intervals in certain
data, such as the position of a tracked aircraft with error margins, in
recognition that imperfect information might still be useful. Finally, a
system might use a quorum model (i.e., 3 of 5 available nodes) to
preserve partial availability in the majority partition.</p>
<h2 data-number="3.9" id="discussion-prompts-2"><span
class="header-section-number">3.9</span> Discussion Prompts</h2>
<ol type="1">
<li><p>How does the CAP theorem impact intelligence and fires in
relation to the command and control (C2) warfighting function
(WfF)?</p></li>
<li><p>Where should unclassified data be stored and processed?</p></li>
<li><p>What are some methods to prevent conflicts among concurrent
writes in a shared database?</p></li>
<li><p>What could possibly go wrong when altering database
schema?</p></li>
</ol>
<h2 data-number="3.10" id="practical-exercises-2"><span
class="header-section-number">3.10</span> Practical Exercises</h2>
<ol type="1">
<li><p>Create a custom list in SharePoint that provides multiple views
showing grouped and aggregated values.</p></li>
<li><p>Given a noisy dataset, identify problems in each column that
could influence inclusion and exclusion criteria.</p></li>
<li><p>Define an “embarrassingly parallel” problem and provide both
examples and counterexamples.</p></li>
<li><p>In section we have examples of the filter and map operations
implemented in terms of reduce. Later, in our discussion of immutability
in section , we learned that a sorting function can either mutate the
data in-place or copy the data, leaving the original data unchanged and
returning a new data structure with the desired property. Which design
are the filter and map operations in section ? Rewrite both functions in
the other paradigm.</p></li>
</ol>
<h1 data-number="4" id="measures-of-central-tendency"><span
class="header-section-number">4</span> Measures of Central Tendency</h1>
<h2 data-number="4.1" id="sec:least-squares-method"><span
class="header-section-number">4.1</span> Least squares method</h2>
<p>The canonical definition of the <em>arithmetic mean</em> for a set of
<span class="math inline"><em>n</em></span> numbers <span
class="math inline"><em>x</em></span> is</p>
<p><span class="math display">$$
\bar{x} =
\frac{1}{n} \sum_{i = 1}^{n}{x_i}=
\frac{x_1 + x_2 + x_3 + \cdots + x_4}{n}.
$$</span></p>
<p>Where does this definition come from? Let’s open a new workbook in
Microsoft Excel and find out.</p>
<p>Leave A1 blank. This will become our <em>estimate of the mean</em>.
In fields B1 through B9, enter integers 1 through 9. In fields C1
through C9, enter formulas <code>=B1-$A$1</code>, <code>=B2-$A$1</code>,
<code>=B3-$A$1</code>, and so on (keeping <code>$A$1</code> fixed). In
fields D1 through D9, enter formulas <code>=POWER(C1,2)</code>,
<code>=POWER(C2,2)</code>, and so on. In field E1, enter formula
<code>=SUM(D1:D9)</code>. Finally in field F1, enter the formula
<code>=AVERAGE(B1:B9)</code>.</p>
<p>Now go to Data, What-If Analysis, Goal Seek. In the Goal Seek dialog,
enter <code>Set cell:</code> to <code>E1</code>, <code>To value:</code>
to <code>0</code>, and <code>By changing cell:</code> to
<code>A1</code>. Click OK. The Goal Seek function runs and should
produce a value in A1 near to that in F1. (Goal Seek is not foolproof.
Enter <code>10</code> into A1 to nudge Excel with a hint if you get a
ridiculous answer.)</p>
<p>We have used Goal Seek to minimize the <em>sum of the squared
differences</em> between our values, <span
class="math inline"><em>x</em><sub><em>i</em></sub></span>, and our
estimate of the mean, <span class="math inline"><em>x̄</em></span>. This
<em>least squares method</em> dates back to Carl Friedrich Gauss and
Adrien-Marie Legendre in the 1800s <span class="citation"
data-cites="legendre_1805">[12]</span> <span class="citation"
data-cites="legendre_translation">[13]</span>.</p>
<p>Squaring the errors makes the values positive, which prevents
underestimates from negating overestimates. One might also consider the
<em>absolute value</em> (<code>ABS</code> in Excel) as an alternative,
but there is a second reason for squaring the errors. Squaring the
errors penalizes large errors more than small errors. Accepting small
errors but avoiding large errors is the bias that gives the least
squares method its strength.</p>
<p>Readers familiar with calculus may recognize that one can find the
arithmetic mean, <span class="math inline"><em>μ</em></span>, by finding
the zero in the <em>derivative</em> for the sum of the squared errors
(SSE) function. Let <span class="math inline"><em>X</em></span> be a
sample of size <span class="math inline"><em>n</em></span>.</p>
<p><span
class="math display"><em>X</em> = {<em>x</em><sub>1</sub>, <em>x</em><sub>2</sub>, …, <em>x</em><sub><em>n</em></sub>}.</span></p>
<p>Then the errors of our estimate of the mean, <span
class="math inline"><em>x̄</em></span>, can be found using the error
function</p>
<p><span
class="math display">Err(<em>x̄</em>) = <em>X</em> − <em>x̄</em> = {<em>x</em><sub>1</sub> − <em>x̄</em>, <em>x</em><sub>2</sub> − <em>x̄</em>, …, <em>x</em><sub><em>n</em></sub> − <em>x̄</em>},</span></p>
<p>and the sum of the squared errors is</p>
<p><span
class="math display">SSE(<em>x̄</em>) = (<em>x</em><sub>1</sub> − <em>x̄</em>)<sup>2</sup> + (<em>x</em><sub>2</sub> − <em>x̄</em>)<sup>2</sup> + … + (<em>x</em><sub><em>n</em></sub> − <em>x̄</em>)<sup>2</sup>.</span></p>
<p>To minimize SSE, we take the derivative of SSE in respect to <span
class="math inline"><em>x̄</em></span> and find its zero.</p>
<p><span class="math display">$$
\begin{aligned}
0 &amp;= \frac{\mathrm{d} \text{SSE}}{\mathrm{d} \bar{x}} \\
&amp;=  \frac{\mathrm{d} \left( \left( x_1 - \bar{x} \right)^2 + \left(
x_2 - \bar{x} \right)^2 + \ldots + \left( x_n - \bar{x} \right)^2
\right)}{\mathrm{d} \bar{x}} \\
&amp;= \frac{\mathrm{d} \left( \left( x_1^2 -2 x_1 \bar{x} + \bar{x}^2
\right) + \left( x_2^2 -2 x_2 \bar{x} + \bar{x}^2 \right) + \ldots +
\left( x_n^2 -2 x_n \bar{x} + \bar{x}^2 \right) \right)}{\mathrm{d}
\bar{x}} \\
&amp;= \left(-2x_1 + 2\bar{x} \right) + \left( -2x_2 + 2\bar{x} \right)
+ \ldots + \left( -2x_n + 2\bar{x} \right) \\
&amp;= -2x_1 -2x_2 - \ldots - 2x_n + n \left( 2\bar{x} \right) \\
-2n\bar{x} &amp;= -2x_1 - 2x_2 - \ldots - 2x_n \\
\bar{x} &amp;= \frac{-2x_1 - 2x_2 - \ldots - 2x_n}{-2n} \\
&amp;= \frac{x_1+x_2+\ldots+x_n}{n}
\end{aligned}
$$</span></p>
<p>The arithmetic mean is found at <span class="math inline">$\mu =
\bar{x} = \frac{x_1+x_2+\ldots+x_n}{n}$</span>. <span
class="math inline">▫</span></p>
<p>A less-general demonstration of the above proof is given below in the
Wolfram Language.</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode mathematica"><code class="sourceCode mathematica"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>Wolfram Language <span class="dv">14</span>.<span class="fl">0.0</span> Engine <span class="fu">for</span> Microsoft Windows (<span class="dv">64</span><span class="sc">-</span>bit)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>Copyright <span class="dv">1988-2023</span> Wolfram Research<span class="op">,</span> Inc.</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="fu">In</span><span class="op">[</span><span class="dv">1</span><span class="op">]</span><span class="ex">:=</span> <span class="fu">X</span> <span class="ex">:=</span> <span class="op">{</span>x1<span class="op">,</span> x2<span class="op">,</span> x3<span class="op">}</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">In</span><span class="op">[</span><span class="dv">2</span><span class="op">]</span><span class="ex">:=</span> Err<span class="op">[</span><span class="at">mu_</span><span class="op">]</span> <span class="ex">:=</span> <span class="fu">X</span> <span class="sc">-</span> mu</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="fu">In</span><span class="op">[</span><span class="dv">3</span><span class="op">]</span><span class="ex">:=</span> SSE<span class="op">[</span><span class="at">mu_</span><span class="op">]</span> <span class="ex">:=</span> <span class="fu">Total</span><span class="op">[</span>Err<span class="op">[</span>mu<span class="op">]</span><span class="sc">^</span><span class="dv">2</span><span class="op">]</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="fu">In</span><span class="op">[</span><span class="dv">4</span><span class="op">]</span><span class="ex">:=</span> SSE&#39;<span class="op">[</span>mu<span class="op">]</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="fu">Out</span><span class="op">[</span><span class="dv">4</span><span class="op">]</span><span class="ex">=</span> <span class="sc">-</span><span class="dv">2</span> (<span class="sc">-</span>mu <span class="sc">+</span> x1) <span class="sc">-</span> <span class="dv">2</span> (<span class="sc">-</span>mu <span class="sc">+</span> x2) <span class="sc">-</span> <span class="dv">2</span> (<span class="sc">-</span>mu <span class="sc">+</span> x3)</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="fu">In</span><span class="op">[</span><span class="dv">5</span><span class="op">]</span><span class="ex">:=</span> <span class="fu">Solve</span><span class="op">[</span>SSE&#39;<span class="op">[</span>mu<span class="op">]</span> <span class="ex">==</span> <span class="dv">0</span><span class="op">,</span> mu<span class="op">]</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>                x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="fu">Out</span><span class="op">[</span><span class="dv">5</span><span class="op">]</span><span class="ex">=</span> <span class="op">{{</span>mu <span class="ot">-&gt;</span> <span class="sc">------------</span><span class="op">}}</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>                     <span class="dv">3</span></span></code></pre></div>
<h2 data-number="4.2" id="expected-values"><span
class="header-section-number">4.2</span> Expected values</h2>
<p>The term <em>average</em> can refer to <em>mean</em>,
<em>median</em>, and <em>mode</em>. Mean only applies to interval and
ratio data. Median is simply the middle value among ordinal, interval,
and ratio data. Mode is the “commonest” (most frequent) value among
nominal, ordinal, interval, and ratio data.</p>
<table>
<thead>
<tr class="header">
<th>Average</th>
<th>Levels of measurement</th>
<th>Symbols</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mean</td>
<td>Interval, ratio</td>
<td><span class="math inline"><em>μ</em></span>, <span
class="math inline"><em>x̄</em></span></td>
</tr>
<tr class="even">
<td>Median</td>
<td>Ordinal, interval, ratio</td>
<td>(None)</td>
</tr>
<tr class="odd">
<td>Mode</td>
<td>Nominal, ordinal, interval, ratio</td>
<td>(None)</td>
</tr>
</tbody>
</table>
<p>All three of these <em>measures of central tendency</em> enable us to
find the <em>expected value</em> in a data set, <span
class="math inline"><em>E</em>(<em>x</em>)</span>. Population means are
assigned the symbol <span class="math inline"><em>μ</em></span>.
Estimates of the population mean (the sample mean) usually use the name
of the sample with a bar, such as <span
class="math inline"><em>x̄</em></span>.</p>
<p>Median and mode can be useful even when analyzing interval and ratio
data. Consider a classroom of 10 students who are 6 years old and 1
teacher who is 50 years old. If one selects a random person in the room,
what is the expected value for their age? In this case, the modal value
(6) is likely a better estimate than the mean value (10).</p>
<h2 data-number="4.3" id="sec:moments"><span
class="header-section-number">4.3</span> The Four Moments</h2>
<p>The <em>four moments</em> describe the <em>distribution</em> of
values in a data set. The first moment is the mean. The second moment is
<em>variance</em>, the expected squared difference of values to the
mean. The third moment is <em>skewness</em>, the expected cubed
difference of values to the mean. The fourth moment is
<em>kurtosis</em>, the expected difference of values to the mean raised
to the fourth power.</p>
<table>
<thead>
<tr class="header">
<th>Moment</th>
<th>Name</th>
<th>Definition</th>
<th>Symbol</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline"><em>μ</em><sub>1</sub></span></td>
<td>Mean</td>
<td><span class="math inline"><em>E</em>(<em>x</em>)</span></td>
<td><span class="math inline"><em>μ</em></span></td>
</tr>
<tr class="even">
<td><span class="math inline"><em>μ</em><sub>2</sub></span></td>
<td>Variance</td>
<td><span
class="math inline"><em>E</em>(<em>x</em> − <em>μ</em>)<sup>2</sup></span></td>
<td><span class="math inline"><em>σ</em><sup>2</sup></span></td>
</tr>
<tr class="odd">
<td><span class="math inline"><em>μ</em><sub>3</sub></span></td>
<td>Skewness</td>
<td><span
class="math inline"><em>E</em>(<em>x</em> − <em>μ</em>)<sup>3</sup></span></td>
<td><span class="math inline"><em>β</em><sub>1</sub></span></td>
</tr>
<tr class="even">
<td><span class="math inline"><em>μ</em><sub>4</sub></span></td>
<td>Kurtosis</td>
<td><span
class="math inline"><em>E</em>(<em>x</em> − <em>μ</em>)<sup>4</sup></span></td>
<td><span class="math inline"><em>β</em><sub>2</sub></span></td>
</tr>
</tbody>
</table>
<p>Variance (<span class="math inline"><em>σ</em><sup>2</sup></span>) is
calculated from the sum of the squared differences in the random
variable (<span class="math inline"><em>x</em></span>) and the mean
(<span class="math inline"><em>μ</em></span>).</p>
<p><span class="math display">$$
\begin{aligned}
\sigma^2 &amp;= E(x-\mu)^2 \\
&amp;= E(x^2 - 2x\mu + \mu^2) \\
&amp;= E(x^2) - 2E(x)\mu + \mu^2 \\
&amp;= E(x^2) - 2(\mu)\mu + \mu^2 \\
&amp;= E(x^2) -2\mu^2 + \mu^2 \\
&amp;= E(x^2) - \mu^2.
\end{aligned}
$$</span></p>
<p>To calculate the sample variance (<span
class="math inline"><em>s</em><sup>2</sup></span>) in practice, we use
the formula</p>
<p><span class="math display">$$
s^2 = \frac{1}{n-1} \sum_{i=1}^{n} {\left( x_i - \bar{x} \right)^2}.
$$</span></p>
<p>where <span class="math inline"><em>n</em></span> is the number of
elements in <span class="math inline"><em>x</em></span>. Observe that
the calculation for this statistic is similar to the least squares
method in section . <span
class="math inline"><em>s</em><sup>2</sup></span> is the average squared
distance from the mean within the data set.</p>
<p>The <em>standard deviation</em> is the square root of variance,</p>
<p><span class="math display">$$
s = \sqrt{s^2}.
$$</span></p>
<p>An <em>outlier</em> is a value that is very different from other
values in the data set. In the set <span
class="math inline"><em>x</em> = {15, 75, 79, 10, 7, 54, 4600, 91, 45, 86}</span>,
one can immediately observe that the value <span
class="math inline">4600</span> is substantially different from all of
the other values. Outliers can be defined in terms of the mean and
standard deviation. Outliers are any values greater than <span
class="math inline"><em>x̄</em> + 2<em>s</em></span> or less than <span
class="math inline"><em>x̄</em> − 2<em>s</em></span>. We can use the
<code>mean</code> and <code>sd</code> functions with <code>subset</code>
in the R language at https://webr.r-wasm.org/latest/ to confirm that
<span class="math inline">4600</span> is an outlier.</p>
<pre><code>&gt; x = c(15, 75, 79, 10, 7, 54, 4600, 91, 45, 86)
&gt; subset(x, x &lt;= mean(x) - sd(x) | x &gt;= mean(x) + sd(x))
[1] 4600</code></pre>
<p>We can use skewness (<span
class="math inline"><em>μ</em><sub>3</sub> = <em>β</em><sub>1</sub></span>)
to detect whether the data is imbalanced (skewed) above or below the
mean. If skewness is negative then the left tail is longer, if skewness
is positive then the right tail is longer, and if skewness is zero then
the distribution is equally balanced over the mean. Excel defines its
<code>SKEW</code> function<a href="#fn12" class="footnote-ref"
id="fnref12" role="doc-noteref"><sup>12</sup></a> as</p>
<p><span class="math display">$$
\mu_3 = \frac{n}{(n-1)(n-2)} \sum{\left( \frac{x - \bar{x}}{s}
\right)^3}.
$$</span></p>
<p>We can use kurtosis (<span
class="math inline"><em>μ</em><sub>4</sub> = <em>β</em><sub>2</sub></span>)
to detect if a data set contains outliers. The kurtosis of the normal
distribution is 3. Karl Pearson defines the <em>degree of kurtosis</em>
as <span
class="math inline"><em>η</em> = <em>β</em><sub>2</sub> − 3</span> <span
class="citation" data-cites="10.1093/biomet/4.1-2.169">[14, p.
181]</span>. Other texts call this <em>excess kurtosis</em>. Excel’s
<code>KURT</code> function returns excess kurtosis. If <code>KURT</code>
returns 0, then the distribution may fit a normal distribution and may
contain no outliers. Excel defines its <code>KURT</code> function<a
href="#fn13" class="footnote-ref" id="fnref13"
role="doc-noteref"><sup>13</sup></a> as</p>
<p><span class="math display">$$
\mu_4 =
\frac{n(n+1)}{(n-1)(n-2)(n-3)}
\sum{\left( \frac{x-\bar{x}}{s} \right)^4}
-
\frac{3(n-1)^2}{(n-2)(n-3)}.
$$</span></p>
<h2 data-number="4.4" id="the-normal-distribution"><span
class="header-section-number">4.4</span> The Normal Distribution</h2>
<p>The <em>Normal Distribution</em>, also known as the <em>Gaussian
Distribution</em>, is a well-known predictor of the probability of
continuous outcomes. Parameterized by mean, <span
class="math inline"><em>μ</em></span>, and standard deviation, <span
class="math inline"><em>σ</em></span>, the <em>probability density
function</em> for the normal distribution is</p>
<p><span class="math display">$$
P(x) = \frac{1}{\sigma \sqrt{2 \pi}} e^{-(x-\mu)^2/(2 \sigma^2)}.
$$</span></p>
<p><span class="math inline"><em>P</em>(<em>x</em>)</span> predicts the
probability that an observation will have value <span
class="math inline"><em>x</em></span>. The <em>standard normal</em> has
parameters <span class="math inline"><em>μ</em> = 0</span> and <span
class="math inline"><em>σ</em> = 1</span>, with skewness <span
class="math inline"><em>μ</em><sub>3</sub> = 0</span> and kurtosis <span
class="math inline"><em>μ</em><sub>4</sub> = 3</span>.</p>
<p><span class="math inline"><em>P</em>(<em>x</em>)</span> forms a “bell
curve” (see figure ) that one might encounter in a histogram of data,
but there are other distributions of data which also form a bell-shaped
curve. It is <strong>not</strong> generally safe to immediately assume
that data fits a normal distribution when a histogram reflects a bell
curve.</p>
<!-- TODO: provide symbolic integrals and explain why you need to calculate
these as ranges, not P(0) (as the integral from x=0 to x=0 is 0).

This is also an opportunity to explain the 68/95/99% things.
-->
<p>The R language provides functions <code>dnorm</code>,
<code>pnorm</code>, <code>qnorm</code>, and <code>rnorm</code>.
<code>dnorm</code> is the same probability function shown above as <span
class="math inline"><em>P</em>(<em>x</em>)</span>. <code>pnorm</code>
gives the cumulative probability between some range of <span
class="math inline"><em>x</em></span> values, which is simply a definite
integral.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">integrate</span>(dnorm, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fl">0.6826895</span> with absolute error <span class="sc">&lt;</span> <span class="fl">7.6e-15</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">integrate</span>(dnorm, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="fl">0.9544997</span> with absolute error <span class="sc">&lt;</span> <span class="fl">1.8e-11</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">integrate</span>(dnorm, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fl">0.9973002</span> with absolute error <span class="sc">&lt;</span> <span class="fl">9.3e-07</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">integrate</span>(dnorm, <span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">0</span>)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="fl">0.5</span> with absolute error <span class="sc">&lt;</span> <span class="fl">4.7e-05</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">pnorm</span>(<span class="dv">0</span>)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.5</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">pnorm</span>(<span class="dv">1</span>) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.6826895</span></span></code></pre></div>
<p>The <code>qnorm</code> function is the inverse of cumulative
probability, allowing us to find an exact point <span
class="math inline"><em>x</em></span> in the distribution for a
probability value <span
class="math inline"><em>p</em> = <em>P</em>(<em>x</em>)</span>.</p>
<p>The <code>rnorm</code> function generates random numbers which fit a
normal distribution. Some computing environments provide only
uniformly-distributed random numbers. In Excel, one can use the
<code>qnorm</code> equivalent (<code>NORM.INV</code>) in a clever way to
create a normal distribution with</p>
<pre class="excel"><code>=NORM.INV(RAND(),0,1)</code></pre>
<h2 data-number="4.5" id="exponential-moving-averages"><span
class="header-section-number">4.5</span> Exponential moving
averages</h2>
<p>An <em>exponential moving average</em> (EMA) is a weighted average
that creates a bias favoring recent observations. EMAs are used in the
financial sector as an implicit means of modeling stock prices with
time.</p>
<p>One might also think of EMA as a method to estimate
<em>instantaneous</em> values in presence of errors. An example
application might be a smartwatch using GPS to estimate a runner’s pace.
As the runner’s wrist travels back and forth, the instantaneous velocity
of the watch will not match that of the runner. An EMA might be useful
to smooth this noise.</p>
<p>EMA is defined <em>recursively</em> and parameterized with a
weighting multiplier <span
class="math inline">0 &lt; <em>p</em> &lt; 1</span>.</p>
<p><span class="math display">$$
\text{EMA} \left( x, i \right) =
\begin{cases}
p x_i + (1 - p) \text{EMA} \left( x, i - 1 \right), &amp; \text{if $i
&gt; 1$}. \\
x_1, &amp; \text{otherwise}.
\end{cases}
$$</span></p>
<p>EMA can be easily implemented in terms of the <code>reduce</code>
operation, as shown below in JavaScript.</p>
<pre><code>&gt;&gt; x = [7, 8, 9, 10, 9, 8, 7, 9, 11, 13, 15, 17]
&gt;&gt; p = .25
&gt;&gt; x.reduce((ema,v) =&gt; p * v + (1-p) * ema, x[0])
&lt;- 12.661770105361938</code></pre>
<p>The <em>base case</em> is at <span
class="math inline"><em>x</em><sub>1</sub></span> in mathematical
notation but <code>x[0]</code> in JavaScript. This is a matter of
convention; the first element of a list is position 1 in math, but 0 in
many programming languages.</p>
<h2 data-number="4.6" id="strong-and-weak-links"><span
class="header-section-number">4.6</span> Strong and Weak Links</h2>
<p>In a <em>weak-link problem</em>, the system is harmed by the presence
of any defect. The term itself is named for a proverbial chain, which is
only as strong as the weakest link. Many safety-, quality-, and
proces-related problems require one to eliminate weak links.</p>
<p>On the other hand, we sometimes encounter <em>strong-link
problems</em>, where overall success of a system depends on the very
<em>best</em> individuals in the population. Olympic athletes are a good
example of a strong-link problem: it does not matter that a country has
thousands of candidate athletes who did not qualify; what matters is
that the national team selects the very best to compete on the world
stage.</p>
<p>Venture capital is another example of a strong-link problem. An
investor takes risks on many different companies in hopes that one
“unicorn” startup will yield a large return, offsetting losses from
those unsuccessful startups.</p>
<p>Both weak-link and strong-link problems can be modeled in terms of
variance (see section ).</p>
<h2 data-number="4.7" id="discussion-prompts-3"><span
class="header-section-number">4.7</span> Discussion prompts</h2>
<ol type="1">
<li><p>Is four a lot?</p></li>
<li><p>First battalion has an average ACFT score of 482 while second
battalion has an average ACFT score of 491. Which is better?</p></li>
<li><p>What do we do when statistics show us something that contradicts
our values? For example, suppose we discover that Soldiers of a specific
demographic have much lower promotion rates than their peers.</p></li>
<li><p>Is it more important for an organization to think about variance
or the 99th percentile?</p></li>
<li><p>Given a sample set <span
class="math inline"><em>x</em> = {5}</span>, what is the estimate of the
mean (<span class="math inline"><em>x̄</em></span>), and what is the
sample variance (<span
class="math inline"><em>s</em><sub><em>x</em></sub></span>)? That is,
what is the expected value (<span
class="math inline"><em>E</em>(<em>x</em>)</span>) of a random sample
taken from <span class="math inline"><em>x</em></span>, and what is the
average difference of variables to the expected value? Use software to
verify your answer. In the R language, this would be
<code>mean(c(5))</code> and <code>sd(c(5))</code>.</p></li>
<li><p>A customer-service organization uses <em>average handling
time</em> (AHT), the expected number of minutes required to complete an
interaction, to improve service quality. What are some benefits or risks
of this approach? See https://xkcd.com/2899/.</p></li>
<li><p>Does the Army’s standards-based approach hinder our ability to
solve strong-link problems requiring unpredictable solutions? How could
an ideal institution maintain minimum standards while enabling outliers
to flourish?</p></li>
</ol>
<h2 data-number="4.8" id="practical-exercises-3"><span
class="header-section-number">4.8</span> Practical exercises</h2>
<ol type="1">
<li><p>Calculate the influence that outliers have on different-sized
datasets that contain outliers.</p></li>
<li><p>Calculate the exponential moving average in a small
dataset.</p></li>
<li><p>Given a dataset and experimental result, identify problems caused
by analyzing categorical data represented in a numeric form.</p></li>
<li><p>Given multiple datasets with identical mean and standard
deviation, use kurtosis to identify the dataset with more
outliers.</p></li>
<li><p>Design or implement an algorithm to incrementally calculate
standard deviation, where the estimate of the sample standard deviation
is updated with each additional value.</p></li>
<li><p>Think backwards and try to guess what would be the zeroth moment,
<span class="math inline"><em>μ</em><sub>0</sub></span>.</p></li>
</ol>
<h1 data-number="5" id="dimensionality"><span
class="header-section-number">5</span> Dimensionality</h1>
<h2 data-number="5.1" id="combinatorics"><span
class="header-section-number">5.1</span> Combinatorics</h2>
<p>Suppose one has four children, <span
class="math inline">{<em>a</em>, <em>b</em>, <em>c</em>, <em>d</em>}</span>,
and a motorcycle. The motorcycle can carry only one passenger, so there
are four possible <em>combinations</em> of children that you can
transport by motorcycle:</p>
<p><span
class="math display">4 = |{{<em>a</em>}, {<em>b</em>}, {<em>c</em>}, {<em>d</em>}}|.</span></p>
<p><span class="math inline">|<em>S</em>| = <em>n</em></span> gives the
<em>cardinality</em> (the size) <span
class="math inline"><em>n</em></span> of set <span
class="math inline"><em>S</em></span>.</p>
<p>The family adds a sidecar to the motorcycle and can now transport two
children at once. There are now six ways that one can <em>choose</em>
two elements from a four-element set:</p>
<p><span
class="math display">6 = |{<em>a</em>, <em>b</em>}, {<em>a</em>, <em>c</em>}, {<em>a</em>, <em>d</em>}, {<em>b</em>, <em>c</em>}, {<em>b</em>, <em>d</em>}, {<em>c</em>, <em>d</em>}|.</span></p>
<p>Recall from section that sets are unordered; <span
class="math inline">{<em>a</em>, <em>b</em>}</span> is equal to <span
class="math inline">{<em>b</em>, <em>a</em>}</span>.</p>
<p>Two common notations for the number of possible subsets we can choose
are <span class="math inline">$\binom{n}{r}$</span> and <span
class="math inline"><em>n</em><em>C</em><em>r</em></span>. The former is
favored in higher mathematics, the latter in secondary schools. <span
class="math inline">$\binom{n}{r}$</span> is read “<span
class="math inline"><em>n</em></span> choose <span
class="math inline"><em>r</em></span>” and <span
class="math inline"><em>n</em><em>C</em><em>r</em></span> is read “<span
class="math inline"><em>n</em></span> combinations taken <span
class="math inline"><em>r</em></span> at a time.”</p>
<p>The family purchases a small car that can transport three
passengers:</p>
<p><span class="math display">$$
\binom{4}{3} = 4 =
\left|
    \left\{ a, b, c \right\},
    \left\{ a, b, d \right\},
    \left\{ a, c, d \right\},
    \left\{ b, c, d \right\}
\right|.
$$</span></p>
<p>The family purchases a larger car that can carry four passengers:</p>
<p><span class="math display">$$
\binom{4}{4} = 1 = \left| \left\{ a, b, c, d \right\} \right|.
$$</span></p>
<p>Finally, the family crashes the large car and is left with a bicycle.
The bicycle has no capacity to carry passengers, and therefore</p>
<p><span class="math display">$$
\binom{4}{0}  = 1 = \left| \left\{ \right\} \right| =  \left| \emptyset
\right|.
$$</span></p>
<p>There is only one way to take an empty set from another set.</p>
<p>We will now construct a generalized function to count the number of
subsets for any combination of <span
class="math inline"><em>r</em></span> elements taken from a set of size
<span class="math inline"><em>n</em></span>. Initially, consider the
first element in the set. If we choose this element, then we still to
select <span class="math inline"><em>r</em> − 1</span> elements from the
remaining <span class="math inline"><em>n</em> − 1</span> elements. If
we do not choose this element, then we still must choose <span
class="math inline"><em>r</em></span> elements from the remaining <span
class="math inline"><em>n</em> − 1</span> elements. This gives us
<em>Pascal’s formula</em>, a <em>recursive</em> definition for counting
combinations.</p>
<p><span class="math display">$$
\binom{n}{r} = \binom{n-1}{r-1} + \binom{n-1}{r-1}
$$</span></p>
<p>We need at least one <em>base case</em> to prevent this function from
entering an infinite loop. These identities should be intuitive from the
earlier exercise, though the proof for the final case is left as an
exercise to the reader.</p>
<p><span class="math display">$$
\binom{n}{r} =
\begin{cases}
1, &amp; \text{if $n = r$}. \\
1, &amp; \text{if $r = 0$}. \\
n, &amp; \text{if $r = 1$}. \\
0, &amp; \text{if $n &lt; r$}. \\
\end{cases}
$$</span></p>
<p>Implemented in the R language (https://webr.r-wasm.org/latest/),</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>pascal <span class="ot">&lt;-</span> <span class="cf">function</span>(n,r) {</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (n <span class="sc">&lt;</span> r) {</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (n <span class="sc">==</span> r) {</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (r <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (r <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(n)</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">pascal</span>(n<span class="dv">-1</span>,r) <span class="sc">+</span> <span class="fu">pascal</span>(n<span class="dv">-1</span>,r<span class="dv">-1</span>))</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>we can reproduce the results of our passengers example. The
<code>sapply</code> function in R is comparable to the <code>map</code>
operation (see section ).</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">sapply</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">4</span>, <span class="cf">function</span>(r) <span class="fu">pascal</span>(<span class="dv">4</span>, r))</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">4</span> <span class="dv">6</span> <span class="dv">4</span> <span class="dv">1</span></span></code></pre></div>
<h2 data-number="5.2" id="permutations"><span
class="header-section-number">5.2</span> Permutations</h2>
<p>An alternative definition for the combination formula requires
<em>permutations</em> – ordered subsets. From set <span
class="math inline"><em>S</em> = {<em>a</em>, <em>b</em>, <em>c</em>, <em>d</em>}</span>
there are twelve two-element permutations, represented here as
<em>tuples</em>: <span
class="math inline">(<em>a</em>, <em>b</em>)</span>, <span
class="math inline">(<em>b</em>, <em>a</em>)</span>, <span
class="math inline">(<em>a</em>, <em>c</em>)</span>, <span
class="math inline">(<em>c</em>, <em>a</em>)</span>, <span
class="math inline">(<em>a</em>, <em>d</em>)</span>, <span
class="math inline">(<em>d</em>, <em>a</em>)</span>, <span
class="math inline">(<em>b</em>, <em>c</em>)</span>, <span
class="math inline">(<em>c</em>, <em>b</em>)</span>, <span
class="math inline">(<em>b</em>, <em>d</em>)</span>, <span
class="math inline">(<em>d</em>, <em>b</em>)</span>, <span
class="math inline">(<em>c</em>, <em>d</em>)</span>, and <span
class="math inline">(<em>d</em>, <em>c</em>)</span>.</p>
<p>When counting the size of the permutation set of length <span
class="math inline"><em>r</em></span> chosen from a set of size <span
class="math inline"><em>n</em></span>, we begin wtih <span
class="math inline"><em>n</em></span> possible elements for the first
tuple element, then <span class="math inline"><em>n</em> − 1</span>
possible elements for the second tuple element, and so on until all
<span class="math inline"><em>r</em></span> tuple elements are
filled.</p>
<p><span class="math display">$$
nPr = n \times (n-1) \times (n-2) \times \ldots \times (n-r+1) =
\frac{n!}{(n-r)!}
$$</span></p>
<p>The <em>permutation formula</em> is usually defined using the
<em>factorial</em> function, denoted by the “<span
class="math inline">!</span>” postfix operator.</p>
<p><span class="math display">$$
n! = n \times (n-1) \times (n-2) \times \ldots \times 2 \times 1 =
\prod_{i=1}^{n}{i}
$$</span></p>
<p><span class="math inline">0! = 1</span> by definition. The intuition
for this is the bicycle: there was one way to choose an empty set from a
set, and likewise there is one empty tuple of zero ordered elements
taken from a set.</p>
<p>The number of <span
class="math inline"><em>r</em> = <em>n</em></span>-length permutations
of a set of size <span class="math inline"><em>n</em></span> is
simply</p>
<p><span class="math display">$$
nPn = \frac{n!}{(n-n)!} = \frac{n!}{0!} = \frac{n!}{1} = n!
$$</span></p>
<p>Now we can define the combination formula in terms of the permutation
formula. We count the number of permutations but de-duplicate this
count, as combinations are unordered. The number of duplicated entries
is <span
class="math inline"><em>r</em><em>P</em><em>r</em> = <em>r</em>!</span>.</p>
<p><span class="math display">$$
nCr = \binom{n}{r} = \frac{nPr}{r!} =
\frac{\frac{n!}{\left(n-r\right)!}}{r!} = \frac{n!}{r!\left(n-r\right)!}
$$</span></p>
<h2 data-number="5.3" id="n-choose-2"><span
class="header-section-number">5.3</span> <span
class="math inline"><em>n</em></span> choose 2</h2>
<p>The case <span class="math inline">$\binom{n}{2}$</span> occurs
frequently and deserves special discussion. The first few terms are (in
Interactive Python, or IPython):</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>In [<span class="dv">1</span>]: <span class="im">import</span> math</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>In [<span class="dv">2</span>]: [math.comb(n, <span class="dv">2</span>) <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>,<span class="dv">12</span>)]</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>Out[<span class="dv">2</span>]: [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">28</span>, <span class="dv">36</span>, <span class="dv">45</span>, <span class="dv">55</span>]</span></code></pre></div>
<p>It is not possible to choose two elements from a set of only one,
there is only one way to choose two from two, three ways to choose two
from three (<span
class="math inline">{<em>a</em>, <em>b</em>}, {<em>a</em>, <em>c</em>}, {<em>b</em>, <em>c</em>} ⊂ {<em>a</em>, <em>b</em>, <em>c</em>}</span>),
six ways to choose from four (<span
class="math inline">{<em>a</em>, <em>b</em>}, {<em>a</em>, <em>c</em>}, {<em>a</em>, <em>d</em>}, {<em>b</em>, <em>c</em>}, {<em>b</em>, <em>d</em>}, {<em>c</em>, <em>d</em>} ⊂ {<em>a</em>, <em>b</em>, <em>c</em>, <em>d</em>}</span>),
and so on. The resulting sequence of integers are called the
<em>triangular numbers</em>.</p>
<p>Intuitively, the difference in <span
class="math inline">$\binom{k+1}{2}$</span> and <span
class="math inline">$\binom{k}{2}$</span> is <span
class="math inline"><em>k</em></span>: if we add a <span
class="math inline">(<em>k</em> + 1)</span>th element to a set, then we
can pair this new element with each of the <span
class="math inline"><em>k</em></span> existing elements. The generalized
form is</p>
<p><span class="math display">$$
\binom{n}{2} = 1 + 2 + 3 + \ldots + (n-1) = \frac{n(n-1)}{2}.
$$</span></p>
<p>We can demonstrate this identity numerically</p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>In [<span class="dv">3</span>]: [<span class="bu">sum</span>(k <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(n)) <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>,<span class="dv">12</span>)]</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>Out[<span class="dv">3</span>]: [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">28</span>, <span class="dv">36</span>, <span class="dv">45</span>, <span class="dv">55</span>]</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>In [<span class="dv">4</span>]: [n<span class="op">*</span>(n<span class="op">-</span><span class="dv">1</span>)<span class="op">//</span><span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>,<span class="dv">12</span>)]</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>Out[<span class="dv">4</span>]: [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">28</span>, <span class="dv">36</span>, <span class="dv">45</span>, <span class="dv">55</span>]</span></code></pre></div>
<p>and prove with <em>induction</em>. The basis of induction is the case
<span class="math inline"><em>n</em> = 2</span>, where</p>
<p><span class="math display">$$
\binom{2}{2} = 1 = \frac{n(n-1)}{2} = \frac{2(2-1)}{2} = \frac{2(1)}{2}
= 1.
$$</span></p>
<p>The inductive step is that if <span class="math inline">$\binom{k}{2}
= \frac{k(k-1)}{2}$</span>, then <span
class="math inline">$\binom{k+1}{2} = \frac{(k+1)((k+1)-1)}{2}$</span>.
Remembering that <span class="math inline">$\binom{k+1}{2} -
\binom{k}{2} = k$</span>, we find</p>
<p><span class="math display">$$
\begin{aligned}
\frac{(k+1)((k+1)-1)}{2} - \frac{k(k-1)}{2} &amp;= \frac{(k+1)k}{2} -
\frac{k(k-1)}{2} \\
&amp;= \frac{k((k+1) - (k-1))}{2} \\
&amp;= \frac{2k}{2} \\
&amp;= k. \square
\end{aligned}
$$</span></p>
<p>An alternative proof is to use algebra from our definition <span
class="math inline">$\binom{n}{r}=\frac{n!}{r!(n-r)!}$</span> as
follows:</p>
<p><span class="math display">$$
\binom{n}{2} = \frac{n!}{2!(n-2)!} =
\frac{(n)(n-1)(n-2)\ldots(3)(2)(1)}{(2)(n-2)(n-3)\ldots(3)(2)(1)} =
\frac{(n)(n-1)}{2}.
$$</span></p>
<p>Yet another proof is to observe the series <span
class="math inline">1 + 2 + 3 + … + (<em>n</em> − 1) + <em>n</em></span>,
cleverly reverse the series and add it to itself to form <span
class="math inline">(<em>n</em> + 1) + ((<em>n</em> − 1) + 2) + … + (<em>n</em> + 1)</span>,
observe that there are <span class="math inline"><em>n</em></span> of
these identical terms and the original sum is half that of the second.
Though elegant, this proof technique may not as portable to other
problems as computational, inductive, and algebraic methods.</p>
<h2 data-number="5.4" id="the-curse-of-combinatorics"><span
class="header-section-number">5.4</span> The curse of combinatorics</h2>
<p>The “curse of combinatorics” is simply that the number of possible
combinations can become very large. Consider a bicycle factory that must
manufacture a part in four materials (steel, aluminum, carbon fiber, and
titanium), three sizes (small, medium, and large), five styles (road,
mountain, touring, utility, and economy), and for five markets (North
America, European Union, Latin America, East Asia, and Middle East)
which each have different compliance requirements. There are <span
class="math inline">4 × 3 × 5 × 5 = 300</span> distinct variations of
this part. Suppose a distributor wants to warehouse 50 of each part, but
expects the factory to wait until the part is sold before receiving
payment. Should the factory give the the distributor <span
class="math inline">300 × 50 = 15000</span> of this part?</p>
<p>Now suppose an investor wants a rigorous test of the bicycle
factory’s products. The investor demands that 30 copies of each part be
tested in various ways. <span class="math inline">300 × 30 = 9000</span>
total parts being committed to this study might be unrealistic.</p>
<h2 data-number="5.5" id="subsets-and-venn-diagrams"><span
class="header-section-number">5.5</span> Subsets and Venn diagrams</h2>
<p>A set intersection (<span class="math inline">∩</span>) of two sets
is the set of all elements present in both sets.</p>
<p><span
class="math display"><em>S</em> ∩ <em>T</em> = {<em>x</em>|<em>x</em> ∈ <em>S</em> ∧ <em>x</em> ∈ <em>T</em>}.</span></p>
<p>The familiar Venn diagram is commonly used to plot set intersections,
but this plot is limited and is frequently misused. Traditionally, the
square frame of the plot represents the universal set, <span
class="math inline"><em>U</em></span>. Each circle of the Venn diagram
shows a subset of <span class="math inline"><em>U</em></span> along some
binary attribute. In figure , we see a degenerate Venn diagram of a
single dimension. Values of <span class="math inline"><em>U</em></span>
are simply in <span class="math inline"><em>S</em></span> or not in
<span class="math inline"><em>S</em></span>.</p>
<p>The Venn diagram has its more familiar structure with two and three
dimensions, as shown in figures and .</p>
<p>Venn diagrams are not possible in four or more dimensions – at least,
not with circles drawn on a two-dimensional plot. The number of subsets
of <span class="math inline"><em>U</em></span> is two for one dimension
(a value is either in <span class="math inline"><em>S</em></span> or not
in <span class="math inline"><em>S</em></span>), four for two dimensions
(a value is only in <span class="math inline"><em>S</em></span>, only in
<span class="math inline"><em>T</em></span>, in both, or in neither),
eight for three dimensions (<span class="math inline"><em>R</em></span>,
<span class="math inline"><em>S</em></span>, <span
class="math inline"><em>T</em></span>, <span
class="math inline"><em>S</em> ∩ <em>T</em></span>, <span
class="math inline"><em>S</em> ∩ <em>R</em></span>, <span
class="math inline"><em>S</em> ∩ <em>T</em></span>, <span
class="math inline"><em>T</em> ∩ <em>R</em></span>, <span
class="math inline"><em>R</em> ∩ <em>S</em> ∩ <em>T</em></span>, or
none), and so on.</p>
<p>Another challenge one must avoid if using Venn diagrams is that the
areas in the plot may not correspond to the relative sizes of the
subsets. For example, imagine a Venn diagram showing the sets of bicycle
riders and persons with only one foot. The cyclists significantly
outnumber the unipeds and their intersection is likely quite small,
therefore two circles of equal size may present a misleading
graphic.</p>
<h2 data-number="5.6" id="sample-spaces"><span
class="header-section-number">5.6</span> Sample spaces</h2>
<p>Imagine one wanted to conduct a large study on exercise and health
outcomes. Basic demographic variables include age, gender, location,
height, weight, and race. Exercise variables in this study include
weekly minutes performing cardiovascular training, minutes of resistance
training, and minutes of flexibility training. Other exercise variables
in this study include metrics of speed, endurance, strength,
flexibility, blood pressure, resting heart rate, body composition, bone
density, and sleep duration.</p>
<p>Suppose we discretize (see section ) each continuous variable into
discrete categories. For example, we might change the age variable from
its numeric values to categories 1-10, 11-20, 21-30, and so on. We
separate height into very short, short, average, tall, and very tall. We
categorize minutes of weekly training into 0-20, 20-60, 60-120, and
120+. Some variables are divided into very low, low, medium, high, and
very high. The process continues until all variables can be represented
in discrete (sometimes ordered) categories instead of continuous numeric
values.</p>
<table>
<thead>
<tr class="header">
<th>Variable</th>
<th>Categories</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Age</td>
<td>10</td>
</tr>
<tr class="even">
<td>Gender</td>
<td>2</td>
</tr>
<tr class="odd">
<td>Location</td>
<td>5</td>
</tr>
<tr class="even">
<td>Height</td>
<td>5</td>
</tr>
<tr class="odd">
<td>Weight</td>
<td>10</td>
</tr>
<tr class="even">
<td>Cardio Minutes</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Weights Minutes</td>
<td>4</td>
</tr>
<tr class="even">
<td>Stretch Minutes</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Speed</td>
<td>10</td>
</tr>
<tr class="even">
<td>Strength</td>
<td>10</td>
</tr>
<tr class="odd">
<td>Endurance</td>
<td>10</td>
</tr>
<tr class="even">
<td>Flexbility</td>
<td>10</td>
</tr>
<tr class="odd">
<td>Blood Pressure</td>
<td>5</td>
</tr>
<tr class="even">
<td>Heart Rate</td>
<td>5</td>
</tr>
<tr class="odd">
<td>Composition</td>
<td>7</td>
</tr>
<tr class="even">
<td>Bone Density</td>
<td>5</td>
</tr>
<tr class="odd">
<td>Sleep Duration</td>
<td>9</td>
</tr>
</tbody>
</table>
<p>One might expect that, having discretized each variable, it would
become easy to draw non-obvious conclusions from a reasonable sample
size. Unfortunately, there are <span
class="math inline">10 × 2 × 5 × 5 × 10 × 4 × 4 × 4 × 4 = 320000</span>
possible combinations in the first eight variables alone. Is it unusual
for a middle-aged, very tall, very heavy, zero-exercise male living in
North America to have average fitness metrics with poor body
composition? We would ideally like to sample many such persons, but even
in a large study we likely would not have many individuals meeting
exactly these characteristics.</p>
<p><em>Data mining</em> is the search for non-obvious conclusions by
analyzing data. Data mining efforts are especially characterized by the
lack of <em>first principles</em>, meaning the researcher may not have
any advance hypothesis about the relationships between variables.</p>
<p>Suppose our fitness research showed that heavy bodyweight predicts
poor speed. This is quite obvious and likely not useful. Suppose our
fitness research showed that minutes of stretching predicted not only
flexibility but also strength and body composition. Such as result is
less expected, and might (just as a hypothetical example) lead to a
discovery that yoga develops muscle better than its reputation.</p>
<p>Data mining efforts in <span
class="math inline"><em>n</em></span>-dimensional space are basically
always complicated by this “curse of combinatorics.” When we repeatedly
multiply many variables together, we find that the space of possible
combinations becomes so large that even very large samples cover only
tiny portions. Our example health study has a total of <span
class="math inline">10 × 2 × 5 × 5 × 10 × 4 × 4 × 4 × 10 × 10 × 10 × 10 × 5 × 5 × 7 × 5 × 9 = 25200000000000</span>
possible states in its <em>sample space</em>.</p>
<h2 data-number="5.7" id="paradoxes"><span
class="header-section-number">5.7</span> Paradoxes</h2>
<p>A <em>paradox</em> is a seemingly contradictory statement. Large
combinatorial sample spaces sometimes create unexpected situations that
may seem paradoxical.</p>
<p>The <em>birthday paradox</em> is well-known in computer security.
Suppose there are 23 students in a class. What is the probability that
any two students share a birthday? One might guess that the probability
would be <span class="math inline">23/365</span> until we notice that
<strong>any</strong> two students might share a birthday. Student <span
class="math inline"><em>s</em><sub>1</sub></span> and <span
class="math inline"><em>s</em><sub>2</sub></span> might have the same
birthday, <span class="math inline"><em>s</em><sub>1</sub></span> and
<span class="math inline"><em>s</em><sub>3</sub></span>, <span
class="math inline"><em>s</em><sub>2</sub></span> and <span
class="math inline"><em>s</em><sub>3</sub></span>, and so on.</p>
<p>It is actually easier to calculate the probability that
<strong>no</strong> students share a birthday, which we will denote with
<span class="math inline"><em>q</em></span>. For the first student
(<span class="math inline"><em>s</em><sub>1</sub></span>), there is a
(degenerate) <span class="math inline">365/365</span> probability that
<span class="math inline"><em>s</em><sub>1</sub></span> does not have
share a birthday with those before because we have not considered any
other students. For <span
class="math inline"><em>s</em><sub>2</sub></span>, there is a <span
class="math inline">364/365</span> probability that <span
class="math inline"><em>s</em><sub>2</sub></span> has a distinct
birthday from <span class="math inline"><em>s</em><sub>1</sub></span>.
For <span class="math inline"><em>s</em><sub>3</sub></span>, there is a
<span class="math inline">363/365</span> probability that <span
class="math inline"><em>s</em><sub>3</sub></span> has a distinct
birthday from both <span
class="math inline"><em>s</em><sub>1</sub></span> and <span
class="math inline"><em>s</em><sub>2</sub></span>. This continues for
the remaining students in the class. We multiply these probabilities
together to get</p>
<p><span class="math display">$$
\begin{aligned}
q_{10} &amp;= \frac{365}{365} \times \frac{364}{365} \times
\frac{363}{365} \times \ldots \times \frac{343}{365} \\
&amp;= \prod_{i=1}^{23}{\frac{365 - i + 1}{365}} \\
&amp;= 0.492703.
\end{aligned}
$$</span></p>
<p>We now take <span
class="math inline"><em>p</em> = 1 − <em>q</em></span> to find the
probability that the event <em>does</em> occur and find the likelihood
that two of our ten students is</p>
<p><span
class="math display"><em>p</em> = 1 − <em>q</em> = 1 − 0.492703 = 0.507297.</span></p>
<p>This means that there is more than 50% chance that any two students
will share a birthday in a class of 23, a surprising and unintuitive
result.</p>
<h2 data-number="5.8" id="the-binomial-distribution"><span
class="header-section-number">5.8</span> The Binomial Distribution</h2>
<p>We now continue to another example which will demonstrate a
limitation of statistical reasoning. Suppose this class of students has
a large toy box with 1000 toys. Each time a child removes a toy, the
teacher records the toy and the result of a fair coin flip. For
example,</p>
<table>
<thead>
<tr class="header">
<th>Toy</th>
<th>Coin</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Shovel</td>
<td>Heads</td>
</tr>
<tr class="even">
<td>Racecar</td>
<td>Tails</td>
</tr>
<tr class="odd">
<td>Robot</td>
<td>Heads</td>
</tr>
<tr class="even">
<td>Teacup</td>
<td>Tails</td>
</tr>
</tbody>
</table>
<p>After a very long time, each of the 1000 toys has been taken from the
toy box 10 times. The teacher looks over the data and is surprised to
find that coin toss has always resulted in tails for each of the ten
times that a child has taken the shark toy.</p>
<p>It should be obvious that the shark has nothing to do with the coin
flip, yet unlikely events may entice one to assume causal relationships.
Consider the sample space of the coin flips. The first flip, <span
class="math inline"><em>c</em><sub>1</sub></span>, could have been heads
or tails. The second flip, <span
class="math inline"><em>c</em><sub>2</sub></span>, could also have been
heads or tails. So far, the sample space contains four possible events,
which we will denote HH, HT, TH, and TT. On the third flip, the sample
space again doubles in size: HHH, HHT, HTH, HTT, THH, THT, TTH, and TTT.
Each additional flip will continue to double the sample space. By the
tenth flip, the sample space contains <span
class="math inline">2<sup>10</sup> = 1024 ≈ 1000</span> possible events,
of which HHHHHHHHHH is just one.</p>
<p>Upon reflection, it should be hardly surprising that one of one
thousand toys would randomly associate with a one-in-one-thousand event.
To find the exact chance, we need the <em>binomial distribution</em>.
The probability of event <span class="math inline"><em>x</em></span>
occuring in a series of <span class="math inline"><em>n</em></span>
independent trials of probability <span
class="math inline"><em>p</em></span> is</p>
<p><span class="math display">$$
p(x) = \binom{n}{x} p^x (1-p)^{n-x}.
$$</span></p>
<p>In Excel, we use the <code>BINOM.DIST</code> function. In R,
<code>dbinom</code> in the <em>probability density function</em> (PDF)
for the binomial distribution. To find the probability that our <span
class="math inline">1/1024</span> event occurs <em>exactly once</em> in
<span class="math inline">1000</span> trials, we find</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dbinom</span>(<span class="dv">1</span>, <span class="dv">1000</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">1024</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.3679607</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">choose</span>(<span class="dv">1000</span>,<span class="dv">1</span>) <span class="sc">*</span> (<span class="dv">1</span><span class="sc">/</span><span class="dv">1024</span>)<span class="sc">^</span><span class="dv">1</span> <span class="sc">*</span> (<span class="dv">1-1</span><span class="sc">/</span><span class="dv">1024</span>)<span class="sc">^</span>(<span class="dv">1000-1</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.3679607</span></span></code></pre></div>
<p>As an exercise, reproduce this result in Excel using the formula</p>
<pre><code>=BINOM.DIST(1,1000,1/1024,FALSE)</code></pre>
<p>We have several options to find the probability that <em>none</em> of
our <span class="math inline">1000</span> toys associate with ten heads.
First, we can use the same <code>dbinom</code> and
<code>BINOM.DIST</code> functions with <span
class="math inline"><em>x</em> = 0</span>. Second, we can take the sum
of probabilities from the range <code>x = 1:1000</code> (the probability
of <span class="math inline"><em>x</em> = 1</span>, probability that
<span class="math inline"><em>x</em> = 2</span>, and so on) and then
subtract this from one.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dbinom</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">1024</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.3764238</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">1</span><span class="sc">-</span><span class="fu">sum</span>(<span class="fu">dbinom</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>, <span class="dv">1000</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">1024</span>))</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.3764238</span></span></code></pre></div>
<p>Finally, statistics software often provides a <em>cumulative
distribution function</em> (CDF) implementation as a shortcut for these
summations. In R, this is <code>pbinom</code>, but in Excel this is
provided in <code>BINOM.DIST</code> with the final argument set to
<code>TRUE</code>.</p>
<p>The toy shark example is intended to demonstrate how <em>spurious
correlations</em> may occur in large sets of data. The <em>Texas
sharpshooter fallacy</em> can describe this effect. A sharpshooter fires
his pistol at random into a barn wall, then draws circles around
clusters of bullet holes and claims to be an expert.</p>
<h2 data-number="5.9" id="sec:pareto"><span
class="header-section-number">5.9</span> Pareto frontier</h2>
<p>A <em>Pareto frontier</em> (also known as a <em>Pareto front</em>) is
a method for visualizing the interaction of two <em>orthogonal</em>
(statistically independent) features of a data set.</p>
<p>5/3/1 is a barbell strength training program <span class="citation"
data-cites="Wendler2011-ar">[15]</span>. This program emphasizes <em>rep
records</em>, where the lifter is to lift a submaximal mass as many
times as possible. This program design adds a second dimension to
strength. We say that lifter who progresses from lifting for 6
repetitions to 9 repetitions in six months has become stronger, even if
the athlete has not directly tested their one-repetition maximum.</p>
<figure id="fig:pareto">
<embed src="pareto.pdf" />
<figcaption aria-hidden="true">The points along the red line form the
Pareto front for this data set.</figcaption>
</figure>
<p>Figure provides an example of an athlete’s rep records over a
two-year period in the barbell squat. The frontier, <span
class="math inline"><em>P</em>(<em>X</em>)</span>, is visible at the
top-right of the scatter plot. If, for example, this lifter were to
achieve a squat for 8 repetitions, the lift would <em>dominate</em> the
previous records at <span class="math inline">(120, 5)</span> and <span
class="math inline">(116, 8)</span>, moving the frontier farther from
the origin.</p>
<p>A Pareto front only makes sense when the two variables cannot be
combined into one. Consider, as an absurd example, a running race where
the minutes and seconds of finishing times are recorded in separate
columns.</p>
<table>
<thead>
<tr class="header">
<th>Athlete</th>
<th>Minutes</th>
<th>Seconds</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>18</td>
<td>34</td>
</tr>
<tr class="even">
<td>2</td>
<td>19</td>
<td>24</td>
</tr>
<tr class="odd">
<td>3</td>
<td>20</td>
<td>01</td>
</tr>
</tbody>
</table>
<p>There is no need to compare the three runner’s run times in two
dimensions: the minutes and seconds are trivially compressible into a
single value with no loss of information.</p>
<p>In the case of the rep records shown in figure , there is a general
negative correlation between mass and repetitions. This relationship can
be estimated with Brzycki’s formula (among others) <span
class="citation" data-cites="brzycki1993strength">[16]</span>, which
states</p>
<p><span class="math display">$$
\text{Predicted 1-RM} = \frac{\text{Weight Lifted}}{1.0278 - 0.0289x},
$$</span></p>
<p>where <span class="math inline"><em>x</em></span> is the number of
repetitions performed. Strong correlations in the columns of a data set
present an opportunity to compress the data, thus reducing
dimensionality, and search for non-obvious insights where one lacks
first principles.</p>
<h2 data-number="5.10" id="sec:cor"><span
class="header-section-number">5.10</span> Covariance and
Correlation</h2>
<p>In section , we defined variance as the average squared difference of
a random variable <span class="math inline"><em>x</em></span> to its
expected value, <span class="math inline"><em>x̄</em></span>.
<em>Covariance</em> <span class="citation"
data-cites="10.1093/biomet/30.1-2.81">[17]</span> <span class="citation"
data-cites="10.1093/biomet/33.3.239">[18]</span> is a similar statistic
for two variables: covariance is computed from the average product of
the differences in <span class="math inline"><em>x</em></span> and <span
class="math inline"><em>y</em></span> to their respective expected
values, <span class="math inline"><em>x̄</em></span> and <span
class="math inline"><em>ȳ</em></span>.</p>
<p><span class="math display">$$
\text{cov}\left( x, y \right) =
\sum_{i=1}^{n}{
  \frac
  {\left( x_i - \bar{x} \right) \left( y_i - \bar{y} \right)}
  {n-1}
}
$$</span></p>
<p>If we first <em>scale</em> vectors <span
class="math inline"><em>x</em></span> and <span
class="math inline"><em>y</em></span> such that their mean is zero and
variance is one, then the covariance becomes <em>correlation</em>, a
simple statistic to interpret.</p>
<p><span class="math display">$$
\begin{aligned}
\text{scale} \left( x \right) &amp;= \frac{x - \bar{x}}{s_x} \\
\text{cor} \left( x, y \right) &amp;= \text{cov} \left(
  \text{scale} \left( x \right),
  \text{scale} \left( y \right)
  \right)
\end{aligned}
$$</span></p>
<p>The following Rust program implements both covariance and correlation
statistics. One can execute this program at the Rust Playground<a
href="#fn14" class="footnote-ref" id="fnref14"
role="doc-noteref"><sup>14</sup></a> and reproduce the result in R at
with <code>cov(c(5,7,3,6,8), c(65,80,50,70,90))</code> and
<code>cor(c(5,7,3,6,8), c(65,80,50,70,90))</code>.</p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode rust"><code class="sourceCode rust"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> x <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">5</span><span class="op">.,</span> <span class="dv">7</span><span class="op">.,</span> <span class="dv">3</span><span class="op">.,</span> <span class="dv">6</span><span class="op">.,</span> <span class="dv">8</span><span class="op">.</span>]<span class="op">;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> y <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">65</span><span class="op">.,</span> <span class="dv">80</span><span class="op">.,</span> <span class="dv">50</span><span class="op">.,</span> <span class="dv">70</span><span class="op">.,</span> <span class="dv">90</span><span class="op">.</span>]<span class="op">;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">&quot;Covariance: {}&quot;</span><span class="op">,</span> cov(<span class="op">&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y)<span class="op">.</span>unwrap())<span class="op">;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">&quot;Correlation: {}&quot;</span><span class="op">,</span> cor(<span class="op">&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y)<span class="op">.</span>unwrap())<span class="op">;</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> cov(x<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;,</span> y<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">,</span> ()<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> x<span class="op">.</span>len() <span class="op">!=</span> y<span class="op">.</span>len() <span class="op">{</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="cn">Err</span>(())</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> xm <span class="op">=</span> mean(x)<span class="op">;</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> ym <span class="op">=</span> mean(y)<span class="op">;</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> n <span class="op">=</span> x<span class="op">.</span>len() <span class="kw">as</span> <span class="dt">f64</span><span class="op">;</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> covariance <span class="op">=</span> x<span class="op">.</span>iter()<span class="op">.</span>zip(y<span class="op">.</span>iter())<span class="op">.</span>map(<span class="op">|</span>(a<span class="op">,</span>b)<span class="op">|</span> <span class="op">{</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>        (a <span class="op">-</span> xm) <span class="op">*</span> (b <span class="op">-</span> ym) <span class="op">/</span> (n <span class="op">-</span> <span class="dv">1.0</span>)</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span>)<span class="op">.</span><span class="pp">sum::</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;</span>()<span class="op">;</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    <span class="cn">Ok</span>(covariance)</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> cor(x<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;,</span> y<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">,</span> ()<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>    cov(<span class="op">&amp;</span>scale(x)<span class="op">,</span> <span class="op">&amp;</span>scale(y))</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> scale(v<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> mu <span class="op">=</span> mean(v)<span class="op">;</span></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sigma <span class="op">=</span> sd(v)<span class="op">;</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>    v<span class="op">.</span>iter()<span class="op">.</span>map(<span class="op">|</span>x<span class="op">|</span> <span class="op">{</span></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>        (x <span class="op">-</span> mu) <span class="op">/</span> sigma</span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span>)<span class="op">.</span>collect()</span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> mean(v<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">f64</span> <span class="op">{</span></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a>    v<span class="op">.</span>iter()<span class="op">.</span><span class="pp">sum::</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;</span>() <span class="op">/</span> (v<span class="op">.</span>len() <span class="kw">as</span> <span class="dt">f64</span>)</span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> sd(v<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">f64</span> <span class="op">{</span></span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> mu <span class="op">=</span> mean(v)<span class="op">;</span></span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> variance <span class="op">=</span> v<span class="op">.</span>iter()<span class="op">.</span>map(<span class="op">|</span>x<span class="op">|</span> <span class="op">{</span></span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a>        (x <span class="op">-</span> mu)<span class="op">.</span>powi(<span class="dv">2</span>)</span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span>)<span class="op">;</span></span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> n <span class="op">=</span> v<span class="op">.</span>len() <span class="kw">as</span> <span class="dt">f64</span><span class="op">;</span></span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>    (variance<span class="op">.</span><span class="pp">sum::</span><span class="op">&lt;</span><span class="dt">f64</span><span class="op">&gt;</span>() <span class="op">/</span> (n <span class="op">-</span> <span class="dv">1.0</span>))<span class="op">.</span>sqrt()</span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>To be more precise, the scaled covariance produces a statistic of
<strong>linear</strong> correlation. The correlation of the vector</p>
<p><span
class="math display"><em>x</em> = (−5, −4, −3, −2, −1, 0, 1, 2, 3, 4, 5)</span></p>
<p>and its element-wise squares</p>
<p><span
class="math display"><em>y</em> = <em>x</em> ⊙ <em>x</em> = (25, 16, 9, 4, 1, 0, 1, 4, 9, 16, 25)</span></p>
<p>is <strong>zero</strong>.</p>
<p>Again using the R language at ,</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> x <span class="ot">=</span> <span class="sc">-</span><span class="dv">5</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">=</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">cor</span>(x,y)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">0</span></span></code></pre></div>
<p>There is a very recent development in the field of statistics with a
new coëfficient of correlation <span class="citation"
data-cites="10.1080/01621459.2020.1758115">[19]</span>. This new
statistic, known as <span class="math inline"><em>ξ</em></span> and
pronounced “xi” or “ksaai”, seeks to correlate <span
class="math inline"><em>Y</em></span> as some arbitrary function of
<span class="math inline"><em>X</em></span> and produces meaningful
metrics on non-linear data. For our range <span
class="math inline">[−5, 5]</span> and its squares, the correlation
coëfficient is .</p>
<p>The algorithm to compute <span
class="math inline"><em>ξ</em>(<em>X</em>, <em>Y</em>)</span> first
sorts <span class="math inline"><em>Y</em></span> by <span
class="math inline"><em>X</em></span>, then the <em>ranks</em>, <span
class="math inline"><em>r</em></span>, of the resulting order of <span
class="math inline"><em>Y</em></span>. If <em>order</em> is a list of
positions specifying the order of another list, then rank is the order
of the order. More formally, <span
class="math inline"><em>r</em><sub><em>i</em></sub></span> is the number
of <span class="math inline"><em>j</em></span> such that <span
class="math inline"><em>Y</em><sub>(<em>j</em>)</sub> ≤ <em>Y</em><sub>(<em>i</em>)</sub></span>.
The statistic is</p>
<p><span class="math display">$$
\xi_n \left( X , Y \right) =
1 - \frac{
  3 \sum_{i=1}^{n-1}{\left| r_{i+1} - r_{i} \right|}
}{n^2 -1}
$$</span></p>
<p>when there are no ties. If the data set does contain duplicates, then
we also use <span class="math inline"><em>l</em></span> values, where
<span class="math inline"><em>l</em><sub><em>i</em></sub></span> is the
number <span class="math inline"><em>j</em></span> such that <span
class="math inline"><em>Y</em><sub>(<em>j</em>)</sub> ≤ <em>Y</em><sub>(<em>i</em>)</sub></span>.</p>
<p><span class="math display">$$
\xi_n \left( X , Y \right) =
1 - \frac{
  n \sum_{i=1}^{n-1}{\left| r_{i+1} - r_{i} \right|}
}{
  2 \sum_{i=1}^{n}{l_i \left( n - l_i \right)}
}
$$</span></p>
<p>A Rust implementation of this new <span
class="math inline"><em>ξ</em></span> statistic is given below and at
the Rust Playground<a href="#fn15" class="footnote-ref" id="fnref15"
role="doc-noteref"><sup>15</sup></a>.</p>
<div class="sourceCode" id="cb49"><pre
class="sourceCode rust"><code class="sourceCode rust"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> xicor(x<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f32</span><span class="op">&gt;,</span> y<span class="op">:</span> <span class="op">&amp;</span><span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f32</span><span class="op">&gt;</span>) <span class="op">-&gt;</span> <span class="dt">f32</span> <span class="op">{</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">// This implementation does not handle duplicate values.</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> n <span class="op">=</span> x<span class="op">.</span>len()<span class="op">;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 1) Sort y by x.</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> i<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span>_<span class="op">&gt;</span> <span class="op">=</span> (<span class="dv">0</span><span class="op">..</span>n)<span class="op">.</span>collect()<span class="op">;</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    i<span class="op">.</span>sort_by(<span class="op">|&amp;</span>a<span class="op">,</span> <span class="op">&amp;</span>b<span class="op">|</span> x[a]<span class="op">.</span>total_cmp(<span class="op">&amp;</span>x[b]))<span class="op">;</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> y<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">f32</span><span class="op">&gt;</span> <span class="op">=</span> i<span class="op">.</span>iter()<span class="op">.</span>map(<span class="op">|&amp;</span>i<span class="op">|</span> y[i])<span class="op">.</span>collect()<span class="op">;</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 2) Order y by sorting 1:n by y.</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> order<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span>_<span class="op">&gt;</span> <span class="op">=</span> (<span class="dv">0</span><span class="op">..</span>n)<span class="op">.</span>collect()<span class="op">;</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>    order<span class="op">.</span>sort_by(<span class="op">|&amp;</span>a<span class="op">,</span> <span class="op">&amp;</span>b<span class="op">|</span> y[a]<span class="op">.</span>total_cmp(<span class="op">&amp;</span>y[b]))<span class="op">;</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 3) Rank y by sorting 1:n by order.</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> r<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span>_<span class="op">&gt;</span> <span class="op">=</span> (<span class="dv">0</span><span class="op">..</span>n)<span class="op">.</span>collect()<span class="op">;</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>    r<span class="op">.</span>sort_by(<span class="op">|&amp;</span>a<span class="op">,</span> <span class="op">&amp;</span>b<span class="op">|</span> order[a]<span class="op">.</span>cmp(<span class="op">&amp;</span>order[b]))<span class="op">;</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Sum of absolute distances in successive y ranks.</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> r_consec_abs_dist <span class="op">=</span> <span class="dv">0.0</span><span class="op">;</span></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="dv">1</span><span class="op">..</span>n <span class="op">{</span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>        r_consec_abs_dist <span class="op">+=</span> (r[i] <span class="kw">as</span> <span class="dt">f32</span> <span class="op">-</span> r[i<span class="op">-</span><span class="dv">1</span>] <span class="kw">as</span> <span class="dt">f32</span>)<span class="op">.</span>abs()<span class="op">;</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1.0</span> <span class="op">-</span> <span class="dv">3.0</span> <span class="op">*</span> r_consec_abs_dist <span class="op">/</span> (n<span class="op">.</span>pow(<span class="dv">2</span>) <span class="kw">as</span> <span class="dt">f32</span> <span class="op">-</span> <span class="dv">1.0</span>)</span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="5.11" id="principal-component-analysis-pca"><span
class="header-section-number">5.11</span> Principal Component Analysis
(PCA)</h2>
<p><em>Principal Component Analysis</em> (PCA) is a powerful technique
for discovering linear relationships among columns of data and
compressing these columns into fewer dimensions <span class="citation"
data-cites="10.1080/14786440109462720">[20]</span> <span
class="citation" data-cites="hotelling1933analysis">[21]</span>.</p>
<p>PCA begins by finding all pairwise correlations among the data set’s
scaled columns.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">head</span>(iris[,<span class="sc">-</span><span class="dv">5</span>])</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="fl">5.1</span>         <span class="fl">3.5</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">4.9</span>         <span class="fl">3.0</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>          <span class="fl">4.7</span>         <span class="fl">3.2</span>          <span class="fl">1.3</span>         <span class="fl">0.2</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>          <span class="fl">4.6</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>          <span class="fl">5.0</span>         <span class="fl">3.6</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>          <span class="fl">5.4</span>         <span class="fl">3.9</span>          <span class="fl">1.7</span>         <span class="fl">0.4</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">cor</span>(iris[,<span class="sc">-</span><span class="dv">5</span>])</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>             Sepal.Length Sepal.Width Petal.Length Petal.Width</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>Sepal.Length    <span class="fl">1.0000000</span>  <span class="sc">-</span><span class="fl">0.1175698</span>    <span class="fl">0.8717538</span>   <span class="fl">0.8179411</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>Sepal.Width    <span class="sc">-</span><span class="fl">0.1175698</span>   <span class="fl">1.0000000</span>   <span class="sc">-</span><span class="fl">0.4284401</span>  <span class="sc">-</span><span class="fl">0.3661259</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>Petal.Length    <span class="fl">0.8717538</span>  <span class="sc">-</span><span class="fl">0.4284401</span>    <span class="fl">1.0000000</span>   <span class="fl">0.9628654</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>Petal.Width     <span class="fl">0.8179411</span>  <span class="sc">-</span><span class="fl">0.3661259</span>    <span class="fl">0.9628654</span>   <span class="fl">1.0000000</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> c <span class="ot">=</span> .Last.value</span></code></pre></div>
<p>We then use a technique from linear algebra called <em>Singular Value
Decomposition</em> (SVD), which extracts a diagonal matrix <span
class="math inline"><em>D</em></span> from <span
class="math inline"><em>A</em></span> where <span
class="math inline"><em>U</em>′<em>A</em><em>V</em> = <em>D</em></span>,
<span class="math inline"><em>U</em>′<em>U</em> = <em>I</em></span>, and
<span class="math inline"><em>V</em>′<em>V</em> = <em>I</em></span>. We
will not discuss the details of this procedure, but will instead leave
it to library software.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">svd</span>(c)<span class="sc">$</span>u</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>           [,<span class="dv">1</span>]        [,<span class="dv">2</span>]       [,<span class="dv">3</span>]       [,<span class="dv">4</span>]</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="sc">-</span><span class="fl">0.5210659</span> <span class="sc">-</span><span class="fl">0.37741762</span>  <span class="fl">0.7195664</span>  <span class="fl">0.2612863</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]  <span class="fl">0.2693474</span> <span class="sc">-</span><span class="fl">0.92329566</span> <span class="sc">-</span><span class="fl">0.2443818</span> <span class="sc">-</span><span class="fl">0.1235096</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="sc">-</span><span class="fl">0.5804131</span> <span class="sc">-</span><span class="fl">0.02449161</span> <span class="sc">-</span><span class="fl">0.1421264</span> <span class="sc">-</span><span class="fl">0.8014492</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="sc">-</span><span class="fl">0.5648565</span> <span class="sc">-</span><span class="fl">0.06694199</span> <span class="sc">-</span><span class="fl">0.6342727</span>  <span class="fl">0.5235971</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> u <span class="ot">=</span> .Last.value</span></code></pre></div>
<p>We multiply our scaled data set by <span
class="math inline"><em>U</em></span> to compute the principal
components, <span
class="math inline">PC = <em>X</em><em>U</em></span>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">head</span>(<span class="fu">scale</span>(iris[,<span class="sc">-</span><span class="dv">5</span>]) <span class="sc">%*%</span> u)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>         [,<span class="dv">1</span>]       [,<span class="dv">2</span>]        [,<span class="dv">3</span>]         [,<span class="dv">4</span>]</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="fl">2.257141</span> <span class="sc">-</span><span class="fl">0.4784238</span>  <span class="fl">0.12727962</span>  <span class="fl">0.024087508</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="fl">2.074013</span>  <span class="fl">0.6718827</span>  <span class="fl">0.23382552</span>  <span class="fl">0.102662845</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="fl">2.356335</span>  <span class="fl">0.3407664</span> <span class="sc">-</span><span class="fl">0.04405390</span>  <span class="fl">0.028282305</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="fl">2.291707</span>  <span class="fl">0.5953999</span> <span class="sc">-</span><span class="fl">0.09098530</span> <span class="sc">-</span><span class="fl">0.065735340</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,] <span class="fl">2.381863</span> <span class="sc">-</span><span class="fl">0.6446757</span> <span class="sc">-</span><span class="fl">0.01568565</span> <span class="sc">-</span><span class="fl">0.035802870</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>,] <span class="fl">2.068701</span> <span class="sc">-</span><span class="fl">1.4842053</span> <span class="sc">-</span><span class="fl">0.02687825</span>  <span class="fl">0.006586116</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> pc <span class="ot">=</span> <span class="fu">scale</span>(iris[,<span class="sc">-</span><span class="dv">5</span>]) <span class="sc">%*%</span> u</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">head</span>(pc)</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>         [,<span class="dv">1</span>]       [,<span class="dv">2</span>]        [,<span class="dv">3</span>]         [,<span class="dv">4</span>]</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="fl">2.257141</span> <span class="sc">-</span><span class="fl">0.4784238</span>  <span class="fl">0.12727962</span>  <span class="fl">0.024087508</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="fl">2.074013</span>  <span class="fl">0.6718827</span>  <span class="fl">0.23382552</span>  <span class="fl">0.102662845</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="fl">2.356335</span>  <span class="fl">0.3407664</span> <span class="sc">-</span><span class="fl">0.04405390</span>  <span class="fl">0.028282305</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="fl">2.291707</span>  <span class="fl">0.5953999</span> <span class="sc">-</span><span class="fl">0.09098530</span> <span class="sc">-</span><span class="fl">0.065735340</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,] <span class="fl">2.381863</span> <span class="sc">-</span><span class="fl">0.6446757</span> <span class="sc">-</span><span class="fl">0.01568565</span> <span class="sc">-</span><span class="fl">0.035802870</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>,] <span class="fl">2.068701</span> <span class="sc">-</span><span class="fl">1.4842053</span> <span class="sc">-</span><span class="fl">0.02687825</span>  <span class="fl">0.006586116</span></span></code></pre></div>
<p>The resulting matrix can be used for small but accurate linear
models. PCA can also reveal unexpected correlations among the data. One
can think of the columns of <span class="math inline"><em>U</em></span>
as new dimensions that might have been hidden among the correlated
features of the original data set. The covariance among the principal
components is effectively zero.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(tidyverse)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">cov</span>(pc) <span class="sc">%&gt;%</span> zapsmall</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>         [,<span class="dv">1</span>]      [,<span class="dv">2</span>]      [,<span class="dv">3</span>]      [,<span class="dv">4</span>]</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="fl">2.918498</span> <span class="fl">0.0000000</span> <span class="fl">0.0000000</span> <span class="fl">0.0000000</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="fl">0.000000</span> <span class="fl">0.9140305</span> <span class="fl">0.0000000</span> <span class="fl">0.0000000</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="fl">0.000000</span> <span class="fl">0.0000000</span> <span class="fl">0.1467569</span> <span class="fl">0.0000000</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="fl">0.000000</span> <span class="fl">0.0000000</span> <span class="fl">0.0000000</span> <span class="fl">0.0207148</span></span></code></pre></div>
<p>The columns are ordered from greatest to least variance. This means
that a model might not need all four columns to form accurate
predictions, as the later columns account for very little of the
variance in the data set.</p>
<!--
I'm not really satisfied with this passage. A PCA plot would have helped.
A more compelling application would have helped more. The reader probably
won't be able to see why PCA is so interesting or useful.

**TODO**: PCA plot.
-->
<!-- 

https://crates.io/crates/statrs
https://crates.io/crates/nalgebra

-->
<h2 data-number="5.12" id="discussion-prompts-4"><span
class="header-section-number">5.12</span> Discussion prompts</h2>
<ol type="1">
<li>https://www.tylervigen.com/spurious-correlations curates an
entertaining collection of spurious correlations. However, not all
spurious correlations might be so obvious. What are some principals we
should apply to either trust or be skeptical of statistical
evidence?</li>
<li>Conduct a classroom competition of “Catch the cheaters!” at
https://primerlearning.org. Discuss the winning and losing strategies,
then watch https://www.youtube.com/watch?v=XTcP4oo4JI4.</li>
<li>Read the interactive article
https://www.mayerowitz.io/blog/mario-meets-pareto <span class="citation"
data-cites="mayerowitzMarioMeets">[22]</span>. Discuss the compromises
inherent in a multi-objective optimization problem.</li>
<li>Controversial topics may involve several dimensions. Advocates for
one position may claim on one basis in dimension <span
class="math inline"><em>x</em></span>, where the opposition’s
counterclaim is in dimension <span
class="math inline"><em>y</em></span>. Discuss a contemporary impasse
with orthogonal or irreconcilable aspects.</li>
</ol>
<h2 data-number="5.13" id="practical-exericses"><span
class="header-section-number">5.13</span> Practical exericses</h2>
<ol type="1">
<li>Use nested <code>sapply</code> statements to improve
<code>sapply(0:4, function(r) pascal(4, r))</code>. Iterate
<code>pascal(n, r)</code> over <span
class="math inline">0 ≤ <em>n</em> ≤ 10</span> and <span
class="math inline">0 ≤ <em>r</em> ≤ <em>n</em></span>, generating the
first 11 lines of Pascal’s Triangle. Compare the result to
<code>sapply(0:10, function(n) choose(n, 0:n))</code>. Why does the
built-in <code>choose</code> function accept ranges (<code>0:n</code>)
when our own <code>pascal</code> function does not?</li>
<li>About one in twenty white males have some form of color blindness.
About 70.2% of the U.S. military report themselves as white, and about
82.8% as male. Let <span
class="math inline"><em>P</em>(<em>C</em>|<em>W</em> ∩ <em>M</em>) = 0.05</span>,
<span class="math inline"><em>P</em>(<em>W</em>) = 0.702</span>, and
<span class="math inline"><em>P</em>(<em>M</em>) = 0.828</span>. If a
Command gives a briefing to twelve random generals each year, what is
the probability that one or more of those generals is color blind?
(Assume, incorrectly but for the sake of simple calculation, that women
and non-whites are never color blind.) Assume further that <span
class="math inline"><em>W</em></span> and <span
class="math inline"><em>M</em></span> are independent and that <span
class="math inline"><em>P</em>(<em>W</em> ∩ <em>M</em>) = <em>P</em>(<em>W</em>)<em>P</em>(<em>M</em>) = 0.581256</span>,
therefore <span class="math inline">$P(C|W \cap M) = \frac{P(C \cap W
\cap M)}{P(W \cap M)}$</span> and consequently <span
class="math inline"><em>P</em>(<em>C</em> ∩ <em>W</em> ∩ <em>M</em>) = <em>P</em>(<em>C</em>|<em>W</em> ∩ <em>M</em>)<em>P</em>(<em>W</em> ∩ <em>M</em>) = (0.05)(0.581256) = 0.0290628</span>.
Use this value for <span class="math inline"><em>p</em></span> in your
<code>dbinom</code> calculation. Based upon this result, is it wise to
depend on color-coded graphics in a presentation?</li>
<li>Come up with a creative way to draw a four-dimensional Venn
diagram.</li>
<li>Use Excel to reproduce the zero correlation between <span
class="math inline"><em>x</em></span> and <span
class="math inline"><em>y</em><sub>1</sub> = <em>x</em> ⊙ <em>x</em></span>
from section . Now update the <span
class="math inline"><em>y</em></span> column to <span
class="math inline"><em>y</em><sub>2</sub> = <em>x</em> ⊙ <em>x</em> + <em>x</em> = (20, 12, 6, 2, 0, 0, 2, 6, 12, 20, 30)</span>.
What is <span
class="math inline">cor(<em>x</em>, <em>y</em><sub>2</sub>)</span>?</li>
<li>Use Excel’s line of best fit feature to construct a linear models
between both <span class="math inline"><em>x</em></span> and <span
class="math inline"><em>y</em><sub>1</sub></span> and also <span
class="math inline"><em>x</em></span> and <span
class="math inline"><em>y</em><sub>2</sub></span>. Observe that the
<span class="math inline"><em>y</em></span>-intercept in both models is
<span class="math inline">10</span>. Try to figure out where this
constant comes from. <!-- answer: mean(x) --></li>
</ol>
<h1 data-number="6" id="chapter:graph"><span
class="header-section-number">6</span> Graph Theory</h1>
<h2 data-number="6.1" id="vertices-edges-and-paths"><span
class="header-section-number">6.1</span> Vertices, edges, and paths</h2>
<p>A <em>graph</em> (<span class="math inline"><em>G</em></span>) is a
collection of <em>vertices</em> (<span
class="math inline"><em>V</em></span>; also known as <em>nodes</em> or
<em>points</em>) and the <em>edges</em> (<span
class="math inline"><em>E</em></span>; also known as <em>relations</em>
or <em>lines</em>; see section ) connecting them.</p>
<p><span
class="math display"><em>G</em> = {<em>V</em>, <em>E</em>}</span></p>
<p>Edges are conventionally named for the vertices they connect. For
example, let <span
class="math inline"><em>V</em> = {<em>u</em>, <em>v</em>}</span> and
<span
class="math inline"><em>E</em> = {(<em>u</em>, <em>v</em>)}</span>, then
<span class="math inline"><em>G</em> = {<em>V</em>, <em>E</em>}</span>
is a graph with two vertices, <span
class="math inline"><em>u</em></span> and <span
class="math inline"><em>v</em></span>, and one edge, <span
class="math inline">(<em>u</em>, <em>v</em>)</span>.</p>
<p>Graphs can be used to model any form of <em>network</em> where the
elements of sets bear relations. Graphs can be directed, where the
source and destination vertices in an edge are significant (<span
class="math inline">(<em>u</em>, <em>v</em>) ≠ (<em>v</em>, <em>u</em>)</span>),
or undirected (<span
class="math inline">(<em>u</em>, <em>v</em>) = (<em>v</em>, <em>u</em>)</span>).
The number of edges associated with a vertex is its <em>degree</em>. In
directed graphs, we distinguish <em>in-degree</em> (the number of edges
leading into the vertex) and <em>out-degree</em> (the number of edges
originating from the vertex).</p>
<figure>
<embed src="paris-brussels-hague.dot.pdf" />
<figcaption aria-hidden="true">Graphs are conventionally visualized as
circles (vertices) connected by lines (edges).</figcaption>
</figure>
<p>A <em>path</em> is a series of edges that <em>transitively</em>
connect two vertices that are not directly connected. We say that <span
class="math inline"><em>u</em> ⤳ <em>v</em></span> (<span
class="math inline"><em>u</em></span> leads to <span
class="math inline"><em>v</em></span>) if the graph contains some path
from <span class="math inline"><em>u</em></span> to <span
class="math inline"><em>v</em></span>.</p>
<p>The edges of a graph may have a <em>distance function</em> (<span
class="math inline"><em>δ</em></span>; also known as <em>weight</em> and
<em>cost</em>), which relates each edge with some real number. Such
graphs are <em>weighted graphs</em>. For example, suppose a high-speed
railroad has train stations in Paris, Brussels, and the Hague. The
distance from Paris to Brussels is about <span
class="math inline">350 km</span> and the distance from Brussels to
Hague is another <span class="math inline">180 km</span>. The total path
length from Paris to Hague via Brussels is therefore <span
class="math inline">350 km + 180 km = 530 km</span>.</p>
<p><span class="math display">$$
\begin{aligned}
\delta \left( \text{Paris} , \text{Hague} \right) &amp;= \delta \left(
\text{Paris} , \text{Brussels} \right) + \delta \left( \text{Brussels} ,
\text{Hague} \right) \\
&amp;= \qty{350}\km + \qty{180}\km \\
&amp;= \qty{530}\km.
\end{aligned}
$$</span></p>
<p>Let us quickly reproduce this result using a <em>graph database</em>
named Neo4j. Go to https://console.neo4j.org and click the “Clear DB”
button. Enter the below <em>Cypher query</em> into the input field and
press the triangle-shaped execute button.</p>
<pre><code>CREATE
    (paris:CITY {name:&quot;Paris&quot;}),
    (brussels:CITY {name:&quot;Brussels&quot;}),
    (hague:CITY {name:&quot;Hague&quot;}),
    (paris)-[:ROUTE {dist:350}]-&gt;(brussels),
    (brussels)-[:ROUTE {dist:180}]-&gt;(hague);</code></pre>
<p>This command created three vertices and two edges. Verify and
visualize this graph with the below query. Neo4j’s Cypher language uses
<code>MATCH</code> as its selection (<span
class="math inline"><em>σ</em></span>) operator.</p>
<pre><code>MATCH (x:CITY)
RETURN x;</code></pre>
<p>Finally, query the database for a path of any length (<code>*</code>)
connecting Paris to Hague, returning the path (<code>p</code>) and its
cumulative distance. Refer to section for a description of the reduce
operation.</p>
<pre><code>MATCH (:CITY {name:&#39;Paris&#39;})-[p:ROUTE*]-&gt;(:CITY {name:&#39;Hague&#39;}) 
RETURN p, REDUCE(length=0, e IN p | length + e.dist) AS distance;</code></pre>
<h2 data-number="6.2" id="connectivity-and-distance"><span
class="header-section-number">6.2</span> Connectivity and distance</h2>
<p>A <em>complete</em> graph is <em>fully connected</em>, having paths
between all pairs of vertices. One’s model for distance may be
challenged in incomplete graphs, which contain partitions.</p>
<p>What is the driving distance from Paris, France to Sydney, Australia?
There is no route (no path) connecting Europe, by ground, to Australia,
and therefore there is no real number to quantify the distance.</p>
<p>Depending on the application, one might represent an unreachable node
as having infinite distance, as we will in section with Dijkstra’s
algorithm. One might also use a special, non-numeric values, as
described in our discussion of missing values in section .</p>
<h2 data-number="6.3" id="sec:special-cases-of-graphs"><span
class="header-section-number">6.3</span> Special cases of graphs</h2>
<p>A <em>directed acyclic graph</em> (DAG) is a special case of a
directed graph. A <em>cycle</em> (also known as a <em>loop</em>) occurs
in a directed graph when there is any path from some vertex to itself.
For example, let <span class="math inline"><em>G</em></span> be a
directed graph where</p>
<p><span
class="math display"><em>G</em> = {{<em>a</em>, <em>b</em>, <em>c</em>, <em>d</em>}, {(<em>a</em>, <em>b</em>), (<em>b</em>, <em>c</em>), (<em>c</em>, <em>d</em>), (<em>c</em>, <em>a</em>)}}.</span></p>
<figure>
<embed src="dag.dot.pdf" />
<figcaption aria-hidden="true">A directed acyclic graph (DAG) may
contain no cycles. The left graph is a DAG. The right graph is not
because the edges connecting <span
class="math inline"><em>a</em></span>, <span
class="math inline"><em>b</em></span>, and <span
class="math inline"><em>c</em></span> form a loop.</figcaption>
</figure>
<p>The edges <span class="math inline">(<em>a</em>, <em>b</em>)</span>,
<span class="math inline">(<em>b</em>, <em>c</em>)</span>, and <span
class="math inline">(<em>c</em>, <em>a</em>)</span> form a cycle.
Vertices <span class="math inline"><em>a</em></span>, <span
class="math inline"><em>b</em></span>, and <span
class="math inline"><em>c</em></span> together form a <em>connected
component</em>. A directed graph with one or more connected components
is not a DAG, but the graph of components (where vertices of the
component subgraph are merged into a “super vertex”) is itself a
DAG.</p>
<p>A <em>tree</em> is another special case of an acyclic graph. Trees
are often drawn in a vertical hierarchy where each <em>child node</em>
has one <em>parent</em>, and the only parent node with no parent is
called the <em>root node</em>. One’s ancestoral family tree is an
instance of a tree. Without a time machine, it is impossible to one to
form a hereditary loop with an ancestor.</p>
<h2 data-number="6.4" id="representation"><span
class="header-section-number">6.4</span> Representation</h2>
<p>Graphs are modeled using either an <em>adjacency list</em> or an
<em>adjacency matrix</em>. An adjacency list might look like</p>
<p><span class="math display">$$
\begin{aligned}
\text{adj} \left( \text{Paris} \right) &amp;= \left\{ \text{Brussels}
\right\} \\
\text{adj} \left( \text{Brussels} \right) &amp;= \left\{ \text{Paris} ,
\text{Hague} \right\} \\
\text{adj} \left( \text{Hague} \right) &amp;= \left\{ \text{Brussels}
\right\}. \\
\end{aligned}
$$</span></p>
<p>A separate data structure would be necessary to represent edge
weights. <em>Dictionary</em> types, such as <code>dict</code> in Python
and <code>map</code> in Go, can be convenient implementations for both
adjacency lists and edge weight functions.</p>
<p>An adjacency matrix represents edges with weights in a single data
structure, such as</p>
<p><span class="math display">$$
E = \begin{bNiceMatrix}[first-row,first-col]
&amp; \text{Paris} &amp; \text{Brussels} &amp; \text{Hague} \\
\text{Paris} &amp; 0 &amp; 350 &amp; \infty \\
\text{Brussels} &amp; 350 &amp; 0 &amp; 180 \\
\text{Hague} &amp; \infty &amp; 180 &amp; 0
\end{bNiceMatrix}.
$$</span></p>
<p>In this example, the distance of a vertex to itself is defined as
zero,</p>
<p><span
class="math display"><em>δ</em>(<em>u</em>, <em>u</em>) = 0</span></p>
<p>and the distance between vertices is considered infinite if those
vertices are not directly connected by an edge.</p>
<p><span
class="math display">(<em>u</em>, <em>v</em>) ∉ <em>E</em> ⟹ <em>δ</em>(<em>u</em>, <em>v</em>) = ∞</span></p>
<p>The <span class="math inline">∈</span> operator and its negation,
<span class="math inline">∉</span>, tests whether an object is an
“element of” a set; <span class="math inline">∈</span> is read “in” and
<span class="math inline">∉</span> is read “not in.” The symbol <span
class="math inline">⟹</span> is for <em>conditional implication</em> and
is read “implies.” If the <em>statement</em> on the left of <span
class="math inline">⟹</span> is true, then the statement on the right
must also be true.</p>
<h2 data-number="6.5" id="search-algorithms"><span
class="header-section-number">6.5</span> Search algorithms</h2>
<h3 data-number="6.5.1" id="depth-first-search"><span
class="header-section-number">6.5.1</span> Depth-first search</h3>
<p>Imagine a video game where the player searches the kingdom for
treasure. The player has no knowledge of where the treasure might be, so
from a starting point they fully explore the forest, mountains, and sea.
Both the starting point and the sea connect to opposite sides of the
city. Upon entering the city from the sea-side, the player explores the
city and discovers the treasure. This is an example of a <em>depth-first
search</em> (DFS).</p>
<figure>
<embed src="kingdom.dot.pdf" />
<figcaption aria-hidden="true">There are many paths from the starting
point to the treasure in this kingdom.</figcaption>
</figure>
<p>Go to the Go Playground<a href="#fn16" class="footnote-ref"
id="fnref16" role="doc-noteref"><sup>16</sup></a> to run the following
DFS implementation, written in Go. This implementation uses a
<em>recursive</em> definition of the DFS function (the DFS function
invokes itself as it explores the graph). The function uses an external
data structure (<code>quest</code>) to identify which vertices have
already been discovered. Upon successful search, the function prints its
position in the graph as the recursive calls “unwind.”</p>
<div class="sourceCode" id="cb57"><pre
class="sourceCode go"><code class="sourceCode go"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span> main</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="st">&quot;fmt&quot;</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> g <span class="op">=</span> <span class="kw">map</span><span class="op">[</span><span class="dt">string</span><span class="op">][]</span><span class="dt">string</span><span class="op">{</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;start&quot;</span><span class="op">:</span>     <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;forest&quot;</span><span class="op">,</span> <span class="st">&quot;mountains&quot;</span><span class="op">,</span> <span class="st">&quot;sea&quot;</span><span class="op">,</span> <span class="st">&quot;city&quot;</span><span class="op">},</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;forest&quot;</span><span class="op">:</span>    <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;start&quot;</span><span class="op">,</span> <span class="st">&quot;mountains&quot;</span><span class="op">,</span> <span class="st">&quot;desert&quot;</span><span class="op">,</span> <span class="st">&quot;cave&quot;</span><span class="op">},</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;mountains&quot;</span><span class="op">:</span> <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;start&quot;</span><span class="op">,</span> <span class="st">&quot;forest&quot;</span><span class="op">,</span> <span class="st">&quot;glacier&quot;</span><span class="op">},</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;desert&quot;</span><span class="op">:</span>    <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;forest&quot;</span><span class="op">},</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;cave&quot;</span><span class="op">:</span>      <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;forest&quot;</span><span class="op">,</span> <span class="st">&quot;inferno&quot;</span><span class="op">},</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;inferno&quot;</span><span class="op">:</span>   <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;cave&quot;</span><span class="op">},</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;glacier&quot;</span><span class="op">:</span>   <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;mountains&quot;</span><span class="op">},</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;sea&quot;</span><span class="op">:</span>       <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;start&quot;</span><span class="op">,</span> <span class="st">&quot;beach&quot;</span><span class="op">},</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;beach&quot;</span><span class="op">:</span>     <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;sea&quot;</span><span class="op">,</span> <span class="st">&quot;city&quot;</span><span class="op">},</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;city&quot;</span><span class="op">:</span>      <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;beach&quot;</span><span class="op">,</span> <span class="st">&quot;start&quot;</span><span class="op">,</span> <span class="st">&quot;castle&quot;</span><span class="op">},</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;castle&quot;</span><span class="op">:</span>    <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;city&quot;</span><span class="op">,</span> <span class="st">&quot;treasure&quot;</span><span class="op">},</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;treasure&quot;</span><span class="op">:</span>  <span class="op">[]</span><span class="dt">string</span><span class="op">{</span><span class="st">&quot;castle&quot;</span><span class="op">}}</span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> quest <span class="kw">map</span><span class="op">[</span><span class="dt">string</span><span class="op">]</span><span class="dt">string</span> <span class="op">=</span> <span class="bu">make</span><span class="op">(</span><span class="kw">map</span><span class="op">[</span><span class="dt">string</span><span class="op">]</span><span class="dt">string</span><span class="op">)</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> dfs<span class="op">(</span>src<span class="op">,</span> dst <span class="dt">string</span><span class="op">)</span> <span class="dt">bool</span> <span class="op">{</span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>    quest<span class="op">[</span>src<span class="op">]</span> <span class="op">=</span> <span class="st">&quot;discovered&quot;</span></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> src <span class="op">==</span> dst <span class="op">{</span></span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>        fmt<span class="op">.</span>Printf<span class="op">(</span><span class="st">&quot;Discovered %s:&quot;</span><span class="op">,</span> dst<span class="op">)</span></span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="ot">true</span></span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _<span class="op">,</span> neighbor <span class="op">:=</span> <span class="kw">range</span> g<span class="op">[</span>src<span class="op">]</span> <span class="op">{</span></span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> quest<span class="op">[</span>neighbor<span class="op">]</span> <span class="op">!=</span> <span class="st">&quot;discovered&quot;</span> <span class="op">{</span></span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> dfs<span class="op">(</span>neighbor<span class="op">,</span> dst<span class="op">)</span> <span class="op">==</span> <span class="ot">true</span> <span class="op">{</span></span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a>                fmt<span class="op">.</span>Printf<span class="op">(</span><span class="st">&quot; %s&quot;</span><span class="op">,</span> src<span class="op">)</span></span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> <span class="ot">true</span></span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ot">false</span></span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb57-42"><a href="#cb57-42" aria-hidden="true" tabindex="-1"></a>    dfs<span class="op">(</span><span class="st">&quot;start&quot;</span><span class="op">,</span> <span class="st">&quot;treasure&quot;</span><span class="op">)</span></span>
<span id="cb57-43"><a href="#cb57-43" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">.</span>Println<span class="op">()</span></span>
<span id="cb57-44"><a href="#cb57-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The program should output
<code>Discovered treasure: castle city beach sea start</code>. DFS
successfully discovers the treasure, but we have no guarantee that this
algorithm will find the <em>optimal</em> (shortest) path.</p>
<h3 data-number="6.5.2" id="breadth-first-search"><span
class="header-section-number">6.5.2</span> Breadth-first search</h3>
<p>Imagine the protagonist of our hypothetical adventure game was not a
lone wanderer, but rather a field marshall commanding a large army. This
army explores one region at a time, holding each area as adjacent units
proceed into their respective area. The army incrementally expands the
radius of the search <em>frontier</em> in a search technique called
<em>breadth-first search</em> (BFS). Once one unit discovers the
treasure, we are certain that no shorter path was possible thanks to an
<em>invariant</em> in our search algorithm.</p>
<p>Maintaining an invariant is essential for <em>mathematical
induction</em>, where we establish that some <em>predicate</em> <span
class="math inline"><em>P</em></span> is true for the <em>base case</em>
<span class="math inline"><em>P</em>(0)</span> and that <span
class="math inline"><em>P</em>(<em>k</em>)</span> implies <span
class="math inline"><em>P</em>(<em>k</em> + 1)</span> and therefore
<span class="math inline"><em>P</em>(<em>n</em>)</span> is true for all
<span class="math inline"><em>n</em> &gt; 0</span>. The proof for the
correctness of a BFS follows:</p>
<ol type="1">
<li>Along the frontier of radius <span
class="math inline"><em>r</em> = 0</span>, the BFS algorithm on graph
<span class="math inline"><em>G</em></span> has not discovered a path
from <span class="math inline"><em>u</em></span> to <span
class="math inline"><em>v</em></span>. <span
class="math inline"><em>δ</em>(<em>u</em>, <em>v</em>)</span> is
therefore at <em>closest</em> <span
class="math inline"><em>r</em> = 1</span>.</li>
<li>At <span class="math inline"><em>r</em> = 1</span>, BFS has not
found <span class="math inline"><em>v</em></span> and therefore <span
class="math inline">2 ≤ <em>δ</em>(<em>u</em>, <em>v</em>)</span>.</li>
<li>At <span class="math inline"><em>r</em> = 2</span>, BFS has not
found <span class="math inline"><em>v</em></span> and therefore <span
class="math inline">3 ≤ <em>δ</em>(<em>u</em>, <em>v</em>)</span>.</li>
<li><span class="math inline">⋮</span></li>
<li>At <span class="math inline"><em>r</em> = <em>k</em></span>, BFS has
not found <span class="math inline"><em>v</em></span> and therefore
<span
class="math inline"><em>k</em> + 1 ≤ <em>δ</em>(<em>u</em>, <em>v</em>)</span>.</li>
<li><span class="math inline">⋮</span></li>
<li>At <span class="math inline"><em>r</em> = <em>n</em></span>, BFS has
located <span class="math inline"><em>v</em></span> and therefore <span
class="math inline"><em>n</em> = <em>δ</em>(<em>u</em>, <em>v</em>)</span>.
<span class="math inline">▫</span></li>
</ol>
<p>Go to the Go Playground<a href="#fn17" class="footnote-ref"
id="fnref17" role="doc-noteref"><sup>17</sup></a> and run the following
BFS implementation, written in Go. This implementation uses an
<em>iterative</em> BFS function. The BFS function does not invoke
itself. Instead, the procedure adds unexplored vertices to a queue and
records the “parent” of each vertex. We “unwind” the resulting tree from
child to parent nodes to construct the shortest path.</p>
<div class="sourceCode" id="cb58"><pre
class="sourceCode go"><code class="sourceCode go"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> bfs<span class="op">(</span>src<span class="op">,</span> dst <span class="dt">string</span><span class="op">)</span> <span class="kw">map</span><span class="op">[</span><span class="dt">string</span><span class="op">]</span><span class="dt">string</span> <span class="op">{</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    parent <span class="op">:=</span> <span class="kw">map</span><span class="op">[</span><span class="dt">string</span><span class="op">]</span><span class="dt">string</span><span class="op">{</span>src<span class="op">:</span> src<span class="op">}</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    queue <span class="op">:=</span> <span class="op">[]</span><span class="dt">string</span><span class="op">{</span>src<span class="op">}</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="bu">len</span><span class="op">(</span>queue<span class="op">)</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">{</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>        position <span class="op">:=</span> queue<span class="op">[</span><span class="dv">0</span><span class="op">]</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>        queue <span class="op">=</span> queue<span class="op">[</span><span class="dv">1</span><span class="op">:]</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> position <span class="op">==</span> dst <span class="op">{</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> _<span class="op">,</span> neighbor <span class="op">:=</span> <span class="kw">range</span> g<span class="op">[</span>position<span class="op">]</span> <span class="op">{</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> _<span class="op">,</span> ok <span class="op">:=</span> parent<span class="op">[</span>neighbor<span class="op">];</span> <span class="op">!</span>ok <span class="op">{</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>                parent<span class="op">[</span>neighbor<span class="op">]</span> <span class="op">=</span> position</span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>                queue <span class="op">=</span> <span class="bu">append</span><span class="op">(</span>queue<span class="op">,</span> neighbor<span class="op">)</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> parent</span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>    tree <span class="op">:=</span> bfs<span class="op">(</span><span class="st">&quot;start&quot;</span><span class="op">,</span> <span class="st">&quot;treasure&quot;</span><span class="op">)</span></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">.</span>Printf<span class="op">(</span><span class="st">&quot;Discovered treasure:&quot;</span><span class="op">)</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>    position <span class="op">:=</span> <span class="st">&quot;treasure&quot;</span></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> position <span class="op">!=</span> tree<span class="op">[</span>position<span class="op">]</span> <span class="op">{</span></span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a>        position <span class="op">=</span> tree<span class="op">[</span>position<span class="op">]</span></span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a>        fmt<span class="op">.</span>Printf<span class="op">(</span><span class="st">&quot; %s&quot;</span><span class="op">,</span> position<span class="op">)</span></span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">.</span>Println<span class="op">()</span></span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>This program should output
<code>Discovered treasure: castle city start</code>. BFS finds the
shortest path between two vertices by <em>hop count</em>, but it does
not consider edge weights. In the following section, we will find that
we can often explore graphs much faster by ordering our breadth-first
traversal by cumulative path cost.</p>
<h3 data-number="6.5.3" id="sec:dijkstra"><span
class="header-section-number">6.5.3</span> Dijkstra’s algorithm</h3>
<!--
Dijkstra in Go https://go.dev/play/p/hcNbTvGli-z
Too long and ugly to share.
-->
<p><em>Dijkstra’s algorithm</em> uses a <em>priority queue</em> to visit
nodes from shortest to longest path <span class="citation"
data-cites="10.1145/3544585.3544600">[23]</span>. For this reason,
Dijkstra’s algorithm is also known as the <em>shortest-path first</em>
(SPF). Like BFS, Dikjstra’s algorithm is a <em>greedy algorithm</em>
that discovered a globally optimal solution by repeatedly making locally
optimal decisions. Let us turn to the Python language to demonstrate
Dijkstra’s algorithm on our same treasure-hunting graph, this time with
edge weights. Run this program at https://www.python.org/shell/.<a
href="#fn18" class="footnote-ref" id="fnref18"
role="doc-noteref"><sup>18</sup></a></p>
<div class="sourceCode" id="cb59"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> heapq <span class="im">import</span> <span class="op">*</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;start&quot;</span>, [<span class="st">&quot;forest&quot;</span>, <span class="st">&quot;mountains&quot;</span>, <span class="st">&quot;sea&quot;</span>, <span class="st">&quot;city&quot;</span>]),</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;forest&quot;</span>, [<span class="st">&quot;start&quot;</span>, <span class="st">&quot;mountains&quot;</span>, <span class="st">&quot;desert&quot;</span>, <span class="st">&quot;cave&quot;</span>]),</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;mountains&quot;</span>, [<span class="st">&quot;start&quot;</span>, <span class="st">&quot;forest&quot;</span>, <span class="st">&quot;glacier&quot;</span>]),</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;desert&quot;</span>, [<span class="st">&quot;forest&quot;</span>]),</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;cave&quot;</span>, [<span class="st">&quot;forest&quot;</span>, <span class="st">&quot;inferno&quot;</span>]),</span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;inferno&quot;</span>, [<span class="st">&quot;cave&quot;</span>]),</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;glacier&quot;</span>, [<span class="st">&quot;mountains&quot;</span>]),</span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;sea&quot;</span>, [<span class="st">&quot;start&quot;</span>, <span class="st">&quot;beach&quot;</span>]),</span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;beach&quot;</span>, [<span class="st">&quot;sea&quot;</span>, <span class="st">&quot;city&quot;</span>]),</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;city&quot;</span>, [<span class="st">&quot;beach&quot;</span>, <span class="st">&quot;start&quot;</span>, <span class="st">&quot;castle&quot;</span>]),</span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;castle&quot;</span>, [<span class="st">&quot;city&quot;</span>, <span class="st">&quot;treasure&quot;</span>]),</span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&quot;treasure&quot;</span>, [<span class="st">&quot;castle&quot;</span>]),</span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>w <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;start&quot;</span>, <span class="st">&quot;forest&quot;</span>), <span class="dv">70</span>),</span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;start&quot;</span>, <span class="st">&quot;mountains&quot;</span>), <span class="dv">60</span>),</span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;start&quot;</span>, <span class="st">&quot;sea&quot;</span>), <span class="dv">54</span>),</span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;start&quot;</span>, <span class="st">&quot;city&quot;</span>), <span class="dv">81</span>),</span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;forest&quot;</span>, <span class="st">&quot;start&quot;</span>), <span class="dv">42</span>),</span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;forest&quot;</span>, <span class="st">&quot;mountains&quot;</span>), <span class="dv">51</span>),</span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;forest&quot;</span>, <span class="st">&quot;desert&quot;</span>), <span class="dv">56</span>),</span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;forest&quot;</span>, <span class="st">&quot;cave&quot;</span>), <span class="dv">63</span>),</span>
<span id="cb59-31"><a href="#cb59-31" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;mountains&quot;</span>, <span class="st">&quot;start&quot;</span>), <span class="dv">71</span>),</span>
<span id="cb59-32"><a href="#cb59-32" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;mountains&quot;</span>, <span class="st">&quot;forest&quot;</span>), <span class="dv">38</span>),</span>
<span id="cb59-33"><a href="#cb59-33" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;mountains&quot;</span>, <span class="st">&quot;glacier&quot;</span>), <span class="dv">72</span>),</span>
<span id="cb59-34"><a href="#cb59-34" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;desert&quot;</span>, <span class="st">&quot;forest&quot;</span>), <span class="dv">93</span>),</span>
<span id="cb59-35"><a href="#cb59-35" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;cave&quot;</span>, <span class="st">&quot;forest&quot;</span>), <span class="dv">19</span>),</span>
<span id="cb59-36"><a href="#cb59-36" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;cave&quot;</span>, <span class="st">&quot;inferno&quot;</span>), <span class="dv">17</span>),</span>
<span id="cb59-37"><a href="#cb59-37" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;inferno&quot;</span>, <span class="st">&quot;cave&quot;</span>), <span class="dv">71</span>),</span>
<span id="cb59-38"><a href="#cb59-38" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;glacier&quot;</span>, <span class="st">&quot;mountains&quot;</span>), <span class="dv">25</span>),</span>
<span id="cb59-39"><a href="#cb59-39" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;sea&quot;</span>, <span class="st">&quot;start&quot;</span>), <span class="dv">49</span>),</span>
<span id="cb59-40"><a href="#cb59-40" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;sea&quot;</span>, <span class="st">&quot;beach&quot;</span>), <span class="dv">88</span>),</span>
<span id="cb59-41"><a href="#cb59-41" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;beach&quot;</span>, <span class="st">&quot;sea&quot;</span>), <span class="dv">79</span>),</span>
<span id="cb59-42"><a href="#cb59-42" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;beach&quot;</span>, <span class="st">&quot;city&quot;</span>), <span class="dv">29</span>),</span>
<span id="cb59-43"><a href="#cb59-43" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;city&quot;</span>, <span class="st">&quot;beach&quot;</span>), <span class="dv">30</span>),</span>
<span id="cb59-44"><a href="#cb59-44" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;city&quot;</span>, <span class="st">&quot;start&quot;</span>), <span class="dv">33</span>),</span>
<span id="cb59-45"><a href="#cb59-45" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;city&quot;</span>, <span class="st">&quot;castle&quot;</span>), <span class="dv">36</span>),</span>
<span id="cb59-46"><a href="#cb59-46" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;castle&quot;</span>, <span class="st">&quot;city&quot;</span>), <span class="dv">39</span>),</span>
<span id="cb59-47"><a href="#cb59-47" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;castle&quot;</span>, <span class="st">&quot;treasure&quot;</span>), <span class="dv">76</span>),</span>
<span id="cb59-48"><a href="#cb59-48" aria-hidden="true" tabindex="-1"></a>        ((<span class="st">&quot;treasure&quot;</span>, <span class="st">&quot;castle&quot;</span>), <span class="dv">76</span>),</span>
<span id="cb59-49"><a href="#cb59-49" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb59-50"><a href="#cb59-50" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb59-51"><a href="#cb59-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-52"><a href="#cb59-52" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dijkstra(src, dst):</span>
<span id="cb59-53"><a href="#cb59-53" aria-hidden="true" tabindex="-1"></a>    explored <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb59-54"><a href="#cb59-54" aria-hidden="true" tabindex="-1"></a>    distance <span class="op">=</span> defaultdict(<span class="kw">lambda</span>: <span class="bu">float</span>(<span class="st">&#39;inf&#39;</span>))</span>
<span id="cb59-55"><a href="#cb59-55" aria-hidden="true" tabindex="-1"></a>    previous <span class="op">=</span> {<span class="st">&#39;start&#39;</span>: <span class="va">None</span>}</span>
<span id="cb59-56"><a href="#cb59-56" aria-hidden="true" tabindex="-1"></a>    distance[src] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb59-57"><a href="#cb59-57" aria-hidden="true" tabindex="-1"></a>    queue <span class="op">=</span> []</span>
<span id="cb59-58"><a href="#cb59-58" aria-hidden="true" tabindex="-1"></a>    heappush(queue, (<span class="dv">0</span>, src))</span>
<span id="cb59-59"><a href="#cb59-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> queue:</span>
<span id="cb59-60"><a href="#cb59-60" aria-hidden="true" tabindex="-1"></a>        _, current <span class="op">=</span> heappop(queue)</span>
<span id="cb59-61"><a href="#cb59-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> current <span class="op">==</span> dst:</span>
<span id="cb59-62"><a href="#cb59-62" aria-hidden="true" tabindex="-1"></a>            path <span class="op">=</span> []</span>
<span id="cb59-63"><a href="#cb59-63" aria-hidden="true" tabindex="-1"></a>            parent <span class="op">=</span> current</span>
<span id="cb59-64"><a href="#cb59-64" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> parent <span class="kw">in</span> previous:</span>
<span id="cb59-65"><a href="#cb59-65" aria-hidden="true" tabindex="-1"></a>                path.append(parent)</span>
<span id="cb59-66"><a href="#cb59-66" aria-hidden="true" tabindex="-1"></a>                parent <span class="op">=</span> previous[parent]</span>
<span id="cb59-67"><a href="#cb59-67" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> path, distance[dst]</span>
<span id="cb59-68"><a href="#cb59-68" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> current <span class="kw">in</span> explored:</span>
<span id="cb59-69"><a href="#cb59-69" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb59-70"><a href="#cb59-70" aria-hidden="true" tabindex="-1"></a>        explored.add(current)</span>
<span id="cb59-71"><a href="#cb59-71" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> neighbor <span class="kw">in</span> g[current]:</span>
<span id="cb59-72"><a href="#cb59-72" aria-hidden="true" tabindex="-1"></a>            d <span class="op">=</span> distance[current] <span class="op">+</span> w[(current, neighbor)]</span>
<span id="cb59-73"><a href="#cb59-73" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> neighbor <span class="kw">not</span> <span class="kw">in</span> explored <span class="kw">and</span> d <span class="op">&lt;</span> distance[neighbor]:</span>
<span id="cb59-74"><a href="#cb59-74" aria-hidden="true" tabindex="-1"></a>                distance[neighbor] <span class="op">=</span> d</span>
<span id="cb59-75"><a href="#cb59-75" aria-hidden="true" tabindex="-1"></a>                previous[neighbor] <span class="op">=</span> current</span>
<span id="cb59-76"><a href="#cb59-76" aria-hidden="true" tabindex="-1"></a>                heappush(queue, (d, neighbor))</span>
<span id="cb59-77"><a href="#cb59-77" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;No path found&quot;</span>)</span>
<span id="cb59-78"><a href="#cb59-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-79"><a href="#cb59-79" aria-hidden="true" tabindex="-1"></a>path, distance <span class="op">=</span> dijkstra(<span class="st">&quot;start&quot;</span>, <span class="st">&quot;treasure&quot;</span>)</span>
<span id="cb59-80"><a href="#cb59-80" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Path =&quot;</span>, <span class="st">&#39;, &#39;</span>.join(path))</span>
<span id="cb59-81"><a href="#cb59-81" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Distance =&quot;</span>, distance)</span></code></pre></div>
<p>This program should output <code>Path found: 193</code>, and
<code>Path: treasure castle city start</code>. The shortest path from
<code>start</code> to <code>treasure</code> has a total path cost of
193.</p>
<p>Neo4j produces the same result. We reconstruct our graph in the
Cypher language at https://console.neo4j.org:</p>
<pre><code>CREATE
    (start:LOCATION {name:&#39;start&#39;}),
    (inferno:LOCATION {name:&#39;inferno&#39;}),
    (beach:LOCATION {name:&#39;beach&#39;}),
    (castle:LOCATION {name:&#39;castle&#39;}),
    (forest:LOCATION {name:&#39;forest&#39;}),
    (mountains:LOCATION {name:&#39;mountains&#39;}),
    (desert:LOCATION {name:&#39;desert&#39;}),
    (cave:LOCATION {name:&#39;cave&#39;}),
    (glacier:LOCATION {name:&#39;glacier&#39;}),
    (sea:LOCATION {name:&#39;sea&#39;}),
    (city:LOCATION {name:&#39;city&#39;}),
    (treasure:LOCATION {name:&#39;treasure&#39;}),
    (start)-[:CONN {distance:70}]-&gt;(forest),
    (start)-[:CONN {distance:60}]-&gt;(mountains),
    (start)-[:CONN {distance:54}]-&gt;(sea),
    (start)-[:CONN {distance:81}]-&gt;(city),
    (inferno)-[:CONN {distance:71}]-&gt;(cave),
    (beach)-[:CONN {distance:79}]-&gt;(sea),
    (beach)-[:CONN {distance:29}]-&gt;(city),
    (castle)-[:CONN {distance:39}]-&gt;(city),
    (castle)-[:CONN {distance:76}]-&gt;(treasure),
    (city)-[:CONN {distance:30}]-&gt;(beach),
    (city)-[:CONN {distance:33}]-&gt;(start),
    (city)-[:CONN {distance:36}]-&gt;(castle),
    (treasure)-[:CONN {distance:76}]-&gt;(castle),
    (forest)-[:CONN {distance:42}]-&gt;(start),
    (forest)-[:CONN {distance:51}]-&gt;(mountains),
    (forest)-[:CONN {distance:56}]-&gt;(desert),
    (forest)-[:CONN {distance:63}]-&gt;(cave),
    (mountains)-[:CONN {distance:71}]-&gt;(start),
    (mountains)-[:CONN {distance:38}]-&gt;(forest),
    (mountains)-[:CONN {distance:72}]-&gt;(glacier),
    (desert)-[:CONN {distance:93}]-&gt;(forest),
    (cave)-[:CONN {distance:19}]-&gt;(forest),
    (cave)-[:CONN {distance:17}]-&gt;(inferno),
    (glacier)-[:CONN {distance:25}]-&gt;(mountains),
    (sea)-[:CONN {distance:49}]-&gt;(start),
    (sea)-[:CONN {distance:88}]-&gt;(beach);</code></pre>
<p>and then we can use the built-in <code>shortestPath</code> function
to obtain the same result.</p>
<pre><code>MATCH
    (src:LOCATION {name:&#39;start&#39;}),
    (dst:LOCATION {name:&#39;treasure&#39;}),
    path = shortestPath((src)-[:CONN*]-&gt;(dst))
RETURN
    path,
    REDUCE(d=0, e in relationships(path) | d + e.distance)
    AS distance;</code></pre>
<p>Neo4j should also report a distance of 193.</p>
<p>As an exercise, change <code>-&gt;(dst)</code> to <code>-(dst)</code>
and re-run the query with this change. The total distance is now 145.
The difference in <code>()-[]-&gt;()</code> and <code>()-[]-()</code> is
that one is a directed edge, the other is undirected. With
<code>-()</code> instead of <code>-&gt;()</code>, Neo4j treats all edges
in the graph as undirected. Neo4j allows <em>parallel edges</em> that
connect the same two vertices.</p>
<h3 data-number="6.5.4" id="informed-search-with-a"><span
class="header-section-number">6.5.4</span> Informed search with A*</h3>
<p>DFS, BFS, and Dijkstra’s algorithms are all <em>uninformed</em>
search algorithms. The A* algorithm is an <em>informed</em> search
algorithm: it uses some <em>heuristic</em> to explore its frontier
ordered by minimum estimated distance to the destination <span
class="citation" data-cites="4082128">[24]</span>.</p>
<p>A* can solve hard problems that are not immediately recognizable as
searches. The canonical example is the 8-piece puzzle problem. An
8-piece puzzle arranges 8 movable square tiles into a <span
class="math inline">3 × 3</span> grid. One position is empty. The
challenge is to slide the pieces until all pieces are in order.</p>
<p><span class="math display">$$
\begin{bmatrix}
5 &amp; 4 &amp; 1\\
&amp; 2 &amp; 8\\
3 &amp; 6 &amp; 7
\end{bmatrix}
\to
\begin{bmatrix}
1 &amp; 2 &amp; 3 \\
4 &amp; 5 &amp; 6 \\
7 &amp; 8 &amp;
\end{bmatrix}
$$</span></p>
<p>The choice of heuristic function influences the path A* chooses as it
searches for a solution. One heuristic function for the 8-piece puzzle
problem returns the count of mismatched pieces. If two pieces are out of
place then the heuristic distance is 2, if three pieces are out of place
then the heuristic distance is 3, and so on. An alternative, more
sophsticated heuristic function, uses the <em>Manhattan distance</em>
(also known as <em>Taxicab distance</em>) of each puzzle piece to its
destination. Manhattan distance is the sum of unsigned differences of
each dimension between two coördinates in <span
class="math inline"><em>n</em></span>-dimensional space. The intuition
is that a taxicab cannot fly in a straight line, but rather has to
corner the rectangular blocks of Manhattan.</p>
<p><span class="math display">$$
d_T \left( p, q \right) = \sum_{i=i}^n{ \left| p_i - q_i \right| }
$$</span></p>
<p>For example, if <span
class="math inline"><em>p</em> = (<em>x</em><sub>1</sub>, <em>y</em><sub>1</sub>)</span>
and <span
class="math inline"><em>q</em> = (<em>x</em><sub>2</sub>, <em>y</em><sub>2</sub>)</span>,
then <span
class="math inline"><em>d</em><sub><em>T</em></sub>(<em>p</em>, <em>q</em>) = |<em>x</em><sub>1</sub> − <em>x</em><sub>2</sub>| + |<em>y</em><sub>1</sub> − <em>y</em><sub>2</sub>|</span>.
A heuristic function for an A* solution to the 8-piece puzzle problem
uses Manhattan distance to quantify the closeness of the current game
state to the desired solution. This approach works because progress
<em>towards</em> the solution ultimately results in a global solution.
The design of the heuristic function is key to the informed search
technique.</p>
<p>Some problems contain <em>local extrema</em> (local but not global
minimal or maximal values) that might stop the search at a suboptimal
solution. If the problem has an extremely large space (there are too
many candidate solutions to search exhaustively), then it may be
acceptable to accept a “good-enough” local best candidate solution as an
approximation for the global optimum. The <em>local search</em>
technique uses an <em>ensemble</em> of <em>search agents</em> which
independently search <em>neighborhoods</em> of the problem space. A
local search could be built upon A* searches from different origins.
Ideally, the A*-based local search should explore the problem with
reasonable depth, mobility, and coverage <span class="citation"
data-cites="schuurmans2001local">[25]</span>.</p>
<p>Interestingly, the 8-piece and comparable 15-piece puzzle problems
are not guaranteed to be solvable. Exactly half of all possible <span
class="math inline">9! = 362880</span> and <span
class="math inline">15! = 1307674368000</span> permutations are
reachable from any random 8- and 15-piece puzzle game state <span
class="citation" data-cites="10.2307/2369492">[26]</span>. <span
class="math inline"><em>n</em></span>-piece puzzles (<span
class="math inline"><em>n</em> ≥ 3</span>) contain two partitions and
are therefore classified as <em>bipartite</em> graphs. The puzzle is
unsolvable if started in the partition that does not contain the
solution. We must understand that search algorithms might not be able to
solve a problem if the graph of the problem space contains a
partition.</p>
<h3 data-number="6.5.5" id="a-and-the-stable-marriage-problem"><span
class="header-section-number">6.5.5</span> A* and the Stable Marriage
Problem</h3>
<p>We will demonstrate the A* informed search algorithm on the
<em>Stable Marriage Problem</em> <span class="citation"
data-cites="gale1962college">[27]</span>. The Stable Marriage Problem
seeks to pair the members of two equal-sized sets to one another based
upon their mutual preferences. This problem and its solution are applied
to many practical situations, including the Army Talent Alignment
Process (ATAP); see https://www.youtube.com/watch?v=9mEBe7fzrmI for an
official and detailed explanation. Explained with marriages, the problem
has all of the men rank all of the women from most to least preferred.
Correspondingly, the women also rank all of the men from most to least
preferred.</p>
<p><span class="math display">$$
\begin{aligned}
M &amp;= \begin{bNiceMatrix}[first-row,first-col]
&amp; \text{Woman 1} &amp; \text{Woman 2} &amp; \text{Woman 3} \\
\text{Man 1} &amp; 1 &amp; 2 &amp; 3 \\
\text{Man 2} &amp; 3 &amp; 1 &amp; 2 \\
\text{Man 3} &amp; 2 &amp; 3 &amp; 1
\end{bNiceMatrix}\\
W &amp;= \begin{bNiceMatrix}[first-row,first-col]
&amp; \text{Man 1} &amp; \text{Man 2} &amp; \text{Man 3} \\
\text{Woman 1} &amp; 3 &amp; 1 &amp; 2 \\
\text{Woman 2} &amp; 2 &amp; 3 &amp; 1 \\
\text{Woman 3} &amp; 1 &amp; 2 &amp; 3
\end{bNiceMatrix}
\end{aligned}
$$</span></p>
<p>Each man is paired to one woman. The set of matching is considered
“stable” when there is no “<em>rogue couple</em>”: where a man <span
class="math inline"><em>x</em></span> who prefers some other woman <span
class="math inline"><em>y</em></span> to his current wife <em>and</em>
where woman <span class="math inline"><em>y</em></span> prefers man
<span class="math inline"><em>x</em></span> to her current husband. (The
solution does not need to give everyone their first preference. It is
acceptable for some person to prefer someone other than their current
spouse; instability occurs only when that person requites.) In the above
example, the pairing <span class="math inline">[1, 2, 3]</span> (man 1
paired to woman 1, man 2 with woman 2, 3 with 3) is stable. The pairing
<span class="math inline">[3, 2, 1]</span> (man 1 paired to woman 3, man
2 with woman 2, 3 with 1) is not stable because man 1 perfers woman 2 to
his current spouse (woman 3) and woman 2 prefers man 1 to her current
spouse (man 2).</p>
<p>The Stable Marriage Problem is known to be solvable with a simple and
predictable algorithm by Gale and Shapley <span class="citation"
data-cites="gale1962college">[27]</span>. First, each man proposes to
his most-preferred woman. Women who receive multiple proposals maintain
only their most-preferred proposal and reject the others. Second, each
rejected man proposes to his next-preferred woman; women receiving new
proposals continue to maintain only the one most-preferred. The process
continues until no man is rejected in a round. Finally, the women accept
their most-preferred proposal and the algorithm terminates.</p>
<p>A <em>reduction</em> is a method of solving one problem by restating
it in terms of another. Reductions can be a powerful but difficult
technique for solving hard problems. By reducing the stable marriage
problem to a graph search problem, we can solve the problem with an A*
algorithm. Our A* solution will be slower and less efficient than the
Gale-Shapley algorithm, but it will demonstrate a method for solving
difficult problems using general and reusable techniques. The 8-piece
puzzle problem could likely also be solved with a very fast and direct
algorithm, but it may be very difficult for us to discover this
solution. Likewise, there may be an optimal algorithm to solve a Rubik’s
cube, but given an A* solver and a fast computer we may be able to find
an economically-acceptable solution.</p>
<p>Our informed search algorithm is implemented in Julia. This is
comparable our implementation of Dijkstra’s algorithm (see section ),
but instead of searching for a named destination this function instead
uses its heuristic function. If the heuristic function returns the value
zero, then the search is considered successful and the program
terminates. This A* program also prints its search in the DOT graph
description language, which can be rendered as a graphic using the
GraphViz program.</p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode julia"><code class="sourceCode julia"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DataStructures</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">informed_search</span>(source, edges<span class="op">::</span><span class="dt">Function</span>, heuristic<span class="op">::</span><span class="dt">Function</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">println</span>(<span class="st">&quot;digraph {&quot;</span>)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    pq <span class="op">=</span> <span class="fu">PriorityQueue</span>()</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    visited <span class="op">=</span> <span class="fu">Set</span>()</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">enqueue!</span>(pq, source<span class="op">=&gt;</span><span class="fu">heuristic</span>(source))</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> !<span class="fu">isempty</span>(pq)</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>        u <span class="op">=</span> <span class="fu">dequeue!</span>(pq)</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">push!</span>(visited, u)</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">println</span>(<span class="st">&quot;</span><span class="sc">\&quot;$</span>(u)<span class="sc">\&quot;</span><span class="st"> [color=</span><span class="sc">\&quot;</span><span class="st">blue</span><span class="sc">\&quot;</span><span class="st">];&quot;</span>)</span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="fu">heuristic</span>(u) <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">println</span>(<span class="st">&quot;}&quot;</span>)</span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> v <span class="op">∈</span> <span class="fu">edges</span>(u)</span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> v <span class="op">∉</span> visited <span class="op">&amp;&amp;</span> !<span class="fu">haskey</span>(pq, v)</span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a>                <span class="fu">enqueue!</span>(pq, v<span class="op">=&gt;</span><span class="fu">heuristic</span>(v))</span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a>                <span class="fu">println</span>(<span class="st">&quot;</span><span class="sc">\&quot;$</span>(u)<span class="sc">\&quot;</span><span class="st"> -&gt; </span><span class="sc">\&quot;$</span>(v)<span class="sc">\&quot;</span><span class="st">;&quot;</span>)</span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">end</span></span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">error</span>(<span class="st">&quot;Failed to find a solution.&quot;</span>)</span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<p>The heuristic function for the stable marriage function seeks to
quantify and differentiate instability by returning the sum of the
squared distance (see section ) of a rogue couple’s candidate and
current preferences.</p>
<div class="sourceCode" id="cb63"><pre
class="sourceCode julia"><code class="sourceCode julia"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">stability</span>(men<span class="op">::</span><span class="dt">Matrix</span>, women<span class="op">::</span><span class="dt">Matrix</span>, matching)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="fu">length</span>(matching)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    wife <span class="op">=</span> matching</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    husband <span class="op">=</span> <span class="fu">Dict</span>(<span class="fu">values</span>(matching) <span class="op">.=&gt;</span> <span class="fu">keys</span>(matching))</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    metric <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> man <span class="op">∈</span> <span class="fl">1</span><span class="op">:</span>n</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> woman <span class="op">∈</span> <span class="fl">1</span><span class="op">:</span>n</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Candidate and current preferences for the man</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>            x1, x2 <span class="op">=</span> men[man, woman], men[man, wife[man]]</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Candidate and current preferences for the woman</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>            y1, y2 <span class="op">=</span> women[woman, man], women[woman, husband[woman]]</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>            <span class="co"># The matching is unstable if, and only if, both the man</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>            <span class="co"># and the woman prefer each other to their current matches.</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> x1 <span class="op">&lt;</span> x2 <span class="op">&amp;&amp;</span> y1 <span class="op">&lt;</span> y2</span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>                metric <span class="op">+=</span> (x1 <span class="op">-</span> x2)<span class="op">^</span><span class="fl">2</span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>                metric <span class="op">+=</span> (y1 <span class="op">-</span> y2)<span class="op">^</span><span class="fl">2</span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">end</span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> metric</span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<p>The size of our problem comes from the number of possible matchings.
If there are <span class="math inline"><em>n</em></span> men and <span
class="math inline"><em>n</em></span> women, then the first man can be
matched to <span class="math inline"><em>n</em></span> women, the second
man can be matched to <span class="math inline"><em>n</em> − 1</span>
women, and so on until the last man can only be matched to the only
remaining woman. Thus,</p>
<p><span class="math display">Problem
size = <em>n</em> ⋅ (<em>n</em> − 1) ⋅ (<em>n</em> − 2) ⋅ … ⋅ 3 ⋅ 2 ⋅ 1 = <em>n</em>!</span></p>
<p>A problem of factorial size is a large combinatorial problem. We will
not attempt to visit all possible nodes in the problem space. Instead,
our edge function will generate three permutations of the current
position by switching two matchings.</p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode julia"><code class="sourceCode julia"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">StatsBase</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">e</span>(u)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    v <span class="op">=</span> <span class="fu">Set</span>()</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _ <span class="op">∈</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> <span class="fu">copy</span>(u)</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Sample, without replacement, two random elements to swap.</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> <span class="fu">sample</span>(<span class="fu">collect</span>(<span class="fu">eachindex</span>(u)), <span class="fl">2</span>, replace<span class="op">=</span><span class="cn">false</span>)</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>        x[y[<span class="fl">1</span>]], x[y[<span class="fl">2</span>]] <span class="op">=</span> x[y[<span class="fl">2</span>]], x[y[<span class="fl">1</span>]]</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">push!</span>(v, x)</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>
<p>Our ranking matrices for men, <span
class="math inline"><em>M</em></span>, and women, <span
class="math inline"><em>W</em></span> are taken from example 2 from Gale
and Shapley <span class="citation"
data-cites="gale1962college">[27]</span>.</p>
<p><span class="math display">$$
M = \left[
\begin{array}{cccc}
1 &amp; 2 &amp; 3 &amp; 4 \\
1 &amp; 4 &amp; 3 &amp; 2 \\
2 &amp; 1 &amp; 3 &amp; 4 \\
4 &amp; 2 &amp; 3 &amp; 1 \\
\end{array}
\right]
$$</span></p>
<p><span class="math display">$$
W = \left[
\begin{array}{cccc}
3 &amp; 4 &amp; 2 &amp; 1 \\
3 &amp; 1 &amp; 4 &amp; 2 \\
2 &amp; 3 &amp; 4 &amp; 1 \\
3 &amp; 2 &amp; 1 &amp; 4 \\
\end{array}
\right]
$$</span></p>
<p>The Julia language has a compact notation to create matrix
literals.</p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode julia"><code class="sourceCode julia"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span> <span class="fl">4</span>; <span class="fl">1</span> <span class="fl">4</span> <span class="fl">3</span> <span class="fl">2</span>; <span class="fl">2</span> <span class="fl">1</span> <span class="fl">3</span> <span class="fl">4</span>; <span class="fl">4</span> <span class="fl">2</span> <span class="fl">3</span> <span class="fl">1</span>]</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>W <span class="op">=</span> [<span class="fl">3</span> <span class="fl">4</span> <span class="fl">2</span> <span class="fl">1</span>; <span class="fl">3</span> <span class="fl">1</span> <span class="fl">4</span> <span class="fl">2</span>; <span class="fl">2</span> <span class="fl">3</span> <span class="fl">4</span> <span class="fl">1</span>; <span class="fl">3</span> <span class="fl">2</span> <span class="fl">1</span> <span class="fl">4</span>]</span></code></pre></div>
<p>We construct a <em>closure</em> to encapsulate <span
class="math inline"><em>M</em></span> and <span
class="math inline"><em>W</em></span> with our stability metric function
into the heuristic function.</p>
<div class="sourceCode" id="cb66"><pre
class="sourceCode julia"><code class="sourceCode julia"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">h</span>(u) <span class="op">=</span> <span class="fu">stability</span>(M, W, u)</span></code></pre></div>
<p>This syntax declares a unary function <code>h</code> that will enable
our A* to navigate matrices <span class="math inline"><em>M</em></span>
and <span class="math inline"><em>W</em></span> without direct knowledge
of either.</p>
<p>Finally, we invoke the A* informed search algorithm to navigate the
Stable Marriage Problem as a graph, starting from pairings <span
class="math inline">[4, 3, 2, 1]</span> (man 1 matched to woman 4, man 2
to woman 3, 3 to 2, and 4 to 1).</p>
<pre><code>julia&gt; informed_search([4,3,2,1], e, h)
digraph {
&quot;[4, 3, 2, 1]&quot; [color=&quot;blue&quot;];
&quot;[4, 3, 2, 1]&quot; -&gt; &quot;[4, 2, 3, 1]&quot;;
&quot;[4, 3, 2, 1]&quot; -&gt; &quot;[4, 1, 2, 3]&quot;;
&quot;[4, 3, 2, 1]&quot; -&gt; &quot;[4, 3, 1, 2]&quot;;
&quot;[4, 3, 1, 2]&quot; [color=&quot;blue&quot;];
&quot;[4, 3, 1, 2]&quot; -&gt; &quot;[4, 2, 1, 3]&quot;;
&quot;[4, 3, 1, 2]&quot; -&gt; &quot;[4, 1, 3, 2]&quot;;
&quot;[4, 2, 1, 3]&quot; [color=&quot;blue&quot;];
&quot;[4, 2, 1, 3]&quot; -&gt; &quot;[2, 4, 1, 3]&quot;;
&quot;[4, 2, 1, 3]&quot; -&gt; &quot;[1, 2, 4, 3]&quot;;
&quot;[2, 4, 1, 3]&quot; [color=&quot;blue&quot;];
&quot;[2, 4, 1, 3]&quot; -&gt; &quot;[2, 1, 4, 3]&quot;;
&quot;[2, 4, 1, 3]&quot; -&gt; &quot;[3, 4, 1, 2]&quot;;
&quot;[3, 4, 1, 2]&quot; [color=&quot;blue&quot;];
}</code></pre>
<p>(Note: this <em>stochastic</em> algorithm uses randomness in the
<code>sample</code> operation. Outputs are not determininstic. In rare
cases, this procedure may not discover the one and only solution, <span
class="math inline">[3, 4, 1, 2]</span>. See
https://github.com/wjholden/Data-Literacy/blob/main/StableMarriageSearch.jl
for an expanded version of this program which uses a seeded random
number generator for reproducibility.)</p>
<p>We can input this <code>digraph</code> data into
https://dreampuf.github.io/GraphvizOnline/ to visualize the search tree,
as shown in figure .</p>
<figure id="fig:gale-shapley-ex2">
<embed src="gale-shapley-ex2.dot.pdf" />
<figcaption aria-hidden="true">A search tree of the Stable Marriage
Problem, reduced to an informed search that is solvable with
A*.</figcaption>
</figure>
<p>Again, we applied informed search to the Stable Marriage Problem as
an exercise in artificial intelligence methods. Though slow, an informed
search can navigate difficult problems with very little information: a
simple heuristic function tells A* whether it has gotten closer or
farther from the solution. This technique can be useful for solving
challenging problems where an optimal solution is not known. Moreover,
we can also apply informed search to <em>intractable</em> problems where
computational complexity forces us to accept approximate solutions as a
compromise.</p>
<h2 data-number="6.6" id="centrality"><span
class="header-section-number">6.6</span> Centrality</h2>
<h3 data-number="6.6.1" id="degree"><span
class="header-section-number">6.6.1</span> Degree</h3>
<p>The average person (ten of twelve) in the social graph shown in
figure has <em>fewer</em> friends the average friend count of their
friends. These statistics are summarized in the following table.</p>
<figure id="fig:friends">
<embed src="friends.dot.pdf" />
<figcaption aria-hidden="true">Arithmetic in graphs can produce
unintuitive results. In this graph, 10 of 12 vertices has a lower degree
than the average among its adjacent nodes.</figcaption>
</figure>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Friends</th>
<th>Average friend’s friend count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Frank</td>
<td>2</td>
<td>5</td>
</tr>
<tr class="even">
<td>Jasmine</td>
<td>2</td>
<td>5.5</td>
</tr>
<tr class="odd">
<td>Kim</td>
<td>7</td>
<td>3.14</td>
</tr>
<tr class="even">
<td>David</td>
<td>3</td>
<td>3.67</td>
</tr>
<tr class="odd">
<td>Sven</td>
<td>2</td>
<td>5</td>
</tr>
<tr class="even">
<td>Felix</td>
<td>2</td>
<td>5</td>
</tr>
<tr class="odd">
<td>Jean</td>
<td>2</td>
<td>5</td>
</tr>
<tr class="even">
<td>Ivan</td>
<td>3</td>
<td>3.67</td>
</tr>
<tr class="odd">
<td>Adin</td>
<td>7</td>
<td>3.14</td>
</tr>
<tr class="even">
<td>Maria</td>
<td>2</td>
<td>5.5</td>
</tr>
<tr class="odd">
<td>Jose</td>
<td>4</td>
<td>4.5</td>
</tr>
<tr class="even">
<td>Phil</td>
<td>1</td>
<td>7</td>
</tr>
</tbody>
</table>
<p>How can this be possible? We must be careful with definitions. The
average number of friends in this graph is <span
class="math inline">3.08</span>, but we are not looking at the entire
graph. Instead, we are only looking at a subgraph. Look closely at Phil.
Phil has only one friend, Adin, and Adin is highly-connected. In fact,
Adin has more friends than all of his friends, except Kim.</p>
<p>Highly-connected nodes, with outlier degree, can be particularly
important in many graph applications. Transportation networks are an
example: congestion at any major airport “hub” can quickly spread to
adjacent airports and beyond.</p>
<p><em>Degree centrality</em> is a simple and intuitive graph statistic
<span class="citation" data-cites="FREEMAN1978215">[28]</span>. Simply
count the in-degree, out-degree, or both, and use this metric to
discover important nodes in the graph.</p>
<h3 data-number="6.6.2" id="closeness"><span
class="header-section-number">6.6.2</span> Closeness</h3>
<p><em>Closeness centrality</em>, <span
class="math inline"><em>C</em><sub><em>C</em></sub></span>, is also
fairly simple to compute from the sum of unweighted distances from each
node to each other node <span class="citation"
data-cites="10.1121/1.1906679">[29]</span>. Closeness centrality has
been used to study criminal and terrorist networks <span
class="citation" data-cites="Krebs2001MappingNO">[30]</span>.</p>
<p><span class="math display">$$
C_C(x) = \frac{1}{\sum_{y \in v}{\delta(x,y)}}
$$</span></p>
<p>The following Rust program uses an unweighted invocation of
Dijkstra’s algorithm in the <code>petgraph</code> crate<a href="#fn19"
class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a>.
One may run this program at .</p>
<div class="sourceCode" id="cb68"><pre
class="sourceCode rust"><code class="sourceCode rust"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">petgraph::algo::</span>dijkstra<span class="op">;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">petgraph::prelude::</span><span class="op">*;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">petgraph::visit::</span>NodeRef<span class="op">;</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="pp">petgraph::</span>Graph<span class="op">;</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> graph<span class="op">:</span> Graph<span class="op">&lt;</span>()<span class="op">,</span> ()<span class="op">,</span> Undirected<span class="op">&gt;</span> <span class="op">=</span> <span class="pp">Graph::</span>new_undirected()<span class="op">;</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> a <span class="op">=</span> graph<span class="op">.</span>add_node(())<span class="op">;</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> b <span class="op">=</span> graph<span class="op">.</span>add_node(())<span class="op">;</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> c <span class="op">=</span> graph<span class="op">.</span>add_node(())<span class="op">;</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> d <span class="op">=</span> graph<span class="op">.</span>add_node(())<span class="op">;</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> e <span class="op">=</span> graph<span class="op">.</span>add_node(())<span class="op">;</span></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>    graph<span class="op">.</span>extend_with_edges(<span class="op">&amp;</span>[(a<span class="op">,</span> b)<span class="op">,</span> (b<span class="op">,</span> c)<span class="op">,</span> (c<span class="op">,</span> d)<span class="op">,</span> (d<span class="op">,</span> e)])<span class="op">;</span></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> graph <span class="op">=</span> graph<span class="op">;</span></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>    closeness(<span class="op">&amp;</span>graph)<span class="op">;</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a><span class="kw">fn</span> closeness<span class="op">&lt;</span>N<span class="op">,</span> E<span class="op">&gt;</span>(graph<span class="op">:</span> <span class="op">&amp;</span>Graph<span class="op">&lt;</span>N<span class="op">,</span> E<span class="op">,</span> Undirected<span class="op">&gt;</span>) <span class="op">{</span></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> u <span class="kw">in</span> graph<span class="op">.</span>node_indices() <span class="op">{</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> delta <span class="op">=</span> dijkstra(<span class="op">&amp;</span>graph<span class="op">,</span> u<span class="op">.</span>id()<span class="op">,</span> <span class="cn">None</span><span class="op">,</span> <span class="op">|</span>_<span class="op">|</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> n <span class="op">=</span> graph<span class="op">.</span>node_count() <span class="kw">as</span> <span class="dt">f64</span><span class="op">;</span></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> distances <span class="op">=</span> delta<span class="op">.</span>values()<span class="op">.</span>cloned()<span class="op">.</span><span class="pp">sum::</span><span class="op">&lt;</span><span class="dt">i32</span><span class="op">&gt;</span>() <span class="kw">as</span> <span class="dt">f64</span><span class="op">;</span></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> closeness <span class="op">=</span> (n <span class="op">-</span> <span class="dv">1.0</span>) <span class="op">/</span> distances<span class="op">;</span></span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>        <span class="pp">println!</span>(</span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Closeness score for vertex {} is {}.&quot;</span><span class="op">,</span></span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>            u<span class="op">.</span>index()<span class="op">,</span></span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>            closeness</span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>        )<span class="op">;</span></span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The output of this program should be</p>
<pre><code>Closeness score for vertex 0 is 0.4.
Closeness score for vertex 1 is 0.5714285714285714.
Closeness score for vertex 2 is 0.6666666666666666.
Closeness score for vertex 3 is 0.5714285714285714.
Closeness score for vertex 4 is 0.4.</code></pre>
<p>As an exercise, draw the graph described in this program (either by
hand or using software) and assess if the centrality statistics seem
intuitive.</p>
<h3 data-number="6.6.3" id="betweenness"><span
class="header-section-number">6.6.3</span> Betweenness</h3>
<p><em>Betweenness centrality</em>, <span
class="math inline"><em>C</em><sub><em>B</em></sub></span>, seeks to
improve upon closeness by considering edge weights <span
class="citation" data-cites="10.2307/3033543">[31]</span>. The
betweenness for a vertex <span class="math inline"><em>x</em></span> is
calculated the proportion of shortest paths <span
class="math inline"><em>σ</em>(<em>s</em>, <em>t</em>)</span> that
include <span class="math inline"><em>x</em></span> as an intermediary
node along the path.</p>
<p><span class="math display">$$
C_B(x) = \sum_{s \ne x, x \ne t, s \ne t}{
\frac{
    \sigma \left( s, t | x \right)
}{
    \sigma \left( s, t \right)
}
}
$$</span></p>
<p>The computational complexity of so many pathfindings becomes
significant in large graphs and dense graphs <span class="citation"
data-cites="10.1080/0022250X.2001.9990249">[32]</span> <span
class="citation" data-cites="brandes2007centrality">[33]</span>.</p>
<h3 data-number="6.6.4" id="pagerank"><span
class="header-section-number">6.6.4</span> PageRank</h3>
<!-- http://infolab.stanford.edu/~backrub/google.html -->
<p>Google’s well-known <em>PageRank</em> algorithm uses a creative edge
weighting function based on a page’s importance or quality <span
class="citation" data-cites="BRIN1998107">[34]</span>. The metric is
parameterized with a dampening factor, <span
class="math inline"><em>d</em></span>, and requires multiple
iterations.</p>
<p><span class="math display">$$
\text{PR} \left( u \right) = \sum_{v \in B_u}{\frac{\text{PR} \left( v
\right)}{L \left( v \right)}}
$$</span></p>
<p>This peculiar concept of a page’s “reputation” is central to the
efficacy of the Google search engine.</p>
<p>There are many more measures of centrality in graphs beyond degree
centrality, closeness, betweenness, and PageRank. Depending on the
application, any or none of these metrics may be useful. The analyst
studying a graph might consider these metrics “man-made”; they were
created by scientists and mathematicians seeking to model a problem.
These metrics can be customized to the user’s needs to best approach
their unique problem domain.</p>
<!-- We'll just have to try this again for the next edition.

## Power Law distribution

todo [@10.1126/science.286.5439.509]

## Minimum Spanning Tree

todo

## NP-completeness

todo 
-->
<h2 data-number="6.7" id="discussion-prompts-5"><span
class="header-section-number">6.7</span> Discussion prompts</h2>
<ol type="1">
<li><p>A graph can be represented with an adjacency list or a matrix.
What are the advantages and disadvantages of each approach?</p></li>
<li><p>What algorithm can be used to solve the “seven ways to Kevin
Bacon” problem?</p></li>
<li><p>Is a Gantt chart a graph? How can one find the critical path of a
project if represented as a graph?</p></li>
<li><p>If the distance from Paris to Sydney is infinitely far, then can
we use some <em>greater infinity</em> to represent the distance from
London to Sydney?</p></li>
<li><p>Think of a practical problem that can be modeled as a graph, but
where the four discussed measures of center (degree centrality,
closeness, betweenness, and PageRank) are not effective. As a discussion
point, consider whether values immediately associated with vertices and
edges dominate their importance, or if some extrinsic network effect has
a greater effect.</p></li>
</ol>
<h2 data-number="6.8" id="practical-exercises-4"><span
class="header-section-number">6.8</span> Practical exercises</h2>
<!-- Compare two different heuristic functions in a provided A* informed search implementation on the 8-piece puzzle problem. -->
<ol type="1">
<li><p>Convert currency exchange rates from multiplication to addition
using a logarithm, then prove that infinite arbitration is impossible
given a set of exchange rates and Bellman-Ford implementation.</p></li>
<li><p>Define a topological sorting and relate it to a workplace
problem.</p></li>
<li><p>Define the Traveling Salesman Problem (TSP) and explain the
computational difficulty of this problem.</p></li>
<li><p>Determine the minimum paving needed to fully connect a tent
complex using a list of coördinates and a Prim or Kruskal
implementation.</p></li>
<li><p>Simulate an infection model in a dense social graph where edge
weights represent probability of infection.</p></li>
</ol>
<h1 class="unnumbered" id="references">References</h1>
<div id="refs" class="references csl-bib-body" data-entry-spacing="0"
role="list">
<div id="ref-doi:10.1177/0165551506070706" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">J.
Rowley, <span>“The wisdom hierarchy: Representations of the DIKW
hierarchy,”</span> <em>Journal of Information Science</em>, vol. 33, no.
2, pp. 163–180, 2007, doi: <a
href="https://doi.org/10.1177/0165551506070706">10.1177/0165551506070706</a>.
Available:<a href=" https://doi.org/10.1177/0165551506070706">
https://doi.org/10.1177/0165551506070706</a></div>
</div>
<div id="ref-stevens1946theory" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">S.
S. Stevens, <span>“On the theory of scales of measurement,”</span>
<em>Science</em>, vol. 103, no. 2684, pp. 677–680, 1946, doi: <a
href="https://doi.org/10.1126/science.103.2684.677">10.1126/science.103.2684.677</a></div>
</div>
<div id="ref-BillionDollarMistake" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">T.
Hoare, <span>“Null references: The billion dollar mistake,”</span>
presented at the QCon, 2009. Available: <a
href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/">https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/</a></div>
</div>
<div id="ref-rfc4180" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">Y.
Shafranovich, <span>“<span class="nocase">Common Format and MIME Type
for Comma-Separated Values (CSV) Files</span>.”</span> in Request for
comments. RFC 4180; RFC Editor, Oct. 2005. doi: <a
href="https://doi.org/10.17487/RFC4180">10.17487/RFC4180</a>. Available:
<a
href="https://www.rfc-editor.org/info/rfc4180">https://www.rfc-editor.org/info/rfc4180</a></div>
</div>
<div id="ref-doi:10.1126/science.124.3220.486" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[5] </div><div class="csl-right-inline">M.
H. Lietzke, <span>“Relation between weight-lifting totals and body
weight,”</span> <em>Science</em>, vol. 124, no. 3220, pp. 486–487, 1956,
doi: <a
href="https://doi.org/10.1126/science.124.3220.486">10.1126/science.124.3220.486</a>.
Available: <a
href="https://www.science.org/doi/abs/10.1126/science.124.3220.486">https://www.science.org/doi/abs/10.1126/science.124.3220.486</a></div>
</div>
<div id="ref-codd1970relational" class="csl-entry" role="listitem">
<div class="csl-left-margin">[6] </div><div class="csl-right-inline">E.
F. Codd, <span>“A relational model of data for large shared data
banks,”</span> <em>Communications of the ACM</em>, vol. 13, no. 6, pp.
377–387, 1970, doi: <a
href="https://doi.org/10.1145/362384.362685">10.1145/362384.362685</a></div>
</div>
<div id="ref-back-to-the-building-blocks" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[7] </div><div
class="csl-right-inline">White House Office of the National Cyber
Director, <span>“Back to the building blocks: A path toward secure and
measurable software,”</span> 2024. Available: <a
href="https://bidenwhitehouse.archives.gov/wp-content/uploads/2024/02/Final-ONCD-Technical-Report.pdf">https://bidenwhitehouse.archives.gov/wp-content/uploads/2024/02/Final-ONCD-Technical-Report.pdf</a></div>
</div>
<div id="ref-10.1145/947955.947961" class="csl-entry" role="listitem">
<div class="csl-left-margin">[8] </div><div class="csl-right-inline">T.
Rentsch, <span>“Object oriented programming,”</span> <em>SIGPLAN
Not.</em>, vol. 17, no. 9, pp. 51–57, Sep. 1982, doi: <a
href="https://doi.org/10.1145/947955.947961">10.1145/947955.947961</a>.
Available: <a
href="https://doi.org/10.1145/947955.947961">https://doi.org/10.1145/947955.947961</a></div>
</div>
<div id="ref-10.5555/3271463" class="csl-entry" role="listitem">
<div class="csl-left-margin">[9] </div><div class="csl-right-inline">S.
Klabnik and C. Nichols, <em>The rust programming language</em>. USA: No
Starch Press, 2018.</div>
</div>
<div id="ref-rfc8259" class="csl-entry" role="listitem">
<div class="csl-left-margin">[10] </div><div class="csl-right-inline">T.
Bray, <span>“<span>The JavaScript Object Notation (JSON) Data
Interchange Format</span>.”</span> in Request for comments. RFC 8259;
RFC Editor, Dec. 2017. doi: <a
href="https://doi.org/10.17487/RFC8259">10.17487/RFC8259</a>. Available:
<a
href="https://www.rfc-editor.org/info/rfc8259">https://www.rfc-editor.org/info/rfc8259</a></div>
</div>
<div id="ref-6133253" class="csl-entry" role="listitem">
<div class="csl-left-margin">[11] </div><div class="csl-right-inline">E.
Brewer, <span>“CAP twelve years later: How the <span>‘rules’</span> have
changed,”</span> <em>Computer</em>, vol. 45, no. 2, pp. 23–29, 2012,
doi: <a
href="https://doi.org/10.1109/MC.2012.37">10.1109/MC.2012.37</a></div>
</div>
<div id="ref-legendre_1805" class="csl-entry" role="listitem">
<div class="csl-left-margin">[12] </div><div class="csl-right-inline">A.
M. Legendre, <em>Nouvelles méthodes pour la détermination des orbites
des comètes</em>. Paris, France: Firmin Didot, 1805, pp. 72–75.</div>
</div>
<div id="ref-legendre_translation" class="csl-entry" role="listitem">
<div class="csl-left-margin">[13] </div><div class="csl-right-inline">A.
M. Legendre, <span>“On least squares,”</span> in <em>A source book in
mathematics</em>, New York, NY, USA: McGraw-Hill, 1929, pp.
576–579.</div>
</div>
<div id="ref-10.1093/biomet/4.1-2.169" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[14] </div><div class="csl-right-inline">K.
Pearson, <span>“<span>‘Das fehlergesetz und seine verallgemeiner-ungen
durch <span>F</span>echner und <span>P</span>earson*.’</span> A
rejoinder,”</span> <em>Biometrika</em>, vol. 4, no. 1–2, pp. 169–212,
Jun. 1905, doi: <a
href="https://doi.org/10.1093/biomet/4.1-2.169">10.1093/biomet/4.1-2.169</a>.
Available: <a
href="https://doi.org/10.1093/biomet/4.1-2.169">https://doi.org/10.1093/biomet/4.1-2.169</a></div>
</div>
<div id="ref-Wendler2011-ar" class="csl-entry" role="listitem">
<div class="csl-left-margin">[15] </div><div class="csl-right-inline">J.
Wendler, <em>5/3/1: The simplest and most effective training system to
increase raw strength</em>. Lulu.com, 2011.</div>
</div>
<div id="ref-brzycki1993strength" class="csl-entry" role="listitem">
<div class="csl-left-margin">[16] </div><div class="csl-right-inline">M.
Brzycki, <span>“Strength testing—predicting a one-rep max from
reps-to-fatigue,”</span> <em>Journal of Physical Education, Recreation
&amp; Dance</em>, vol. 64, no. 1, pp. 88–90, 1993, doi: <a
href="https://doi.org/10.1080/07303084.1993.10606684">10.1080/07303084.1993.10606684</a></div>
</div>
<div id="ref-10.1093/biomet/30.1-2.81" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[17] </div><div class="csl-right-inline">M.
G. Kendall, <span>“A new measure of rank correlation,”</span>
<em>Biometrika</em>, vol. 30, no. 1–2, pp. 81–93, Jun. 1938, doi: <a
href="https://doi.org/10.1093/biomet/30.1-2.81">10.1093/biomet/30.1-2.81</a>.
Available: <a
href="https://doi.org/10.1093/biomet/30.1-2.81">https://doi.org/10.1093/biomet/30.1-2.81</a></div>
</div>
<div id="ref-10.1093/biomet/33.3.239" class="csl-entry" role="listitem">
<div class="csl-left-margin">[18] </div><div class="csl-right-inline">M.
G. Kendall, <span>“The treatment of ties in ranking problems,”</span>
<em>Biometrika</em>, vol. 33, no. 3, pp. 239–251, Nov. 1945, doi: <a
href="https://doi.org/10.1093/biomet/33.3.239">10.1093/biomet/33.3.239</a>.
Available: <a
href="https://doi.org/10.1093/biomet/33.3.239">https://doi.org/10.1093/biomet/33.3.239</a></div>
</div>
<div id="ref-10.1080/01621459.2020.1758115" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[19] </div><div class="csl-right-inline">S.
Chatterjee, <span>“A new coefficient of correlation,”</span> <em>Journal
of the American Statistical Association</em>, vol. 116, no. 536, pp.
2009–2022, 2021, doi: <a
href="https://doi.org/10.1080/01621459.2020.1758115">10.1080/01621459.2020.1758115</a>.
Available:<a href=" https://arxiv.org/abs/1909.10140">
https://arxiv.org/abs/1909.10140</a></div>
</div>
<div id="ref-10.1080/14786440109462720" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[20] </div><div class="csl-right-inline">K.
Pearson, <span>“LIII. On lines and planes of closest fit to systems of
points in space,”</span> <em>The London, Edinburgh, and Dublin
Philosophical Magazine and Journal of Science</em>, vol. 2, no. 11, pp.
559–572, 1901, doi: <a
href="https://doi.org/10.1080/14786440109462720">10.1080/14786440109462720</a>.
Available:<a href="
          https://doi.org/10.1080/14786440109462720
  "> https://doi.org/10.1080/14786440109462720 </a></div>
</div>
<div id="ref-hotelling1933analysis" class="csl-entry" role="listitem">
<div class="csl-left-margin">[21] </div><div class="csl-right-inline">H.
Hotelling, <span>“Analysis of a complex of statistical variables into
principal components,”</span> <em>Journal of educational
psychology</em>, vol. 24, no. 6, pp. 417–441, 1933, doi: <a
href="https://doi.org/dx.doi.org/10.1037/h0071325">dx.doi.org/10.1037/h0071325</a>.
Available: <a
href="https://www.cis.rit.edu/~rlepci/Erho/Derek/Useful_References/Principal%20Components%20Analysis/Hotelling_PCA_part1.pdf">https://www.cis.rit.edu/~rlepci/Erho/Derek/Useful_References/Principal%20Components%20Analysis/Hotelling_PCA_part1.pdf</a></div>
</div>
<div id="ref-mayerowitzMarioMeets" class="csl-entry" role="listitem">
<div class="csl-left-margin">[22] </div><div class="csl-right-inline">A.
Mayerowitz, <span>“<span>M</span>ario meets <span>P</span>areto.”</span>
<a href="https://www.mayerowitz.io/blog/mario-meets-pareto"
class="uri">https://www.mayerowitz.io/blog/mario-meets-pareto</a>,
2024.</div>
</div>
<div id="ref-10.1145/3544585.3544600" class="csl-entry" role="listitem">
<div class="csl-left-margin">[23] </div><div class="csl-right-inline">E.
W. Dijkstra, <span>“A note on two problems in connexion with
graphs,”</span> in <em><span class="nocase">Edsger Wybe Dijkstra: His
Life,Work, and Legacy</span></em>, 1st ed.New York, NY, USA: Association
for Computing Machinery, 2022, pp. 287–290. doi: <a
href="https://doi.org/10.1145/3544585.3544600">10.1145/3544585.3544600</a></div>
</div>
<div id="ref-4082128" class="csl-entry" role="listitem">
<div class="csl-left-margin">[24] </div><div class="csl-right-inline">P.
E. Hart, N. J. Nilsson, and B. Raphael, <span>“A formal basis for the
heuristic determination of minimum cost paths,”</span> <em>IEEE
Transactions on Systems Science and Cybernetics</em>, vol. 4, no. 2, pp.
100–107, 1968, doi: <a
href="https://doi.org/10.1109/TSSC.1968.300136">10.1109/TSSC.1968.300136</a></div>
</div>
<div id="ref-schuurmans2001local" class="csl-entry" role="listitem">
<div class="csl-left-margin">[25] </div><div class="csl-right-inline">D.
Schuurmans and F. Southey, <span>“Local search characteristics of
incomplete SAT procedures,”</span> <em>Artificial Intelligence</em>,
vol. 132, no. 2, pp. 121–150, 2001, doi: <a
href="https://doi.org/10.1016/S0004-3702(01)00151-5">10.1016/S0004-3702(01)00151-5</a></div>
</div>
<div id="ref-10.2307/2369492" class="csl-entry" role="listitem">
<div class="csl-left-margin">[26] </div><div
class="csl-right-inline">Wm. W. Johnson and W. E. Story, <span>“Notes on
the <span>‘15’</span> puzzle,”</span> <em>American Journal of
Mathematics</em>, vol. 2, no. 4, pp. 397–404, 1879, doi: <a
href="https://doi.org/10.2307/2369492">10.2307/2369492</a>. Available:
<a
href="http://www.jstor.org/stable/2369492">http://www.jstor.org/stable/2369492</a></div>
</div>
<div id="ref-gale1962college" class="csl-entry" role="listitem">
<div class="csl-left-margin">[27] </div><div class="csl-right-inline">D.
Gale and L. S. Shapley, <span>“College admissions and the stability of
marriage,”</span> <em>The American Mathematical Monthly</em>, vol. 69,
no. 1, pp. 9–15, 1962, doi: <a
href="https://doi.org/10.1080/00029890.1962.11989827">10.1080/00029890.1962.11989827</a></div>
</div>
<div id="ref-FREEMAN1978215" class="csl-entry" role="listitem">
<div class="csl-left-margin">[28] </div><div class="csl-right-inline">L.
C. Freeman, <span>“Centrality in social networks conceptual
clarification,”</span> <em>Social Networks</em>, vol. 1, no. 3, pp.
215–239, 1978, doi: <a
href="https://doi.org/10.1016/0378-8733(78)90021-7">https://doi.org/10.1016/0378-8733(78)90021-7</a>.
Available: <a
href="https://www.sciencedirect.com/science/article/pii/0378873378900217">https://www.sciencedirect.com/science/article/pii/0378873378900217</a></div>
</div>
<div id="ref-10.1121/1.1906679" class="csl-entry" role="listitem">
<div class="csl-left-margin">[29] </div><div class="csl-right-inline">A.
Bavelas, <span>“Communication patterns in task-oriented groups,”</span>
<em>The Journal of the Acoustical Society of America</em>, vol. 22, no.
6, pp. 725–730, Nov. 1950, doi: <a
href="https://doi.org/10.1121/1.1906679">10.1121/1.1906679</a>.
Available: <a
href="https://doi.org/10.1121/1.1906679">https://doi.org/10.1121/1.1906679</a></div>
</div>
<div id="ref-Krebs2001MappingNO" class="csl-entry" role="listitem">
<div class="csl-left-margin">[30] </div><div class="csl-right-inline">V.
E. Krebs, <span>“Mapping networks of terrorist cells,”</span> in
<em>Connections</em>, 2002, pp. 43–52. Available: <a
href="http://www.orgnet.com/MappingTerroristNetworks.pdf">http://www.orgnet.com/MappingTerroristNetworks.pdf</a></div>
</div>
<div id="ref-10.2307/3033543" class="csl-entry" role="listitem">
<div class="csl-left-margin">[31] </div><div class="csl-right-inline">L.
C. Freeman, <span>“A set of measures of centrality based on
betweenness,”</span> <em>Sociometry</em>, vol. 40, no. 1, pp. 35–41,
1977, Available: <a
href="http://www.jstor.org/stable/3033543">http://www.jstor.org/stable/3033543</a>.
[Accessed: Sep. 26, 2024]</div>
</div>
<div id="ref-10.1080/0022250X.2001.9990249" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[32] </div><div class="csl-right-inline">U.
Brandes, <span>“A faster algorithm for betweenness centrality,”</span>
<em>The Journal of Mathematical Sociology</em>, vol. 25, no. 2, pp.
163–177, 2001, doi: <a
href="https://doi.org/10.1080/0022250X.2001.9990249">10.1080/0022250X.2001.9990249</a>.
Available: <a
href="http://snap.stanford.edu/class/cs224w-readings/brandes01centrality.pdf">http://snap.stanford.edu/class/cs224w-readings/brandes01centrality.pdf</a></div>
</div>
<div id="ref-brandes2007centrality" class="csl-entry" role="listitem">
<div class="csl-left-margin">[33] </div><div class="csl-right-inline">U.
Brandes and C. Pich, <span>“Centrality estimation in large
networks,”</span> <em>International Journal of Bifurcation and
Chaos</em>, vol. 17, no. 7, pp. 2303–2318, 2007, Available: <a
href="https://www.uni-konstanz.de/mmsp/pubsys/publishedFiles/BrPi07.pdf">https://www.uni-konstanz.de/mmsp/pubsys/publishedFiles/BrPi07.pdf</a></div>
</div>
<div id="ref-BRIN1998107" class="csl-entry" role="listitem">
<div class="csl-left-margin">[34] </div><div class="csl-right-inline">S.
Brin and L. Page, <span>“The anatomy of a large-scale hypertextual web
search engine,”</span> <em>Computer Networks and ISDN Systems</em>, vol.
30, no. 1, pp. 107–117, 1998, doi: <a
href="https://doi.org/10.1016/S0169-7552(98)00110-X">https://doi.org/10.1016/S0169-7552(98)00110-X</a>.
Available: <a
href="https://www.sciencedirect.com/science/article/pii/S016975529800110X">https://www.sciencedirect.com/science/article/pii/S016975529800110X</a></div>
</div>
</div>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li
id="fn1"><p>https://play.rust-lang.org/?&amp;gist=df4c6636ab6ff336dbae5994b7508adc<a
href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a href="#fnref2" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>The symbol <span class="math inline">∝</span> means “is
proportional to.”<a href="#fnref3" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>The letter <span class="math inline"><em>σ</em></span>
has many meanings in mathematics and statistics. In section , we will
introduce variance and standard deviation, which use the symbols <span
class="math inline"><em>σ</em><sup>2</sup></span> and <span
class="math inline"><em>σ</em></span>. Even well-known symbols, such as
<span class="math inline"><em>π</em></span> and <span
class="math inline"><em>e</em></span>, have overloaded meanings in this
field. One must take care to disambiguate meanings using prose.<a
href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>https://sqlime.org/#deta:mb9f8wq2mq0b<a href="#fnref5"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>https://sqlime.org/#deta:36fadcq9apak<a href="#fnref6"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>https://sqlime.org/#deta:32lpfoo57r8g<a href="#fnref7"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>In this context, the “user” is a programmer or data
analyst who is “using” the database or programming language<a
href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li
id="fn9"><p>https://play.rust-lang.org/?gist=9542264fd12645a4ee1956ab7f890812<a
href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>https://go.dev/play/p/IOwH08R_z7Z<a href="#fnref10"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>https://go.dev/play/p/Vbe7BWrwlku<a href="#fnref11"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li
id="fn12"><p>https://support.microsoft.com/en-us/office/skew-function-bdf49d86-b1ef-4804-a046-28eaea69c9fa<a
href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li
id="fn13"><p>https://support.microsoft.com/en-us/office/kurt-function-bc3a265c-5da4-4dcb-b7fd-c237789095ab<a
href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li
id="fn14"><p>https://play.rust-lang.org/?gist=1f3b41a17c10c354ee462062772dbd72<a
href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li
id="fn15"><p>https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=6336707980cfc3a54511842d937fb344<a
href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16"><p>https://go.dev/play/p/AuH2qOgSG-c<a href="#fnref16"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn17"><p>https://go.dev/play/p/yMIcmcsK_V9<a href="#fnref17"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn18"><p>Python <em>requires</em> tab characters where other
languages might accept spaces and tabs interchangably. Copying this
program from a PDF will likely not work. A plain text verion of this
program is available at
https://github.com/wjholden/Data-Literacy/blob/main/dijkstra.py.<a
href="#fnref18" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn19"><p>The term <em>crate</em> is peculiar to Rust. In this
context, the term is interchangable with “library,” which is a more
common programming term.<a href="#fnref19" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
